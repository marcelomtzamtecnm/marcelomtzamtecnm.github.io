(function(){(function(){"use strict";String.prototype.hashCode=function(){var a,l=0,u,w=this.length;for(u=0;u<w;u+=1)a=this.charCodeAt(u),l=l*31+a,l|=0;return l<0&&(l=-l+1),l},String.fromCodePoint=String.fromCodePoint||function(){for(var a=arguments.length,l=[],u;a--;){if(u=arguments[a],u<0||u>1114111)throw new RangeError;u<65536?l.unshift(u):(u-=65536,l.unshift(55296|u>>10,56320|u&1023))}return String.fromCharCode.apply(String,l)},String.prototype.codePointAt=String.prototype.codePointAt||function(a){var l=this.toString(),u=l.length,w=l.charCodeAt(a),x=l.charCodeAt(a+1);return a<0||a>=u?NaN:w<55296||w>56319||a+1===u||x<56320||w>57343?w:65536+1024*(w-55296)+x-56320},String.prototype.charLength=String.prototype.charLength||function(){var a,l,u=0,w,x=this;for(l=0;l<x.length;l+=1)a=x.charCodeAt(l),w=x.charCodeAt(l+1),a>=55296&&a<=57343&&!isNaN(w)&&w>=56320&&(l+=1),u+=1;return u},ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,l){var u,w,x,d=new Uint8Array(this);for(typeof l=="undefined"&&(l=d.length),x=new Uint8Array(l-a),w=x.length,u=0;u<w;u+=1)x[u]=d[u+a];return x.buffer}),ArrayBuffer.prototype.toString=function(a){if(a){var l=new Uint8Array(this),u,w=this.byteLength,x="";for(u=0;u<w;u+=1)x+=String.fromCharCode(l[u]);return btoa(x)}else return"[object ArrayBuffer]"};var e;try{e=window.indexedDB}catch(a){}function n(a,l){var u=a.deleteDatabase(l);u.onsuccess=function(){window.supportsIndexedDB=!0},u.onerror=function(){window.supportsIndexedDB=!1}}requestAnimationFrame(function(){if(e){var a,l;try{a="idbtest-icomoon.io/app",l=e.open(a),l.onerror=function(){l.error&&l.error.name==="InvalidStateError"?window.supportsIndexedDB=!1:(window.supportsIndexedDB=!0,n(e,a))},l.onsuccess=function(){window.supportsIndexedDB=!0,n(e,a)}}catch(u){window.supportsIndexedDB=!1}}else window.supportsIndexedDB=!1});function v(){var a=window.navigator.userAgent,l=a.indexOf("MSIE ");if(l>0)return parseInt(a.substring(l+5,a.indexOf(".",l)),10);var u=a.indexOf("Trident/");if(u>0){var w=a.indexOf("rv:");return parseInt(a.substring(w+3,a.indexOf(".",w)),10)}var x=a.indexOf("Edge/");return x>0?parseInt(a.substring(x+5,a.indexOf(".",x)),10):!1}v()&&(document.body.className+=" msie")})();angular.module("scriptLoader",[]).factory("scriptLoader",["$q",function(e){var n=[],v=function(a,l){var u=e.defer(),w,x;function d(){u.resolve(),l&&l()}return n.indexOf(a)<0?(n.push(a),w=document.getElementsByTagName("script")[0],x=document.createElement("script"),x.src=a,x.addEventListener?x.addEventListener("load",function(){d()},!1):x.onreadystatechange=function(){x.readyState in{loaded:1,complete:1}&&(x.onreadystatechange=null,d())},w.parentNode.insertBefore(x,w)):d(),u.promise};return{load:v}}]);function Oe(e){this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();var n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var v in n)e==v&&(e=n[v]);for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],l=0;l<a.length;l++){var u=a[l].re,w=a[l].process,x=u.exec(e);x&&(channels=w(x),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),m=this.g.toString(16),f=this.b.toString(16);return d.length==1&&(d="0"+d),m.length==1&&(m="0"+m),f.length==1&&(f="0"+f),"#"+d+m+f},this.getHelpXML=function(){for(var d=new Array,m=0;m<a.length;m++)for(var f=a[m].example,c=0;c<f.length;c++)d[d.length]=f[c];for(var y in n)d[d.length]=y;var g=document.createElement("ul");g.setAttribute("id","rgbcolor-examples");for(var m=0;m<d.length;m++)try{var k=document.createElement("li"),B=new Oe(d[m]),A=document.createElement("div");A.style.cssText="margin: 3px; border: 1px solid black; background:"+B.toHex()+"; color:"+B.toHex(),A.appendChild(document.createTextNode("test"));var M=document.createTextNode(" "+d[m]+" -> "+B.toRGB()+" -> "+B.toHex());k.appendChild(A),k.appendChild(M),g.appendChild(k)}catch(F){}return g}}(function(){this.canvg=function(n,v,a){if(n==null&&v==null&&a==null){for(var l=document.getElementsByTagName("svg"),u=0;u<l.length;u++){var w=l[u],x=document.createElement("canvas");x.width=w.clientWidth,x.height=w.clientHeight,w.parentNode.insertBefore(x,w),w.parentNode.removeChild(w);var d=document.createElement("div");d.appendChild(w),canvg(x,d.innerHTML)}return}a=a||{},typeof n=="string"&&(n=document.getElementById(n)),n.svg!=null&&n.svg.stop();var m=e();n.childNodes.length==1&&n.childNodes[0].nodeName=="OBJECT"||(n.svg=m),m.opts=a;var f=n.getContext("2d");typeof v.documentElement!="undefined"?m.loadXmlDoc(f,v):v.substr(0,1)=="<"?m.loadXml(f,v):m.load(f,v)};function e(){var n={};return n.FRAMERATE=30,n.MAX_VIRTUAL_PIXELS=3e4,n.init=function(v){var a=0;n.UniqueId=function(){return a++,"canvg"+a},n.Definitions={},n.Styles={},n.Animations=[],n.Images=[],n.ctx=v,n.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(l,u){this.viewPorts.push({width:l,height:u})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(l){return l!=null&&typeof l=="number"?l:l=="x"?this.width():l=="y"?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},n.init(),n.ImagesLoaded=function(){for(var v=0;v<n.Images.length;v++)if(!n.Images[v].loaded)return!1;return!0},n.trim=function(v){return v.replace(/^\s+|\s+$/g,"")},n.compressSpaces=function(v){return v.replace(/[\s\r\t\n]+/gm," ")},n.ajax=function(v){var a;return window.XMLHttpRequest?a=new XMLHttpRequest:a=new ActiveXObject("Microsoft.XMLHTTP"),a?(a.open("GET",v,!1),a.send(null),a.responseText):null},n.parseXml=function(v){if(window.DOMParser){var a=new DOMParser;return a.parseFromString(v,"text/xml")}else{v=v.replace(/<!DOCTYPE svg[^>]*>/,"");var l=new ActiveXObject("Microsoft.XMLDOM");return l.async="false",l.loadXML(v),l}},n.Property=function(v,a){this.name=v,this.value=a},n.Property.prototype.getValue=function(){return this.value},n.Property.prototype.hasValue=function(){return this.value!=null&&this.value!==""},n.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var v=parseFloat(this.value);return(this.value+"").match(/%$/)&&(v=v/100),v},n.Property.prototype.valueOrDefault=function(v){return this.hasValue()?this.value:v},n.Property.prototype.numValueOrDefault=function(v){return this.hasValue()?this.numValue():v},n.Property.prototype.addOpacity=function(v){var a=this.value;if(v!=null&&v!=""&&typeof this.value=="string"){var l=new Oe(this.value);l.ok&&(a="rgba("+l.r+", "+l.g+", "+l.b+", "+v+")")}return new n.Property(this.name,a)},n.Property.prototype.getDefinition=function(){var v=this.value.match(/#([^\)'"]+)/);return v&&(v=v[1]),v||(v=this.value),n.Definitions[v]},n.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0},n.Property.prototype.getFillStyleDefinition=function(v,a){var l=this.getDefinition();if(l!=null&&l.createGradient)return l.createGradient(n.ctx,v,a);if(l!=null&&l.createPattern){if(l.getHrefAttribute().hasValue()){var u=l.attribute("patternTransform");l=l.getHrefAttribute().getDefinition(),u.hasValue()&&(l.attribute("patternTransform",!0).value=u.value)}return l.createPattern(n.ctx,v)}return null},n.Property.prototype.getDPI=function(v){return 96},n.Property.prototype.getEM=function(v){var a=12,l=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);return l.hasValue()&&(a=l.toPixels(v)),a},n.Property.prototype.getUnits=function(){var v=this.value+"";return v.replace(/[0-9\.\-]/g,"")},n.Property.prototype.toPixels=function(v,a){if(!this.hasValue())return 0;var l=this.value+"";if(l.match(/em$/))return this.numValue()*this.getEM(v);if(l.match(/ex$/))return this.numValue()*this.getEM(v)/2;if(l.match(/px$/))return this.numValue();if(l.match(/pt$/))return this.numValue()*this.getDPI(v)*(1/72);if(l.match(/pc$/))return this.numValue()*15;if(l.match(/cm$/))return this.numValue()*this.getDPI(v)/2.54;if(l.match(/mm$/))return this.numValue()*this.getDPI(v)/25.4;if(l.match(/in$/))return this.numValue()*this.getDPI(v);if(l.match(/%$/))return this.numValue()*n.ViewPort.ComputeSize(v);var u=this.numValue();return a&&u<1?u*n.ViewPort.ComputeSize(v):u},n.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var v=this.value+"";return v.match(/s$/)?this.numValue()*1e3:v.match(/ms$/)?this.numValue():this.numValue()},n.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var v=this.value+"";return v.match(/deg$/)?this.numValue()*(Math.PI/180):v.match(/grad$/)?this.numValue()*(Math.PI/200):v.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},n.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(a,l,u,w,x,d){var m=d!=null?this.Parse(d):this.CreateFont("","","","","",n.ctx.font);return{fontFamily:x||m.fontFamily,fontSize:w||m.fontSize,fontStyle:a||m.fontStyle,fontWeight:u||m.fontWeight,fontVariant:l||m.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var v=this;this.Parse=function(a){for(var l={},u=n.trim(n.compressSpaces(a||"")).split(" "),w={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},x="",d=0;d<u.length;d++)!w.fontStyle&&v.Styles.indexOf(u[d])!=-1?(u[d]!="inherit"&&(l.fontStyle=u[d]),w.fontStyle=!0):!w.fontVariant&&v.Variants.indexOf(u[d])!=-1?(u[d]!="inherit"&&(l.fontVariant=u[d]),w.fontStyle=w.fontVariant=!0):!w.fontWeight&&v.Weights.indexOf(u[d])!=-1?(u[d]!="inherit"&&(l.fontWeight=u[d]),w.fontStyle=w.fontVariant=w.fontWeight=!0):w.fontSize?u[d]!="inherit"&&(x+=u[d]):(u[d]!="inherit"&&(l.fontSize=u[d].split("/")[0]),w.fontStyle=w.fontVariant=w.fontWeight=w.fontSize=!0);return x!=""&&(l.fontFamily=x),l}},n.ToNumberArray=function(v){for(var a=n.trim(n.compressSpaces((v||"").replace(/,/g," "))).split(" "),l=0;l<a.length;l++)a[l]=parseFloat(a[l]);return a},n.Point=function(v,a){this.x=v,this.y=a},n.Point.prototype.angleTo=function(v){return Math.atan2(v.y-this.y,v.x-this.x)},n.Point.prototype.applyTransform=function(v){var a=this.x*v[0]+this.y*v[2]+v[4],l=this.x*v[1]+this.y*v[3]+v[5];this.x=a,this.y=l},n.CreatePoint=function(v){var a=n.ToNumberArray(v);return new n.Point(a[0],a[1])},n.CreatePath=function(v){for(var a=n.ToNumberArray(v),l=[],u=0;u<a.length;u+=2)l.push(new n.Point(a[u],a[u+1]));return l},n.BoundingBox=function(v,a,l,u){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(w,x){w!=null&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=w,this.x2=w),w<this.x1&&(this.x1=w),w>this.x2&&(this.x2=w)),x!=null&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=x,this.y2=x),x<this.y1&&(this.y1=x),x>this.y2&&(this.y2=x))},this.addX=function(w){this.addPoint(w,null)},this.addY=function(w){this.addPoint(null,w)},this.addBoundingBox=function(w){this.addPoint(w.x1,w.y1),this.addPoint(w.x2,w.y2)},this.addQuadraticCurve=function(w,x,d,m,f,c){var y=w+.6666666666666666*(d-w),g=x+2/3*(m-x),k=y+1/3*(f-w),B=g+1/3*(c-x);this.addBezierCurve(w,x,y,k,g,B,f,c)},this.addBezierCurve=function(w,x,d,m,f,c,y,g){var k=[w,x],B=[d,m],A=[f,c],M=[y,g];for(this.addPoint(k[0],k[1]),this.addPoint(M[0],M[1]),i=0;i<=1;i++){var E=function(G){return Math.pow(1-G,3)*k[i]+3*Math.pow(1-G,2)*G*B[i]+3*(1-G)*Math.pow(G,2)*A[i]+Math.pow(G,3)*M[i]},F=6*k[i]-12*B[i]+6*A[i],C=-3*k[i]+9*B[i]-9*A[i]+3*M[i],D=3*B[i]-3*k[i];if(C==0){if(F==0)continue;var U=-D/F;0<U&&U<1&&(i==0&&this.addX(E(U)),i==1&&this.addY(E(U)));continue}var V=Math.pow(F,2)-4*D*C;if(!(V<0)){var J=(-F+Math.sqrt(V))/(2*C);0<J&&J<1&&(i==0&&this.addX(E(J)),i==1&&this.addY(E(J)));var j=(-F-Math.sqrt(V))/(2*C);0<j&&j<1&&(i==0&&this.addX(E(j)),i==1&&this.addY(E(j)))}}},this.isPointInBox=function(w,x){return this.x1<=w&&w<=this.x2&&this.y1<=x&&x<=this.y2},this.addPoint(v,a),this.addPoint(l,u)},n.Transform=function(v){var a=this;this.Type={},this.Type.translate=function(m){this.p=n.CreatePoint(m),this.apply=function(f){f.translate(this.p.x||0,this.p.y||0)},this.unapply=function(f){f.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(f){f.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(m){var f=n.ToNumberArray(m);this.angle=new n.Property("angle",f[0]),this.cx=f[1]||0,this.cy=f[2]||0,this.apply=function(c){c.translate(this.cx,this.cy),c.rotate(this.angle.toRadians()),c.translate(-this.cx,-this.cy)},this.unapply=function(c){c.translate(this.cx,this.cy),c.rotate(-1*this.angle.toRadians()),c.translate(-this.cx,-this.cy)},this.applyToPoint=function(c){var y=this.angle.toRadians();c.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),c.applyTransform([Math.cos(y),Math.sin(y),-Math.sin(y),Math.cos(y),0,0]),c.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(m){this.p=n.CreatePoint(m),this.apply=function(f){f.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(f){f.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(f){f.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(m){this.m=n.ToNumberArray(m),this.apply=function(f){f.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(f){f.applyTransform(this.m)}},this.Type.SkewBase=function(m){this.base=a.Type.matrix,this.base(m),this.angle=new n.Property("angle",m)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(m){this.base=a.Type.SkewBase,this.base(m),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(m){this.base=a.Type.SkewBase,this.base(m),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(m){for(var f=0;f<this.transforms.length;f++)this.transforms[f].apply(m)},this.unapply=function(m){for(var f=this.transforms.length-1;f>=0;f--)this.transforms[f].unapply(m)},this.applyToPoint=function(m){for(var f=0;f<this.transforms.length;f++)this.transforms[f].applyToPoint(m)};for(var l=n.trim(n.compressSpaces(v)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),u=0;u<l.length;u++){var w=n.trim(l[u].split("(")[0]),x=l[u].split("(")[1].replace(")",""),d=new this.Type[w](x);d.type=w,this.transforms.push(d)}},n.AspectRatio=function(v,a,l,u,w,x,d,m,f,c){a=n.compressSpaces(a),a=a.replace(/^defer\s/,"");var y=a.split(" ")[0]||"xMidYMid",g=a.split(" ")[1]||"meet",k=l/u,B=w/x,A=Math.min(k,B),M=Math.max(k,B);g=="meet"&&(u*=A,x*=A),g=="slice"&&(u*=M,x*=M),f=new n.Property("refX",f),c=new n.Property("refY",c),f.hasValue()&&c.hasValue()?v.translate(-A*f.toPixels("x"),-A*c.toPixels("y")):(y.match(/^xMid/)&&(g=="meet"&&A==B||g=="slice"&&M==B)&&v.translate(l/2-u/2,0),y.match(/YMid$/)&&(g=="meet"&&A==k||g=="slice"&&M==k)&&v.translate(0,w/2-x/2),y.match(/^xMax/)&&(g=="meet"&&A==B||g=="slice"&&M==B)&&v.translate(l-u,0),y.match(/YMax$/)&&(g=="meet"&&A==k||g=="slice"&&M==k)&&v.translate(0,w-x)),y=="none"?v.scale(k,B):g=="meet"?v.scale(A,A):g=="slice"&&v.scale(M,M),v.translate(d==null?0:-d,m==null?0:-m)},n.Element={},n.EmptyProperty=new n.Property("EMPTY",""),n.Element.ElementBase=function(v){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(g,k){var B=this.attributes[g];return B!=null?B:(k==!0&&(B=new n.Property(g,""),this.attributes[g]=B),B||n.EmptyProperty)},this.getHrefAttribute=function(){for(var g in this.attributes)if(g.match(/:href$/))return this.attributes[g];return n.EmptyProperty},this.style=function(g,k){var B=this.styles[g];if(B!=null)return B;var A=this.attribute(g);if(A!=null&&A.hasValue())return this.styles[g]=A,A;var M=this.parent;if(M!=null){var E=M.style(g);if(E!=null&&E.hasValue())return E}return k==!0&&(B=new n.Property(g,""),this.styles[g]=B),B||n.EmptyProperty},this.render=function(g){if(this.style("display").value!="none"&&this.attribute("visibility").value!="hidden"){if(g.save(),this.attribute("mask").hasValue()){var k=this.attribute("mask").getDefinition();k!=null&&k.apply(g,this)}else if(this.style("filter").hasValue()){var B=this.style("filter").getDefinition();B!=null&&B.apply(g,this)}else this.setContext(g),this.renderChildren(g),this.clearContext(g);g.restore()}},this.setContext=function(g){},this.clearContext=function(g){},this.renderChildren=function(g){for(var k=0;k<this.children.length;k++)this.children[k].render(g)},this.addChild=function(g,k){var B=g;k&&(B=n.CreateElement(g)),B.parent=this,this.children.push(B)},v!=null&&v.nodeType==1){for(var a=0;a<v.childNodes.length;a++){var l=v.childNodes[a];if(l.nodeType==1&&this.addChild(l,!0),this.captureTextNodes&&l.nodeType==3){var u=l.nodeValue||l.text||"";n.trim(n.compressSpaces(u))!=""&&this.addChild(new n.Element.tspan(l),!1)}}for(var a=0;a<v.attributes.length;a++){var w=v.attributes[a];this.attributes[w.nodeName]=new n.Property(w.nodeName,w.nodeValue)}var x=n.Styles[v.nodeName];if(x!=null)for(var d in x)this.styles[d]=x[d];if(this.attribute("class").hasValue())for(var m=n.compressSpaces(this.attribute("class").value).split(" "),f=0;f<m.length;f++){if(x=n.Styles["."+m[f]],x!=null)for(var d in x)this.styles[d]=x[d];if(x=n.Styles[v.nodeName+"."+m[f]],x!=null)for(var d in x)this.styles[d]=x[d]}if(this.attribute("id").hasValue()){var x=n.Styles["#"+this.attribute("id").value];if(x!=null)for(var d in x)this.styles[d]=x[d]}if(this.attribute("style").hasValue()){for(var x=this.attribute("style").value.split(";"),a=0;a<x.length;a++)if(n.trim(x[a])!=""){var c=x[a].split(":"),d=n.trim(c[0]),y=n.trim(c[1]);this.styles[d]=new n.Property(d,y)}}this.attribute("id").hasValue()&&n.Definitions[this.attribute("id").value]==null&&(n.Definitions[this.attribute("id").value]=this)}},n.Element.RenderedElementBase=function(v){this.base=n.Element.ElementBase,this.base(v),this.setContext=function(a){if(this.style("fill").isUrlDefinition()){var l=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));l!=null&&(a.fillStyle=l)}else if(this.style("fill").hasValue()){var u=this.style("fill");u.value=="currentColor"&&(u.value=this.style("color").value),a.fillStyle=u.value=="none"?"rgba(0,0,0,0)":u.value}if(this.style("fill-opacity").hasValue()){var u=new n.Property("fill",a.fillStyle);u=u.addOpacity(this.style("fill-opacity").value),a.fillStyle=u.value}if(this.style("stroke").isUrlDefinition()){var l=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));l!=null&&(a.strokeStyle=l)}else if(this.style("stroke").hasValue()){var w=this.style("stroke");w.value=="currentColor"&&(w.value=this.style("color").value),a.strokeStyle=w.value=="none"?"rgba(0,0,0,0)":w.value}if(this.style("stroke-opacity").hasValue()){var w=new n.Property("stroke",a.strokeStyle);w=w.addOpacity(this.style("stroke-opacity").value),a.strokeStyle=w.value}if(this.style("stroke-width").hasValue()){var x=this.style("stroke-width").toPixels();a.lineWidth=x==0?.001:x}if(this.style("stroke-linecap").hasValue()&&(a.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(a.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(a.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var d=n.ToNumberArray(this.style("stroke-dasharray").value);typeof a.setLineDash!="undefined"?a.setLineDash(d):typeof a.webkitLineDash!="undefined"?a.webkitLineDash=d:typeof a.mozDash!="undefined"&&(a.mozDash=d);var m=this.style("stroke-dashoffset").numValueOrDefault(1);typeof a.lineDashOffset!="undefined"?a.lineDashOffset=m:typeof a.webkitLineDashOffset!="undefined"?a.webkitLineDashOffset=m:typeof a.mozDashOffset!="undefined"&&(a.mozDashOffset=m)}if(typeof a.font!="undefined"&&(a.font=n.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var f=new n.Transform(this.attribute("transform").value);f.apply(a)}if(this.style("clip-path").hasValue()){var c=this.style("clip-path").getDefinition();c!=null&&c.apply(a)}this.style("opacity").hasValue()&&(a.globalAlpha=this.style("opacity").numValue())}},n.Element.RenderedElementBase.prototype=new n.Element.ElementBase,n.Element.PathElementBase=function(v){this.base=n.Element.RenderedElementBase,this.base(v),this.path=function(a){return a!=null&&a.beginPath(),new n.BoundingBox},this.renderChildren=function(a){this.path(a),n.Mouse.checkPath(this,a),a.fillStyle!=""&&(this.attribute("fill-rule").hasValue()?a.fill(this.attribute("fill-rule").value):a.fill()),a.strokeStyle!=""&&a.stroke();var l=this.getMarkers();if(l!=null){if(this.style("marker-start").isUrlDefinition()){var u=this.style("marker-start").getDefinition();u.render(a,l[0][0],l[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var u=this.style("marker-mid").getDefinition(),w=1;w<l.length-1;w++)u.render(a,l[w][0],l[w][1]);if(this.style("marker-end").isUrlDefinition()){var u=this.style("marker-end").getDefinition();u.render(a,l[l.length-1][0],l[l.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},n.Element.PathElementBase.prototype=new n.Element.RenderedElementBase,n.Element.svg=function(v){this.base=n.Element.RenderedElementBase,this.base(v),this.baseClearContext=this.clearContext,this.clearContext=function(a){this.baseClearContext(a),n.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)",a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.baseSetContext(a),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var l=n.ViewPort.width(),u=n.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),typeof this.root=="undefined"){l=this.attribute("width").toPixels("x"),u=this.attribute("height").toPixels("y");var w=0,x=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(w=-this.attribute("refX").toPixels("x"),x=-this.attribute("refY").toPixels("y")),a.beginPath(),a.moveTo(w,x),a.lineTo(l,x),a.lineTo(l,u),a.lineTo(w,u),a.closePath(),a.clip()}if(n.ViewPort.SetCurrent(l,u),this.attribute("viewBox").hasValue()){var d=n.ToNumberArray(this.attribute("viewBox").value),m=d[0],f=d[1];l=d[2],u=d[3],n.AspectRatio(a,this.attribute("preserveAspectRatio").value,n.ViewPort.width(),l,n.ViewPort.height(),u,m,f,this.attribute("refX").value,this.attribute("refY").value),n.ViewPort.RemoveCurrent(),n.ViewPort.SetCurrent(d[2],d[3])}}},n.Element.svg.prototype=new n.Element.RenderedElementBase,n.Element.rect=function(v){this.base=n.Element.PathElementBase,this.base(v),this.path=function(a){var l=this.attribute("x").toPixels("x"),u=this.attribute("y").toPixels("y"),w=this.attribute("width").toPixels("x"),x=this.attribute("height").toPixels("y"),d=this.attribute("rx").toPixels("x"),m=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(m=d),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(d=m),d=Math.min(d,w/2),m=Math.min(m,x/2),a!=null&&(a.beginPath(),a.moveTo(l+d,u),a.lineTo(l+w-d,u),a.quadraticCurveTo(l+w,u,l+w,u+m),a.lineTo(l+w,u+x-m),a.quadraticCurveTo(l+w,u+x,l+w-d,u+x),a.lineTo(l+d,u+x),a.quadraticCurveTo(l,u+x,l,u+x-m),a.lineTo(l,u+m),a.quadraticCurveTo(l,u,l+d,u),a.closePath()),new n.BoundingBox(l,u,l+w,u+x)}},n.Element.rect.prototype=new n.Element.PathElementBase,n.Element.circle=function(v){this.base=n.Element.PathElementBase,this.base(v),this.path=function(a){var l=this.attribute("cx").toPixels("x"),u=this.attribute("cy").toPixels("y"),w=this.attribute("r").toPixels();return a!=null&&(a.beginPath(),a.arc(l,u,w,0,Math.PI*2,!0),a.closePath()),new n.BoundingBox(l-w,u-w,l+w,u+w)}},n.Element.circle.prototype=new n.Element.PathElementBase,n.Element.ellipse=function(v){this.base=n.Element.PathElementBase,this.base(v),this.path=function(a){var l=4*((Math.sqrt(2)-1)/3),u=this.attribute("rx").toPixels("x"),w=this.attribute("ry").toPixels("y"),x=this.attribute("cx").toPixels("x"),d=this.attribute("cy").toPixels("y");return a!=null&&(a.beginPath(),a.moveTo(x,d-w),a.bezierCurveTo(x+l*u,d-w,x+u,d-l*w,x+u,d),a.bezierCurveTo(x+u,d+l*w,x+l*u,d+w,x,d+w),a.bezierCurveTo(x-l*u,d+w,x-u,d+l*w,x-u,d),a.bezierCurveTo(x-u,d-l*w,x-l*u,d-w,x,d-w),a.closePath()),new n.BoundingBox(x-u,d-w,x+u,d+w)}},n.Element.ellipse.prototype=new n.Element.PathElementBase,n.Element.line=function(v){this.base=n.Element.PathElementBase,this.base(v),this.getPoints=function(){return[new n.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new n.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(a){var l=this.getPoints();return a!=null&&(a.beginPath(),a.moveTo(l[0].x,l[0].y),a.lineTo(l[1].x,l[1].y)),new n.BoundingBox(l[0].x,l[0].y,l[1].x,l[1].y)},this.getMarkers=function(){var a=this.getPoints(),l=a[0].angleTo(a[1]);return[[a[0],l],[a[1],l]]}},n.Element.line.prototype=new n.Element.PathElementBase,n.Element.polyline=function(v){this.base=n.Element.PathElementBase,this.base(v),this.points=n.CreatePath(this.attribute("points").value),this.path=function(a){var l=new n.BoundingBox(this.points[0].x,this.points[0].y);a!=null&&(a.beginPath(),a.moveTo(this.points[0].x,this.points[0].y));for(var u=1;u<this.points.length;u++)l.addPoint(this.points[u].x,this.points[u].y),a!=null&&a.lineTo(this.points[u].x,this.points[u].y);return l},this.getMarkers=function(){for(var a=[],l=0;l<this.points.length-1;l++)a.push([this.points[l],this.points[l].angleTo(this.points[l+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},n.Element.polyline.prototype=new n.Element.PathElementBase,n.Element.polygon=function(v){this.base=n.Element.polyline,this.base(v),this.basePath=this.path,this.path=function(a){var l=this.basePath(a);return a!=null&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),l}},n.Element.polygon.prototype=new n.Element.polyline,n.Element.path=function(v){this.base=n.Element.PathElementBase,this.base(v);var a=this.attribute("d").value;a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=n.compressSpaces(a),a=n.trim(a),this.PathParser=new function(l){this.tokens=l.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new n.Point(0,0),this.control=new n.Point(0,0),this.current=new n.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var u=new n.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(u)},this.getAsControlPoint=function(){var u=this.getPoint();return this.control=u,u},this.getAsCurrentPoint=function(){var u=this.getPoint();return this.current=u,u},this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t")return this.current;var u=new n.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return u},this.makeAbsolute=function(u){return this.isRelativeCommand()&&(u.x+=this.current.x,u.y+=this.current.y),u},this.addMarker=function(u,w,x){x!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(x)),this.addMarkerAngle(u,w==null?null:w.angleTo(u))},this.addMarkerAngle=function(u,w){this.points.push(u),this.angles.push(w)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var u=0;u<this.angles.length;u++)if(this.angles[u]==null){for(var w=u+1;w<this.angles.length;w++)if(this.angles[w]!=null){this.angles[u]=this.angles[w];break}}return this.angles}}(a),this.path=function(l){var u=this.PathParser;u.reset();var w=new n.BoundingBox;for(l!=null&&l.beginPath();!u.isEnd();)switch(u.nextCommand(),u.command){case"M":case"m":var x=u.getAsCurrentPoint();for(u.addMarker(x),w.addPoint(x.x,x.y),l!=null&&l.moveTo(x.x,x.y),u.start=u.current;!u.isCommandOrEnd();){var x=u.getAsCurrentPoint();u.addMarker(x,u.start),w.addPoint(x.x,x.y),l!=null&&l.lineTo(x.x,x.y)}break;case"L":case"l":for(;!u.isCommandOrEnd();){var d=u.current,x=u.getAsCurrentPoint();u.addMarker(x,d),w.addPoint(x.x,x.y),l!=null&&l.lineTo(x.x,x.y)}break;case"H":case"h":for(;!u.isCommandOrEnd();){var m=new n.Point((u.isRelativeCommand()?u.current.x:0)+u.getScalar(),u.current.y);u.addMarker(m,u.current),u.current=m,w.addPoint(u.current.x,u.current.y),l!=null&&l.lineTo(u.current.x,u.current.y)}break;case"V":case"v":for(;!u.isCommandOrEnd();){var m=new n.Point(u.current.x,(u.isRelativeCommand()?u.current.y:0)+u.getScalar());u.addMarker(m,u.current),u.current=m,w.addPoint(u.current.x,u.current.y),l!=null&&l.lineTo(u.current.x,u.current.y)}break;case"C":case"c":for(;!u.isCommandOrEnd();){var f=u.current,c=u.getPoint(),y=u.getAsControlPoint(),g=u.getAsCurrentPoint();u.addMarker(g,y,c),w.addBezierCurve(f.x,f.y,c.x,c.y,y.x,y.y,g.x,g.y),l!=null&&l.bezierCurveTo(c.x,c.y,y.x,y.y,g.x,g.y)}break;case"S":case"s":for(;!u.isCommandOrEnd();){var f=u.current,c=u.getReflectedControlPoint(),y=u.getAsControlPoint(),g=u.getAsCurrentPoint();u.addMarker(g,y,c),w.addBezierCurve(f.x,f.y,c.x,c.y,y.x,y.y,g.x,g.y),l!=null&&l.bezierCurveTo(c.x,c.y,y.x,y.y,g.x,g.y)}break;case"Q":case"q":for(;!u.isCommandOrEnd();){var f=u.current,y=u.getAsControlPoint(),g=u.getAsCurrentPoint();u.addMarker(g,y,y),w.addQuadraticCurve(f.x,f.y,y.x,y.y,g.x,g.y),l!=null&&l.quadraticCurveTo(y.x,y.y,g.x,g.y)}break;case"T":case"t":for(;!u.isCommandOrEnd();){var f=u.current,y=u.getReflectedControlPoint();u.control=y;var g=u.getAsCurrentPoint();u.addMarker(g,y,y),w.addQuadraticCurve(f.x,f.y,y.x,y.y,g.x,g.y),l!=null&&l.quadraticCurveTo(y.x,y.y,g.x,g.y)}break;case"A":case"a":for(;!u.isCommandOrEnd();){var f=u.current,k=u.getScalar(),B=u.getScalar(),A=u.getScalar()*(Math.PI/180),M=u.getScalar(),E=u.getScalar(),g=u.getAsCurrentPoint(),F=new n.Point(Math.cos(A)*(f.x-g.x)/2+Math.sin(A)*(f.y-g.y)/2,-Math.sin(A)*(f.x-g.x)/2+Math.cos(A)*(f.y-g.y)/2),C=Math.pow(F.x,2)/Math.pow(k,2)+Math.pow(F.y,2)/Math.pow(B,2);C>1&&(k*=Math.sqrt(C),B*=Math.sqrt(C));var D=(M==E?-1:1)*Math.sqrt((Math.pow(k,2)*Math.pow(B,2)-Math.pow(k,2)*Math.pow(F.y,2)-Math.pow(B,2)*Math.pow(F.x,2))/(Math.pow(k,2)*Math.pow(F.y,2)+Math.pow(B,2)*Math.pow(F.x,2)));isNaN(D)&&(D=0);var U=new n.Point(D*k*F.y/B,D*-B*F.x/k),V=new n.Point((f.x+g.x)/2+Math.cos(A)*U.x-Math.sin(A)*U.y,(f.y+g.y)/2+Math.sin(A)*U.x+Math.cos(A)*U.y),J=function(be){return Math.sqrt(Math.pow(be[0],2)+Math.pow(be[1],2))},j=function(be,ue){return(be[0]*ue[0]+be[1]*ue[1])/(J(be)*J(ue))},G=function(be,ue){return(be[0]*ue[1]<be[1]*ue[0]?-1:1)*Math.acos(j(be,ue))},re=G([1,0],[(F.x-U.x)/k,(F.y-U.y)/B]),le=[(F.x-U.x)/k,(F.y-U.y)/B],he=[(-F.x-U.x)/k,(-F.y-U.y)/B],fe=G(le,he);j(le,he)<=-1&&(fe=Math.PI),j(le,he)>=1&&(fe=0);var de=1-E?1:-1,Be=re+de*(fe/2),$=new n.Point(V.x+k*Math.cos(Be),V.y+B*Math.sin(Be));if(u.addMarkerAngle($,Be-de*Math.PI/2),u.addMarkerAngle(g,Be-de*Math.PI),w.addPoint(g.x,g.y),l!=null){var j=k>B?k:B,oe=k>B?1:k/B,ee=k>B?B/k:1;l.translate(V.x,V.y),l.rotate(A),l.scale(oe,ee),l.arc(0,0,j,re,re+fe,1-E),l.scale(1/oe,1/ee),l.rotate(-A),l.translate(-V.x,-V.y)}}break;case"Z":case"z":l!=null&&l.closePath(),u.current=u.start}return w},this.getMarkers=function(){for(var l=this.PathParser.getMarkerPoints(),u=this.PathParser.getMarkerAngles(),w=[],x=0;x<l.length;x++)w.push([l[x],u[x]]);return w}},n.Element.path.prototype=new n.Element.PathElementBase,n.Element.pattern=function(v){this.base=n.Element.ElementBase,this.base(v),this.createPattern=function(a,l){var u=this.attribute("width").toPixels("x",!0),w=this.attribute("height").toPixels("y",!0),x=new n.Element.svg;x.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value),x.attributes.width=new n.Property("width",u+"px"),x.attributes.height=new n.Property("height",w+"px"),x.attributes.transform=new n.Property("transform",this.attribute("patternTransform").value),x.children=this.children;var d=document.createElement("canvas");d.width=u,d.height=w;var m=d.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&m.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var f=-1;f<=1;f++)for(var c=-1;c<=1;c++)m.save(),m.translate(f*d.width,c*d.height),x.render(m),m.restore();var y=a.createPattern(d,"repeat");return y}},n.Element.pattern.prototype=new n.Element.ElementBase,n.Element.marker=function(v){this.base=n.Element.ElementBase,this.base(v),this.baseRender=this.render,this.render=function(a,l,u){a.translate(l.x,l.y),this.attribute("orient").valueOrDefault("auto")=="auto"&&a.rotate(u),this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&a.scale(a.lineWidth,a.lineWidth),a.save();var w=new n.Element.svg;w.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value),w.attributes.refX=new n.Property("refX",this.attribute("refX").value),w.attributes.refY=new n.Property("refY",this.attribute("refY").value),w.attributes.width=new n.Property("width",this.attribute("markerWidth").value),w.attributes.height=new n.Property("height",this.attribute("markerHeight").value),w.attributes.fill=new n.Property("fill",this.attribute("fill").valueOrDefault("black")),w.attributes.stroke=new n.Property("stroke",this.attribute("stroke").valueOrDefault("none")),w.children=this.children,w.render(a),a.restore(),this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&a.scale(1/a.lineWidth,1/a.lineWidth),this.attribute("orient").valueOrDefault("auto")=="auto"&&a.rotate(-u),a.translate(-l.x,-l.y)}},n.Element.marker.prototype=new n.Element.ElementBase,n.Element.defs=function(v){this.base=n.Element.ElementBase,this.base(v),this.render=function(a){}},n.Element.defs.prototype=new n.Element.ElementBase,n.Element.GradientBase=function(v){this.base=n.Element.ElementBase,this.base(v),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var a=0;a<this.children.length;a++){var l=this.children[a];l.type=="stop"&&this.stops.push(l)}this.getGradient=function(){},this.createGradient=function(u,w,x){var d=this;this.getHrefAttribute().hasValue()&&(d=this.getHrefAttribute().getDefinition());var m=function(E){if(x.hasValue()){var F=new n.Property("color",E);return F.addOpacity(x.value).value}return E},f=this.getGradient(u,w);if(f==null)return m(d.stops[d.stops.length-1].color);for(var c=0;c<d.stops.length;c++)f.addColorStop(d.stops[c].offset,m(d.stops[c].color));if(this.attribute("gradientTransform").hasValue()){var y=n.ViewPort.viewPorts[0],g=new n.Element.rect;g.attributes.x=new n.Property("x",-n.MAX_VIRTUAL_PIXELS/3),g.attributes.y=new n.Property("y",-n.MAX_VIRTUAL_PIXELS/3),g.attributes.width=new n.Property("width",n.MAX_VIRTUAL_PIXELS),g.attributes.height=new n.Property("height",n.MAX_VIRTUAL_PIXELS);var k=new n.Element.g;k.attributes.transform=new n.Property("transform",this.attribute("gradientTransform").value),k.children=[g];var B=new n.Element.svg;B.attributes.x=new n.Property("x",0),B.attributes.y=new n.Property("y",0),B.attributes.width=new n.Property("width",y.width),B.attributes.height=new n.Property("height",y.height),B.children=[k];var A=document.createElement("canvas");A.width=y.width,A.height=y.height;var M=A.getContext("2d");return M.fillStyle=f,B.render(M),M.createPattern(A,"no-repeat")}return f}},n.Element.GradientBase.prototype=new n.Element.ElementBase,n.Element.linearGradient=function(v){this.base=n.Element.GradientBase,this.base(v),this.getGradient=function(a,l){var u=l.getBoundingBox();!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()&&(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var w=this.gradientUnits=="objectBoundingBox"?u.x()+u.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),x=this.gradientUnits=="objectBoundingBox"?u.y()+u.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),d=this.gradientUnits=="objectBoundingBox"?u.x()+u.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),m=this.gradientUnits=="objectBoundingBox"?u.y()+u.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return w==d&&x==m?null:a.createLinearGradient(w,x,d,m)}},n.Element.linearGradient.prototype=new n.Element.GradientBase,n.Element.radialGradient=function(v){this.base=n.Element.GradientBase,this.base(v),this.getGradient=function(a,l){var u=l.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var w=this.gradientUnits=="objectBoundingBox"?u.x()+u.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),x=this.gradientUnits=="objectBoundingBox"?u.y()+u.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),d=w,m=x;this.attribute("fx").hasValue()&&(d=this.gradientUnits=="objectBoundingBox"?u.x()+u.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(m=this.gradientUnits=="objectBoundingBox"?u.y()+u.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var f=this.gradientUnits=="objectBoundingBox"?(u.width()+u.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(d,m,0,w,x,f)}},n.Element.radialGradient.prototype=new n.Element.GradientBase,n.Element.stop=function(v){this.base=n.Element.ElementBase,this.base(v),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var a=this.style("stop-color");this.style("stop-opacity").hasValue()&&(a=a.addOpacity(this.style("stop-opacity").value)),this.color=a.value},n.Element.stop.prototype=new n.Element.ElementBase,n.Element.AnimateBase=function(v){this.base=n.Element.ElementBase,this.base(v),n.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var a=this.attribute("attributeType").value,l=this.attribute("attributeName").value;return a=="CSS"?this.parent.style(l,!0):this.parent.attribute(l,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(a){if(this.initialValue==null&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration)if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite")this.duration=0;else return this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed?(this.removed=!0,this.getProperty().value=this.initialValue,!0):!1;this.duration=this.duration+a;var l=!1;if(this.begin<this.duration){var u=this.calcValue();if(this.attribute("type").hasValue()){var w=this.attribute("type").value;u=w+"("+u+")"}this.getProperty().value=u,l=!0}return l},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var l=a.progress*(this.values.value.length-1),u=Math.floor(l),w=Math.ceil(l);a.from=new n.Property("from",parseFloat(this.values.value[u])),a.to=new n.Property("to",parseFloat(this.values.value[w])),a.progress=(l-u)/(w-u)}else a.from=this.from,a.to=this.to;return a}},n.Element.AnimateBase.prototype=new n.Element.ElementBase,n.Element.animate=function(v){this.base=n.Element.AnimateBase,this.base(v),this.calcValue=function(){var a=this.progress(),l=a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress;return l+this.initialUnits}},n.Element.animate.prototype=new n.Element.AnimateBase,n.Element.animateColor=function(v){this.base=n.Element.AnimateBase,this.base(v),this.calcValue=function(){var a=this.progress(),l=new Oe(a.from.value),u=new Oe(a.to.value);if(l.ok&&u.ok){var w=l.r+(u.r-l.r)*a.progress,x=l.g+(u.g-l.g)*a.progress,d=l.b+(u.b-l.b)*a.progress;return"rgb("+parseInt(w,10)+","+parseInt(x,10)+","+parseInt(d,10)+")"}return this.attribute("from").value}},n.Element.animateColor.prototype=new n.Element.AnimateBase,n.Element.animateTransform=function(v){this.base=n.Element.AnimateBase,this.base(v),this.calcValue=function(){for(var a=this.progress(),l=n.ToNumberArray(a.from.value),u=n.ToNumberArray(a.to.value),w="",x=0;x<l.length;x++)w+=l[x]+(u[x]-l[x])*a.progress+" ";return w}},n.Element.animateTransform.prototype=new n.Element.animate,n.Element.font=function(v){this.base=n.Element.ElementBase,this.base(v),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var a=0;a<this.children.length;a++){var l=this.children[a];l.type=="font-face"?(this.fontFace=l,l.style("font-family").hasValue()&&(n.Definitions[l.style("font-family").value]=this)):l.type=="missing-glyph"?this.missingGlyph=l:l.type=="glyph"&&(l.arabicForm!=""?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[l.unicode]=="undefined"&&(this.glyphs[l.unicode]=[]),this.glyphs[l.unicode][l.arabicForm]=l):this.glyphs[l.unicode]=l)}},n.Element.font.prototype=new n.Element.ElementBase,n.Element.fontface=function(v){this.base=n.Element.ElementBase,this.base(v),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},n.Element.fontface.prototype=new n.Element.ElementBase,n.Element.missingglyph=function(v){this.base=n.Element.path,this.base(v),this.horizAdvX=0},n.Element.missingglyph.prototype=new n.Element.path,n.Element.glyph=function(v){this.base=n.Element.path,this.base(v),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},n.Element.glyph.prototype=new n.Element.path,n.Element.text=function(v){this.captureTextNodes=!0,this.base=n.Element.RenderedElementBase,this.base(v),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(a.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new n.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(a){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(a,this,0);for(var l=0;l<this.children.length;l++)this.renderChild(a,this,l)},this.getAnchorDelta=function(a,l,u){var w=this.style("text-anchor").valueOrDefault("start");if(w!="start"){for(var x=0,d=u;d<l.children.length;d++){var m=l.children[d];if(d>u&&m.attribute("x").hasValue())break;x+=m.measureTextRecursive(a)}return-1*(w=="end"?x:x/2)}return 0},this.renderChild=function(a,l,u){var w=l.children[u];w.attribute("x").hasValue()?w.x=w.attribute("x").toPixels("x")+this.getAnchorDelta(a,l,u):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),w.attribute("dx").hasValue()&&(this.x+=w.attribute("dx").toPixels("x")),w.x=this.x),this.x=w.x+w.measureText(a),w.attribute("y").hasValue()?w.y=w.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),w.attribute("dy").hasValue()&&(this.y+=w.attribute("dy").toPixels("y")),w.y=this.y),this.y=w.y,w.render(a);for(var u=0;u<w.children.length;u++)this.renderChild(a,w,u)}},n.Element.text.prototype=new n.Element.RenderedElementBase,n.Element.TextElementBase=function(v){this.base=n.Element.RenderedElementBase,this.base(v),this.getGlyph=function(a,l,u){var w=l[u],x=null;if(a.isArabic){var d="isolated";(u==0||l[u-1]==" ")&&u<l.length-2&&l[u+1]!=" "&&(d="terminal"),u>0&&l[u-1]!=" "&&u<l.length-2&&l[u+1]!=" "&&(d="medial"),u>0&&l[u-1]!=" "&&(u==l.length-1||l[u+1]==" ")&&(d="initial"),typeof a.glyphs[w]!="undefined"&&(x=a.glyphs[w][d],x==null&&a.glyphs[w].type=="glyph"&&(x=a.glyphs[w]))}else x=a.glyphs[w];return x==null&&(x=a.missingGlyph),x},this.renderChildren=function(a){var l=this.parent.style("font-family").getDefinition();if(l!=null){var u=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),w=this.parent.style("font-style").valueOrDefault(n.Font.Parse(n.ctx.font).fontStyle),x=this.getText();l.isRTL&&(x=x.split("").reverse().join(""));for(var d=n.ToNumberArray(this.parent.attribute("dx").value),m=0;m<x.length;m++){var f=this.getGlyph(l,x,m),c=u/l.fontFace.unitsPerEm;a.translate(this.x,this.y),a.scale(c,-c);var y=a.lineWidth;a.lineWidth=a.lineWidth*l.fontFace.unitsPerEm/u,w=="italic"&&a.transform(1,0,.4,1,0,0),f.render(a),w=="italic"&&a.transform(1,0,-.4,1,0,0),a.lineWidth=y,a.scale(1/c,-1/c),a.translate(-this.x,-this.y),this.x+=u*(f.horizAdvX||l.horizAdvX)/l.fontFace.unitsPerEm,typeof d[m]!="undefined"&&!isNaN(d[m])&&(this.x+=d[m])}return}a.fillStyle!=""&&a.fillText(n.compressSpaces(this.getText()),this.x,this.y),a.strokeStyle!=""&&a.strokeText(n.compressSpaces(this.getText()),this.x,this.y)},this.getText=function(){},this.measureTextRecursive=function(a){for(var l=this.measureText(a),u=0;u<this.children.length;u++)l+=this.children[u].measureTextRecursive(a);return l},this.measureText=function(a){var l=this.parent.style("font-family").getDefinition();if(l!=null){var u=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),w=0,x=this.getText();l.isRTL&&(x=x.split("").reverse().join(""));for(var d=n.ToNumberArray(this.parent.attribute("dx").value),m=0;m<x.length;m++){var f=this.getGlyph(l,x,m);w+=(f.horizAdvX||l.horizAdvX)*u/l.fontFace.unitsPerEm,typeof d[m]!="undefined"&&!isNaN(d[m])&&(w+=d[m])}return w}var c=n.compressSpaces(this.getText());if(!a.measureText)return c.length*10;a.save(),this.setContext(a);var y=a.measureText(c).width;return a.restore(),y}},n.Element.TextElementBase.prototype=new n.Element.RenderedElementBase,n.Element.tspan=function(v){this.captureTextNodes=!0,this.base=n.Element.TextElementBase,this.base(v),this.text=v.nodeValue||v.text||"",this.getText=function(){return this.text}},n.Element.tspan.prototype=new n.Element.TextElementBase,n.Element.tref=function(v){this.base=n.Element.TextElementBase,this.base(v),this.getText=function(){var a=this.getHrefAttribute().getDefinition();if(a!=null)return a.children[0].getText()}},n.Element.tref.prototype=new n.Element.TextElementBase,n.Element.a=function(v){this.base=n.Element.TextElementBase,this.base(v),this.hasText=!0;for(var a=0;a<v.childNodes.length;a++)v.childNodes[a].nodeType!=3&&(this.hasText=!1);this.text=this.hasText?v.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(l){if(this.hasText){this.baseRenderChildren(l);var u=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);n.Mouse.checkBoundingBox(this,new n.BoundingBox(this.x,this.y-u.toPixels("y"),this.x+this.measureText(l),this.y))}else{var w=new n.Element.g;w.children=this.children,w.parent=this,w.render(l)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){n.ctx.canvas.style.cursor="pointer"}},n.Element.a.prototype=new n.Element.TextElementBase,n.Element.image=function(v){this.base=n.Element.RenderedElementBase,this.base(v);var a=this.getHrefAttribute().value,l=a.match(/\.svg$/);if(n.Images.push(this),this.loaded=!1,l)this.img=n.ajax(a),this.loaded=!0;else{this.img=document.createElement("img");var u=this;this.img.onload=function(){u.loaded=!0},this.img.onerror=function(){typeof console!="undefined"&&(console.log('ERROR: image "'+a+'" not found'),u.loaded=!0)},this.img.src=a}this.renderChildren=function(w){var x=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),m=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y");m==0||f==0||(w.save(),l?w.drawSvg(this.img,x,d,m,f):(w.translate(x,d),n.AspectRatio(w,this.attribute("preserveAspectRatio").value,m,this.img.width,f,this.img.height,0,0),w.drawImage(this.img,0,0)),w.restore())},this.getBoundingBox=function(){var w=this.attribute("x").toPixels("x"),x=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),m=this.attribute("height").toPixels("y");return new n.BoundingBox(w,x,w+d,x+m)}},n.Element.image.prototype=new n.Element.RenderedElementBase,n.Element.g=function(v){this.base=n.Element.RenderedElementBase,this.base(v),this.getBoundingBox=function(){for(var a=new n.BoundingBox,l=0;l<this.children.length;l++)a.addBoundingBox(this.children[l].getBoundingBox());return a}},n.Element.g.prototype=new n.Element.RenderedElementBase,n.Element.symbol=function(v){this.base=n.Element.RenderedElementBase,this.base(v),this.baseSetContext=this.setContext,this.setContext=function(a){if(this.baseSetContext(a),this.attribute("viewBox").hasValue()){var l=n.ToNumberArray(this.attribute("viewBox").value),u=l[0],w=l[1];width=l[2],height=l[3],n.AspectRatio(a,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,u,w),n.ViewPort.SetCurrent(l[2],l[3])}}},n.Element.symbol.prototype=new n.Element.RenderedElementBase,n.Element.style=function(v){this.base=n.Element.ElementBase,this.base(v);for(var a="",l=0;l<v.childNodes.length;l++)a+=v.childNodes[l].nodeValue;a=a.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),a=n.compressSpaces(a);for(var u=a.split("}"),l=0;l<u.length;l++)if(n.trim(u[l])!="")for(var w=u[l].split("{"),x=w[0].split(","),d=w[1].split(";"),m=0;m<x.length;m++){var f=n.trim(x[m]);if(f!=""){for(var c={},y=0;y<d.length;y++){var g=d[y].indexOf(":"),k=d[y].substr(0,g),B=d[y].substr(g+1,d[y].length-g);k!=null&&B!=null&&(c[n.trim(k)]=new n.Property(n.trim(k),n.trim(B)))}if(n.Styles[f]=c,f=="@font-face"){for(var A=c["font-family"].value.replace(/"/g,""),M=c.src.value.split(","),E=0;E<M.length;E++)if(M[E].indexOf('format("svg")')>0)for(var F=M[E].indexOf("url"),C=M[E].indexOf(")",F),D=M[E].substr(F+5,C-F-6),U=n.parseXml(n.ajax(D)),V=U.getElementsByTagName("font"),J=0;J<V.length;J++){var j=n.CreateElement(V[J]);n.Definitions[A]=j}}}}},n.Element.style.prototype=new n.Element.ElementBase,n.Element.use=function(v){this.base=n.Element.RenderedElementBase,this.base(v),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var a=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value),a},this.path=function(a){var l=this.getDefinition();l!=null&&l.path(a)},this.getBoundingBox=function(){var a=this.getDefinition();if(a!=null)return a.getBoundingBox()},this.renderChildren=function(a){var l=this.getDefinition();if(l!=null){var u=l.parent;l.parent=null,l.render(a),l.parent=u}}},n.Element.use.prototype=new n.Element.RenderedElementBase,n.Element.mask=function(v){this.base=n.Element.ElementBase,this.base(v),this.apply=function(a,l){var u=this.attribute("x").toPixels("x"),w=this.attribute("y").toPixels("y"),x=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");if(x==0&&d==0){for(var m=new n.BoundingBox,f=0;f<this.children.length;f++)m.addBoundingBox(this.children[f].getBoundingBox());var u=Math.floor(m.x1),w=Math.floor(m.y1),x=Math.floor(m.width()),d=Math.floor(m.height())}var c=l.attribute("mask").value;l.attribute("mask").value="";var y=document.createElement("canvas");y.width=u+x,y.height=w+d;var g=y.getContext("2d");this.renderChildren(g);var k=document.createElement("canvas");k.width=u+x,k.height=w+d;var B=k.getContext("2d");l.render(B),B.globalCompositeOperation="destination-in",B.fillStyle=g.createPattern(y,"no-repeat"),B.fillRect(0,0,u+x,w+d),a.fillStyle=B.createPattern(k,"no-repeat"),a.fillRect(0,0,u+x,w+d),l.attribute("mask").value=c},this.render=function(a){}},n.Element.mask.prototype=new n.Element.ElementBase,n.Element.clipPath=function(v){this.base=n.Element.ElementBase,this.base(v),this.apply=function(a){for(var l=0;l<this.children.length;l++){var u=this.children[l];if(typeof u.path!="undefined"){var w=null;u.attribute("transform").hasValue()&&(w=new n.Transform(u.attribute("transform").value),w.apply(a)),u.path(a),a.clip(),w&&w.unapply(a)}}},this.render=function(a){}},n.Element.clipPath.prototype=new n.Element.ElementBase,n.Element.filter=function(v){this.base=n.Element.ElementBase,this.base(v),this.apply=function(a,l){var u=l.getBoundingBox(),w=Math.floor(u.x1),x=Math.floor(u.y1),d=Math.floor(u.width()),m=Math.floor(u.height()),f=l.style("filter").value;l.style("filter").value="";for(var c=0,y=0,g=0;g<this.children.length;g++){var k=this.children[g].extraFilterDistance||0;c=Math.max(c,k),y=Math.max(y,k)}var B=document.createElement("canvas");B.width=d+2*c,B.height=m+2*y;var A=B.getContext("2d");A.translate(-w+c,-x+y),l.render(A);for(var g=0;g<this.children.length;g++)this.children[g].apply(A,0,0,d+2*c,m+2*y);a.drawImage(B,0,0,d+2*c,m+2*y,w-c,x-y,d+2*c,m+2*y),l.style("filter",!0).value=f},this.render=function(a){}},n.Element.filter.prototype=new n.Element.ElementBase,n.Element.feMorphology=function(v){this.base=n.Element.ElementBase,this.base(v),this.apply=function(a,l,u,w,x){}},n.Element.feMorphology.prototype=new n.Element.ElementBase,n.Element.feColorMatrix=function(v){this.base=n.Element.ElementBase,this.base(v);function a(u,w,x,d,m,f){return u[x*d*4+w*4+f]}function l(u,w,x,d,m,f,c){u[x*d*4+w*4+f]=c}this.apply=function(u,w,x,d,m){for(var f=u.getImageData(0,0,d,m),x=0;x<m;x++)for(var w=0;w<d;w++){var c=a(f.data,w,x,d,m,0),y=a(f.data,w,x,d,m,1),g=a(f.data,w,x,d,m,2),k=(c+y+g)/3;l(f.data,w,x,d,m,0,k),l(f.data,w,x,d,m,1,k),l(f.data,w,x,d,m,2,k)}u.clearRect(0,0,d,m),u.putImageData(f,0,0)}},n.Element.feColorMatrix.prototype=new n.Element.ElementBase,n.Element.feGaussianBlur=function(v){this.base=n.Element.ElementBase,this.base(v),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(a,l,u,w,x){if(typeof stackBlurCanvasRGBA=="undefined"){typeof console!="undefined"&&console.log("ERROR: StackBlur.js must be included for blur to work");return}a.canvas.id=n.UniqueId(),a.canvas.style.display="none",document.body.appendChild(a.canvas),stackBlurCanvasRGBA(a.canvas.id,l,u,w,x,this.blurRadius),document.body.removeChild(a.canvas)}},n.Element.feGaussianBlur.prototype=new n.Element.ElementBase,n.Element.title=function(v){},n.Element.title.prototype=new n.Element.ElementBase,n.Element.desc=function(v){},n.Element.desc.prototype=new n.Element.ElementBase,n.Element.MISSING=function(v){typeof console!="undefined"&&console.log("ERROR: Element '"+v.nodeName+"' not yet implemented.")},n.Element.MISSING.prototype=new n.Element.ElementBase,n.CreateElement=function(v){var a=v.nodeName.replace(/^[^:]+:/,"");a=a.replace(/\-/g,"");var l=null;return typeof n.Element[a]!="undefined"?l=new n.Element[a](v):l=new n.Element.MISSING(v),l.type=v.nodeName,l},n.load=function(v,a){n.loadXml(v,n.ajax(a))},n.loadXml=function(v,a){n.loadXmlDoc(v,n.parseXml(a))},n.loadXmlDoc=function(v,a){n.init(v);var l=function(m){for(var f=v.canvas;f;)m.x-=f.offsetLeft,m.y-=f.offsetTop,f=f.offsetParent;return window.scrollX&&(m.x+=window.scrollX),window.scrollY&&(m.y+=window.scrollY),m};n.opts.ignoreMouse!=!0&&(v.canvas.onclick=function(m){var f=l(new n.Point(m!=null?m.clientX:event.clientX,m!=null?m.clientY:event.clientY));n.Mouse.onclick(f.x,f.y)},v.canvas.onmousemove=function(m){var f=l(new n.Point(m!=null?m.clientX:event.clientX,m!=null?m.clientY:event.clientY));n.Mouse.onmousemove(f.x,f.y)});var u=n.CreateElement(a.documentElement);u.root=!0;var w=!0,x=function(){n.ViewPort.Clear(),v.canvas.parentNode&&n.ViewPort.SetCurrent(v.canvas.parentNode.clientWidth,v.canvas.parentNode.clientHeight),n.opts.ignoreDimensions!=!0&&(u.style("width").hasValue()&&(v.canvas.width=u.style("width").toPixels("x"),v.canvas.style.width=v.canvas.width+"px"),u.style("height").hasValue()&&(v.canvas.height=u.style("height").toPixels("y"),v.canvas.style.height=v.canvas.height+"px"));var m=v.canvas.clientWidth||v.canvas.width,f=v.canvas.clientHeight||v.canvas.height;if(n.opts.ignoreDimensions==!0&&u.style("width").hasValue()&&u.style("height").hasValue()&&(m=u.style("width").toPixels("x"),f=u.style("height").toPixels("y")),n.ViewPort.SetCurrent(m,f),n.opts.offsetX!=null&&(u.attribute("x",!0).value=n.opts.offsetX),n.opts.offsetY!=null&&(u.attribute("y",!0).value=n.opts.offsetY),n.opts.scaleWidth!=null&&n.opts.scaleHeight!=null){var c=1,y=1,g=n.ToNumberArray(u.attribute("viewBox").value);u.attribute("width").hasValue()?c=u.attribute("width").toPixels("x")/n.opts.scaleWidth:isNaN(g[2])||(c=g[2]/n.opts.scaleWidth),u.attribute("height").hasValue()?y=u.attribute("height").toPixels("y")/n.opts.scaleHeight:isNaN(g[3])||(y=g[3]/n.opts.scaleHeight),u.attribute("width",!0).value=n.opts.scaleWidth,u.attribute("height",!0).value=n.opts.scaleHeight,u.attribute("viewBox",!0).value="0 0 "+m*c+" "+f*y,u.attribute("preserveAspectRatio",!0).value="none"}n.opts.ignoreClear!=!0&&v.clearRect(0,0,m,f),u.render(v),w&&(w=!1,typeof n.opts.renderCallback=="function"&&n.opts.renderCallback(a))},d=!0;n.ImagesLoaded()&&(d=!1,x()),n.intervalID=setInterval(function(){var m=!1;if(d&&n.ImagesLoaded()&&(d=!1,m=!0),n.opts.ignoreMouse!=!0&&(m=m|n.Mouse.hasEvents()),n.opts.ignoreAnimation!=!0)for(var f=0;f<n.Animations.length;f++)m=m|n.Animations[f].update(1e3/n.FRAMERATE);typeof n.opts.forceRedraw=="function"&&n.opts.forceRedraw()==!0&&(m=!0),m&&(x(),n.Mouse.runEvents())},1e3/n.FRAMERATE)},n.stop=function(){n.intervalID&&clearInterval(n.intervalID)},n.Mouse=new function(){this.events=[],this.hasEvents=function(){return this.events.length!=0},this.onclick=function(v,a){this.events.push({type:"onclick",x:v,y:a,run:function(l){l.onclick&&l.onclick()}})},this.onmousemove=function(v,a){this.events.push({type:"onmousemove",x:v,y:a,run:function(l){l.onmousemove&&l.onmousemove()}})},this.eventElements=[],this.checkPath=function(v,a){for(var l=0;l<this.events.length;l++){var u=this.events[l];a.isPointInPath&&a.isPointInPath(u.x,u.y)&&(this.eventElements[l]=v)}},this.checkBoundingBox=function(v,a){for(var l=0;l<this.events.length;l++){var u=this.events[l];a.isPointInBox(u.x,u.y)&&(this.eventElements[l]=v)}},this.runEvents=function(){n.ctx.canvas.style.cursor="";for(var v=0;v<this.events.length;v++)for(var a=this.events[v],l=this.eventElements[v];l;)a.run(l),l=l.parent;this.events=[],this.eventElements=[]}},n}})();typeof CanvasRenderingContext2D!="undefined"&&(CanvasRenderingContext2D.prototype.drawSvg=function(e,n,v,a,l){canvg(this.canvas,e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:n,offsetY:v,scaleWidth:a,scaleHeight:l})});angular.module("storage",[]).factory("storage",[function(){"use strict";var e={},n=!1,v=function(){},a={},l=!1,u=[],w="storage",x="storeKey",d=!1,m=function(){if(!l){l=!0;try{a=new IDBStore({dbVersion:1,storeName:w||"storage",keyPath:x,onStoreReady:function(){d=!0;var f;for(f=0;f<u.length;f+=1)u[f]()}})}catch(f){window.supportsIndexedDB=!1}}};return e.save=function(f,c,y,g){if(window.supportsIndexedDB===void 0){setTimeout(function(){e.save(f,c,y,g)},300);return}if(window.supportsIndexedDB){m();var k=function(){a.put({storeKey:f,obj:c},y||v,g||v)};d?k():u.push(k)}else setTimeout(function(){try{localStorage.setItem(f,JSON.stringify(c))}catch(B){n=n||{},n[f]=JSON.stringify(c)}y&&y()},0)},e.load=function(f,c,y){var g;if(window.supportsIndexedDB===void 0){setTimeout(function(){e.load(f,c,y)},300);return}if(window.supportsIndexedDB){if(m(),!f&&isNaN(f)||typeof c!="function")return;var k=function(){a.get(f,function(B){c(B&&B.obj)},y||v)};d?k():u.push(k)}else{if(!f&&isNaN(f)||typeof c!="function")return;setTimeout(function(){if(n)try{g=JSON.parse(n[f])}catch(B){}else try{g=JSON.parse(localStorage.getItem(f))}catch(B){}c(g)},0)}},e.remove=function(f,c,y){if(window.supportsIndexedDB===void 0){setTimeout(function(){e.remove(f,c,y)},300);return}if(window.supportsIndexedDB){m();var g=function(){a.remove(f,c||v,y||v)};d?g():u.push(g)}else n?delete localStorage[f]:delete n[f],c&&c()},e.clear=function(f,c){if(window.supportsIndexedDB===void 0){setTimeout(function(){e.clear(f,c)},300);return}window.supportsIndexedDB?(m(),a.clear(f,c||v)):setTimeout(function(){n?n={}:localStorage.clear(),f&&f()},0)},e}]);(function(){"use strict";var e={};angular.module("tmpl",[]).factory("template",["$http","$q",function(n,v){var a=function(l,u,w){var x=[],d,m,f,c,y,g=u.length,k=w.length,B={},A,M,E;for(A=new Array(g+1).join(" "),d=new Array(k+1).join(" ");l.length;){m=l.indexOf(u),E=m+g,M=l.slice(E),f=0;do f=M.indexOf(w),c=M.indexOf(u),c!==-1&&(M=M.slice(0,c)+A+M.slice(c+g)),M=M.slice(0,f)+d+M.slice(f+k);while(c!==-1&&c<f);if(f+=E,f>m&&m!==-1)E=l.slice(0,m),E&&x.push(E),E=l.slice(m+g,f),E&&(x.push(""),B[E]||(B[E]=[]),B[E].push(x.length-1)),l=l.slice(f+k);else{x.push(l);break}}for(y in B)E=y.indexOf(u),B.hasOwnProperty(y)&&E!==-1&&(m=y.search(/\s/),m!==-1&&(E=Math.min(E,m)),E=y.slice(0,E),B[E]={str:y.slice(E.length).replace(/^\n/,""),opening:u,closing:w,idxArray:B[y]},delete B[y]);return{stringArray:x,map:B}};return function l(u){var w="}}",x="{{",d,m="tmpl/",f={};return f.config=function(c){return typeof c.opening=="string"&&c.opening.length>0&&(x=c.opening),typeof c.closing=="string"&&c.closing.length>0&&(w=c.closing),typeof c.tmplDir=="string"&&(m=c.tmplDir),this},f.set=function(c){return d=a(c,x,w),this},f.get=function(c){var y=v.defer(),g=c.replace(/\.tmpl$/,"");return e.hasOwnProperty(g)?y.resolve(e[g]):n.get(m+g+".tmpl",{transformResponse:!1}).then(function(k){e[g]=f.set(k.data),y.resolve(e[g])}),y.promise},f.fillup=function(c){var y,g,k,B,A,M,E=d.map,F,C=d.stringArray;for(B in c)if(E.hasOwnProperty(B)){if(E[B].fillup||E[B].str){if(E[B].str&&(y=E[B].idxArray,E[B]=l(E[B].str,E[B].opening,E[B].closing),E[B].idxArray=y),M=c[B].length,F="",c[B]){for(k=0;k<M;k+=1)F+=E[B].fillup(c[B][k]);M||(F=E[B].fillup(c[B]))}y=E[B].idxArray}else F=c[B],y=E[B];for(g=0,A=y.length;g<A;g+=1)C[y[g]]=F}return C.join("")},u&&f.set(u),f}}])})();(function(){"use strict";angular.module("color",[]).factory("color",[function(){var e={x:.9505,y:1,z:1.089};function n(d){var m=1-d.k;return{r:Math.round(255*(1-d.c)*m),g:Math.round(255*(1-d.m)*m),b:Math.round(255*(1-d.y)*m)}}function v(d){var m,f=d.h,c=d.s/100,y=d.l/100,g,k,B,A,M,E;return m=(1-Math.abs(2*y-1))*c,f=f%360,A=f/60,E=m*(1-Math.abs(A%2-1)),A>=0&&A<1?(g=m,k=E,B=0):A>=1&&A<2?(g=E,k=m,B=0):A>=2&&A<3?(g=0,k=m,B=E):A>=3&&A<4?(g=0,k=E,B=m):A>=4&&A<5?(g=E,k=0,B=m):A>=5&&A<6&&(g=m,k=0,B=E),M=y-m/2,{r:Math.round((g+M)*255),g:Math.round((k+M)*255),b:Math.round((B+M)*255)}}function a(d){var m=d.r/255,f=d.g/255,c=d.b/255,y={},g=Math.max(m,f,c),k=Math.min(m,f,c),B=g-k,A;return B===0?A=0:g===m?A=(f-c)/B%6:g===f?A=(c-m)/B+2:g===c&&(A=(m-f)/B+4),y.h=60*A,y.h<0&&(y.h+=360),y.l=(g+k)/2,y.l===0||y.l===1?y.s=0:y.s=B/(1-Math.abs(2*y.l-1)),y.h=Math.round(y.h),y.s=Math.round(y.s*100),y.l=Math.round(y.l*100),y}function l(d){var m,f=[],c=d.r/255,y=d.g/255,g=d.b/255,k=[c,y,g];for(m=0;m<3;m+=1)k[m]<=.04045?f[m]=k[m]/12.92:f[m]=Math.pow((k[m]+.055)/1.055,2.4);return{x:.4124*f[0]+.3576*f[1]+.1805*f[2],y:.2126*f[0]+.7152*f[1]+.0722*f[2],z:.0193*f[0]+.1192*f[1]+.9505*f[2]}}function u(d){var m,f,c;function y(g){var k=.20689655172413793;return g>k*k*k?Math.pow(g,1/3):1/3*(29/6)*(29/6)*g+4/29}return d=l(d),m=y(d.x/e.x),f=y(d.y/e.y),c=y(d.z/e.z),{l:116*f-16,a:500*(m-f),b:200*(f-c)}}function w(d){var m=d.r+", "+d.g+", "+d.b;return d.a!==1?m="rgba("+m+", "+d.a:m="rgb("+m,m+=")",m}function x(d){var m,f,c,y,g,k;if(Array.isArray(d)&&d.length>=3)return g=Number(d[0])||0,y=Number(d[1])||0,c=Number(d[2])||0,m=Number(d[3])||1,{r:g,g:y,b:c,a:m};if(d&&d.r!==void 0&&d.g!==void 0&&d.b!==void 0){var B=!1;return d.r<=1&&d.g<=1&&d.b<=1&&(B=!0),(d.r%1!==0&&d.r<1||B)&&(d.r=Math.round(d.r*255)),(d.g%1!==0&&d.g<1||B)&&(d.g=Math.round(d.g*255)),(d.b%1!==0&&d.b<1||B)&&(d.b=Math.round(d.b*255)),{r:Number(d.r),g:Number(d.g),b:Number(d.b),a:Number(d.a)||1}}if(d&&d.c!==void 0&&d.m!==void 0&&d.y!==void 0&&d.k!==void 0)return k=n(d),k.a=d.a||1,k;if(d&&d.h!==void 0&&d.s!==void 0&&d.l!==void 0)return d.h=Number(d.h),d.s=Number(d.s),d.l=Number(d.l),k=v(d),k.a=Number(d.a)||1,k;if(typeof d=="number"){for(d=Math.round(d).toString(16);d.length<6;)d="0"+d;d="#"+d}if(typeof d=="string"){if(d=d.replace(/\s+/g,""),f=d.match(/#([\da-f])([\da-f])([\da-f])$/i),f)return g=parseInt(f[1]+f[1],16),y=parseInt(f[2]+f[2],16),c=parseInt(f[3]+f[3],16),{r:g,g:y,b:c,a:1};if(f=d.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i),f)return g=parseInt(f[1],16),y=parseInt(f[2],16),c=parseInt(f[3],16),{r:g,g:y,b:c,a:1};if(f=d.match(/rgb\((\d+),(\d+),(\d+)\)/i),f)return g=parseInt(f[1],10),y=parseInt(f[2],10),c=parseInt(f[3],10),{r:g,g:y,b:c,a:1};if(f=d.match(/rgba\((\d+),(\d+),(\d+),(.*)\)/i),f)return g=parseInt(f[1],10),y=parseInt(f[2],10),c=parseInt(f[3],10),m=Number(f[4]),isNaN(m)&&(m=1),{r:g,g:y,b:c,a:m}}return{r:0,g:0,b:0,a:1}}return function(m){var f=x(m);return f.toString=function(c){var y=["",""],g;if(c&&c.hex&&(isNaN(f.a)||f.a===1||c.argb)){for(g=f.toNumber().toString(16);g.length<6;)g="0"+g;return c.argb&&(y=Math.round(f.a*255).toString(16)),y[0]===y[1]&&g[0]===g[1]&&g[2]===g[3]&&g[4]===g[5]?g=y[0]+g[0]+g[2]+g[4]:g=y[0]+y[1]+g,c.forCSS&&(g="#"+g),g}else return w(f)},f.toArray=function(){return[f.r,f.g,f.b,f.a]},f.toHSL=function(){return a(f)},f.toLAB=function(){return u(f)},f.toNumber=function(){return f.r*256*256+f.g*256+f.b},f.equals=function(c){return f.r===c.r&&f.g===c.g&&f.b===c.b},f.distance=function(c,y){var g,k;return g=u(f),typeof f.a=="number"&&f.a<1&&f.a>0&&(g.l*=f.a,g.a*=f.a,g.b*=f.a),k=u(c),typeof c.a=="number"&&c.a<1&&c.a>0&&(k.l*=c.a,k.a*=c.a,k.b*=c.a),y=y||{},isNaN(y.l)&&(y.l=1),isNaN(y.a)&&(y.a=1),isNaN(y.b)&&(y.b=1),Math.sqrt(y.l*Math.pow(g.l-k.l,2)+y.a*Math.pow(g.a-k.a,2)+y.b*Math.pow(g.b-k.b,2)+Math.pow(((f.a||1)-(c.a||1))*100,2))},f}}])})();(function(){"use strict";angular.module("swatch",["color","svg","tmpl"]).factory("swatch",["color","svgPath","template",function(e,n,v){var a=v(['<?xml version="1.0" encoding="utf-8"?>',"<!-- A Color Theme Generated by IcoMoon.io -->",'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">','<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{{width}}" height="{{height}}" viewBox="0 0 {{width}} {{height}}">',"{{rects",'<rect x="{{x}}" y="{{y}}" fill="{{fill}}" width="64" height="64"></rect>',"}}</svg>",""].join("\n"));function l(f){var c=[];return Array.isArray(f.colors)&&f.colors.forEach(function(y){var g=Number(y.red),k=Number(y.green),B=Number(y.blue),A=Number(y.alpha);g=isNaN(g)?Number(y.r):g,k=isNaN(k)?Number(y.g):k,B=isNaN(B)?Number(y.b):B,A=isNaN(A)?Number(y.a):A,c.push(e({r:g||0,g:k||0,b:B||0,a:A||1}))}),c}function u(f){var c,y=n(f),g=[],k=[];return c=y.getAttrs(),c.forEach(function(B){var A,M;B.fill&&(A=e(B.fill),M=A.toNumber(),k.indexOf(M)===-1&&(k.push(M),g.push(A)))}),g}function w(f){var c=new DataView(f),y=[],g,k,B,A,M,E,F,C,D,U,V,J,j;if(c.getUint32(0)!==1095976262||c.getUint32(4)!==65536)return y;for(U=c.getUint32(8),V=12,E=0;E<U&&V+6<f.byteLength;E+=1)try{if(g=c.getUint16(V),k=c.getUint32(V+2),J=c.getUint16(V+6),g===49153)M=[],y.push(M);else if(g===1){for(M||(M=[],y.push(M)),D=V+8+J*2,B=String.fromCharCode.apply(null,new Uint8Array(f,D,4)),D+=4,A=[c.getFloat32(D)],D+=4,/^(RGB|LAB)/.test(B)?C=2:C=3,F=0;F<C;F+=1)A.push(c.getFloat32(D)),D+=4;B=B.slice(0,C+1),B==="CMYK"?M.push({c:A[0],m:A[1],y:A[2],k:A[3]}):B==="RGB"?M.push({r:Math.round(A[0]*255),g:Math.round(A[1]*255),b:Math.round(A[2]*255)}):B==="LAB"?M.push({l:A[0],a:A[1],b:A[2]}):B==="Gray"&&(j=Math.round(A[0]*255),M.push({r:j,g:j,b:j}))}else g===49154&&(M=!1);V+=k+6}catch(G){break}return y}function x(f){var c=[],y,g,k=[],B,A;f&&f.colors&&(c=f.colors);function M(E){for(var F=E.toString(16);F.length<6;)F="0"+F;return F}for(c.length<6?(B=c.length,A=1):(B=Math.ceil(Math.sqrt(c.length)),A=Math.ceil(c.length/B)),y=0;y<A;y+=1)for(g=0;g<B&&y*B+g<c.length;g+=1)k.push({y:y*64,x:g*64,fill:"#"+M(e(c[y*B+g]).toNumber())});return a.fillup({width:B*64,height:A*64,rects:k})}function d(f,c,y){var g,k,B,A,M=f.length;for(c===1?B="setUint8":(B="setUint16",c=2),g=new ArrayBuffer(M*c),k=new DataView(g),A=0;A<M;A+=1)k[B](A*c,f.charCodeAt(A),y);return g}function m(f){var c,y,g,k,B,A,M=f.colors.length+2,E=0;for(A=20+(2+f.name.length*2)+28*f.colors.length+6,c=new ArrayBuffer(A),y=new Uint8Array(c),k=new DataView(c),k.setUint32(E,1095976262),E+=4,k.setUint32(E,65536),E+=4,k.setUint32(E,M),E+=4,k.setUint16(E,49153),E+=2,k.setUint32(E,4+f.name.length*2),E+=4,k.setUint16(E,f.name.length+1),E+=2,y.set(new Uint8Array(d(f.name,2)),E),E+=2*f.name.length+2,B=0;B<f.colors.length;B+=1)k.setUint16(E,1),E+=2,k.setUint32(E,22),E+=4,k.setUint16(E,1),E+=2,k.setUint16(E,0),E+=2,k.setUint32(E,1380401696),E+=4,g=e(f.colors[B]),k.setFloat32(E,g.r/255),E+=4,k.setFloat32(E,g.g/255),E+=4,k.setFloat32(E,g.b/255),E+=4,k.setUint16(E,2),E+=2;return k.setUint16(E,49154),c}return function(c){var y={};return y.getASE=function(g){return y.colors?m({colors:y.colors,name:g&&g.name||""}):!1},y.getSVG=function(){return y.colors?x({colors:y.colors}):!1},y.setColors=function(g){Array.isArray(g)?y.colors=g:g.ase?y.colors=w(g.ase)[0]:g.svg?y.colors=u(g.svg):g.json&&(y.colors=l(g.json))},y.setColors(c),y}}])})();(function(){"use strict";angular.module("csh",["svg"]).factory("csh",[function(){var e=0;function n(w,x){var d,m=w.length,f=0,c=0,y,g=0;for(d=0;d<m;d+=1)f+=w[d].byteLength;if(!isNaN(x)&&x>0)for(;c<f;)c+=x;for(y=new Uint8Array(c||f),d=0;d<m;d+=1)y.set(new Uint8Array(w[d]),g),g+=w[d].byteLength;return y.buffer}function v(w,x,d){var m,f,c,y,g=w.length;for(x===1?c="setUint8":(c="setUint16",x=2),m=new ArrayBuffer(g*x),f=new DataView(m),y=0;y<g;y+=1)f[c](y*x,w.charCodeAt(y),d);return m}function a(w){var x=new Date,d=0,m;return x=x.getTime()+e,e+=1,x=x.toString(16),m=x+w.hashCode()+w,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var c=m[d];return d+=1,f==="y"&&(c=c.charCodeAt(0)%16,c=c&3|8,c=c.toString(16)),c})}function l(w){var x=[],d=[],m,f,c,y,g,k,B,A,M,E,F;function C(D,U){var V,J,j,G=w.viewBox.width,re=w.viewBox.height;D.setUint16(0,2),U[1]=U[1]||U[0],U[2]=U[2]||U[1]||U[0],V=U[0],J=U[1],j=U[2],D.setInt32(2,V.y/re*16777216),D.setInt32(6,V.x/G*16777216),D.setInt32(10,J.y/re*16777216),D.setInt32(14,J.x/G*16777216),D.setInt32(18,j.y/re*16777216),D.setInt32(22,j.x/G*16777216)}return w.name=w.name||"",A=new ArrayBuffer(4),f=new DataView(A),f.setUint32(0,w.name.length+1),A=n([A,v(w.name),new ArrayBuffer(2)]),x.push(A),A.byteLength%4!==0&&x.push(new ArrayBuffer(2)),E=new ArrayBuffer(4),f=new DataView(E),f.setUint32(0,1),x.push(E),B=new ArrayBuffer(4),x.push(B),k=w.getPSPaths(),F=a(JSON.stringify(k).match(/\d/g).join("")),d.push(new Uint8Array([F.length]).buffer),d.push(v(F,1)),m=new ArrayBuffer(16),f=new DataView(m),f.setInt32(8,w.viewBox.height),f.setInt32(12,w.viewBox.width),d.push(m),g=new ArrayBuffer(26),f=new DataView(g),f.setUint16(0,6),d.push(g),g=new ArrayBuffer(26),f=new DataView(g),f.setUint16(0,8),d.push(g),k.forEach(function(D){c=new ArrayBuffer(26),f=new DataView(c),f.setUint16(2,D.length),d.push(c),D.forEach(function(U){g=new ArrayBuffer(26),f=new DataView(g),C(f,U),d.push(g)})}),M=n(d),f=new DataView(B),y=4-M.byteLength%4,f.setUint32(0,M.byteLength+y),x.push(M),x.push(new ArrayBuffer(y)),n(x)}function u(w){var x=[],d,m;return x.push(v("cush",1)),m=new ArrayBuffer(8),d=new DataView(m),d.setUint32(0,2),d.setUint32(4,w.length),x.push(m),w.forEach(function(f){x.push(l(f))}),x.push(v("\nGenerated by IcoMoon.io",1)),n(x)}return function(w){var x=Object.create(null);return x.generateCSH=function(){return u(w)},x}}])})();var He="foreignobject, form, input, video, audio, script, iframe, #icomoon-ignore",ze=/data:image\/svg\+xml/i;function Re(e){return Array.prototype.slice.call(e)}function Ge(e,n){var v=e(n);return v&&Re(n.children).map(function(a){return Ge(e,a)}),n}function Ve(e){try{e.parentNode.removeChild(e)}catch(n){}}function Xe(e,n){try{Re(n.querySelectorAll(e)).forEach(function(v){Ve(v)})}catch(v){}}function je(e,n){Xe(He,e),Ge(function(v){var a=v.tagName,l;return a?(a=a.toLowerCase(),a.indexOf(":")>-1||a==="img"&&(l=v.getAttribute("src"),!ze.test(l))?(Ve(v),!1):(a==="style"&&v.innerText&&(v.innerText=v.innerText.replace(/url\(([^)]*)\)/g,function(u,w){return ze.test(w)?u:"url(data:image/svg+xml;)"})),Re(v.attributes).forEach(function(u){var w,x,d,m;try{d=u.value.trim(),w=u.name.slice(0,2).toLowerCase()==="on",x=d.toLowerCase().indexOf("javascript:")>-1,(w||x)&&v.removeAttribute(u.name),m=n&&(u.name==="class"||u.name==="id"),m&&(d=d.split(/\s+/).map(function(f){return namespace+f}).join(" "),v.setAttribute(u.name,d))}catch(f){}}),!0)):v.children?!0:(Ve(v),!1)},e)}angular.element.prototype.is||(angular.element.prototype.is=function(e){var n,v,a=e.split(/[,\s]+/);try{v=this[0].tagName.toUpperCase()}catch(l){return!1}for(n=0;n<a.length;n+=1)if(a[n].toUpperCase()===this[0].tagName.toUpperCase())return!0;return!1});angular.element2||(angular.element2=function(e){typeof e=="string"&&(e=e.trim()),e=angular.element(e);var n;for(n=0;n<e.length;n+=1)if(e[n].nodeType===1)return angular.element(e[n]);return e});angular.module("svg",["tmpl","color"]).factory("svgPath",["template","color",function(e,n){var v=1e3,a=angular.element2,l=function(t){return Object.prototype.toString.call(t)==="[object Array]"};function u(t,r,s){return{x:t.x+(r.x-t.x)*s,y:t.y+(r.y-t.y)*s}}function w(t,r){var s=function(o,h,p){var b=o[0][h],P=o[1][h],O=o[2][h],S=1-p;return S*S*b+2*S*p*P+p*p*O};return{x:s(t,"x",r),y:s(t,"y",r)}}function x(t,r){var s=function(o,h,p){var b=o[0][h],P=o[1][h],O=o[2][h],S=o[3][h],I=1-p;return I*I*I*b+3*I*I*p*P+3*p*p*I*O+p*p*p*S};return{x:s(t,"x",r),y:s(t,"y",r)}}function d(t,r){return{x:2*r.x-t.x,y:2*r.y-t.y}}function m(t,r){var s,o,h,p,b,P,O,S,I;if(!(!r||!t))if(s=isNaN(r.a)?1:r.a,o=isNaN(r.b)?0:r.b,h=isNaN(r.c)?0:r.c,p=isNaN(r.d)?1:r.d,b=isNaN(r.e)?0:r.e,P=isNaN(r.f)?0:r.f,S=t.length,S){if(t[0]&&!isNaN(t[0].x)&&!isNaN(t[0].y)){for(I=[],O=0;O<S;O+=1)I[O]={},I[O].x=s*t[O].x+h*t[O].y+b,I[O].y=o*t[O].x+p*t[O].y+P;return I}else if(typeof t[0]=="number"&&S%2===0)for(O=0;O<S;O+=2)I={x:t[O],y:t[O+1]},t[O]=s*I.x+h*I.y+b,t[O+1]=o*I.x+p*I.y+P}else return{x:s*t.x+h*t.y+b,y:o*t.x+p*t.y+P}}function f(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function c(t,r){return f({x:r.x-t.x,y:r.y-t.y})}function y(t,r,s){var o,h=t.x*r.y-t.y*r.x<0?1:-1;return s>=1?s=Math.round(s)*10:s=1e4,o=(t.x*r.x+t.y*r.y)/(f(t)*f(r)),o>1?o=1:o<-1&&(o=-1),Math.round(s*h*Math.acos(o)*180/Math.PI)/s}var g=function(t,r,s,o){var h={},p=function(b,P){var O,S,I,X,z,H,Z=h.points[0],Q=h.points[1],R=h.points[2],L=h.points[3];return O=u(Z,Q,b),S=u(Q,R,b),I=u(R,L,b),X=u(O,S,b),z=u(S,I,b),H=u(X,z,b),P&&P.point?H:[g(Z,O,X,H),g(H,z,I,L)]};return t.length?h.points=t.slice(0):(h.points=[],h.points[0]=t,h.points[1]=r,h.points[2]=s,h.points[3]=o),h.getPointAt=function(b){return p(b,{point:!0})},h.splitAt=p,h};function k(t,r){return(isNaN(r)||r<0)&&(r=3),t.toFixed(r).replace(/\.0+$/,"").replace(/(\.[^0]+)0+$/,"$1")}function B(t){return t=t.toLowerCase(),/[vh]/.test(t)?1:/[mlt]/.test(t)?2:/[sq]/.test(t)?4:/[c]/.test(t)?6:/[a]/.test(t)?7:0}function A(t){var r,s,o,h,p=[],b,P,O;if(!t)return p;for(t=t.replace(/,/g," ").replace(/-/g," -").replace(/-\s+/g,"-").replace(/e\s*/ig,"e").replace(/\.(\d+)\./g,".$1 .").replace(/\.(\d+)\./g,".$1 .").replace(/\s+/g," "),p=t.replace(/([mzlhvcsqta])\s?/ig,"|$1").split("|"),p.splice(0,1),b=p.length,o=0;o<b;o+=1){if(O=p[o],s=O[0],r=O.substr(1).trim(),r)for(r=r.split(/\s/),(s=="a"||s=="A")&&(r=M(r)),P=r.length,h=0;h<P;h+=1)r[h]=Number(r[h]);else r=[];p[o]={cmd:s,args:r}}return p}function M(t){try{for(var r=[],s;t.length>0;)t[3].length>1?t=t.slice(0,3).concat(t[3].replace(/^([01])([01]?)(.+)/,"$1 $2 $3").split(/\s+/)).concat(t.slice(4)):t[4].length>1&&(t=t.slice(0,4).concat(t[4].replace(/^([01])(.+)/,"$1 $2").split(/\s+/)).concat(t.slice(5))),r=r.concat(t.slice(0,7)),t=t.slice(7);return r}catch(o){return t}}function E(t){var r=[],s=0,o=t.length;for(s;s<o;s+=1)r.push(t[s].x),r.push(t[s].y);return r}function F(t){var r=[],s,o;if(typeof t=="string"){for(r=t.trim().split(/[\s,]+/),o=r.length,s=0;s<o;s+=1)r[s]=Number(r[s]);return r}else return t}function C(t){var r=[],s;return t=F(t),s=t.length,s=s-s%2,s>1&&(r.push({cmd:"M",args:[t[0],t[1]]}),r.push({cmd:"L",args:t.slice(2)})),r}function D(t){var r=C(t);return r.push({cmd:"Z"}),r}function U(t,r,s,o,h,p){var b=[],P,O,S=[],I,X,z,H,Z,Q,R;function L(_){S.push({cmd:"L",args:_})}function q(_){var ie=[{x:H,y:Q},{x:z,y:Q},{x:z,y:Z},{x:H,y:Z}];b[_]&&(b[_].points=m(b[_].points,{e:ie[_].x,f:ie[_].y}),S.push({cmd:"C",args:E(b[_].points.slice(1))}))}if(t=Number(t),r=Number(r),h=Math.abs(Number(h)),p=Math.abs(Number(p)),s=Math.abs(Number(s)),o=Math.abs(Number(o)),!(s===0||o===0))return!p&&h?p=h:!h&&p?h=p:!h&&!p&&(h=p=0),R=s/2,h/2>R&&(h=R),R=o/2,p/2>R&&(p=R),I=s-2*h,X=o-2*p,h&&(P=t+s/2,O=r+o/2,b=re({cx:0,cy:0,rx:h,ry:p})),z=t+h,H=z+I,Z=r+p,Q=Z+X,S.push({cmd:"M",args:[z,r]}),I&&L([H,r]),q(3),X&&L([H+h,Q]),q(0),I&&L([z,Q+p]),q(1),X&&L([z-h,Z]),q(2),S.push({cmd:"Z"}),S}function V(t,r,s,o){var h,p,b=[],P;if(t=Number(t),r=Number(r),s=Number(s),o=Number(o),!(s===0&&o===0)){for(h=re({cx:t,cy:r,rx:s,ry:o}),b.push({cmd:"M",args:[t+s,r]}),P=h.length,p=0;p<P;p+=1)b.push({cmd:"C",args:E(h[p].points.slice(1))});return b.push({cmd:"Z"}),b}}function J(t){var r=!1,s,o=t.tagName.toUpperCase(),h;return t.getAttribute||(r=!0,t.getAttribute=function(p){return t[p]}),o==="PATH"?(s=A(t.getAttribute("d")),(t.style["fill-rule"]||t.getAttribute("fill-rule"))==="evenodd"&&(s.evenOdd=!0)):o==="POLYGON"?s=D(t.getAttribute("points")):o==="POLYLINE"?s=C(t.getAttribute("points")):o==="LINE"?s=C(t.getAttribute("x1")+","+t.getAttribute("y1")+","+t.getAttribute("x2")+","+t.getAttribute("y2")):o==="RECT"?s=U(t.getAttribute("x"),t.getAttribute("y"),t.getAttribute("width"),t.getAttribute("height"),t.getAttribute("rx"),t.getAttribute("ry")):o==="ELLIPSE"?s=V(t.getAttribute("cx"),t.getAttribute("cy"),t.getAttribute("rx"),t.getAttribute("ry")):o==="CIRCLE"&&(h=t.getAttribute("r"),s=V(t.getAttribute("cx"),t.getAttribute("cy"),h,h)),r&&delete t.getAttribute,s}function j(t,r){var s;return/em$/.test(t)?s=Number(t.slice(0,-2))/(r.fontSize||16):/rem$/.test(t)?s=Number(t.slice(0,-3))/(r.fontSize||16):/%$/.test(t)?r&&typeof r.width=="number"&&typeof r.height=="number"?s=Number(t.slice(0,-1))*(Math.sqrt(Math.pow(r.width,2)+Math.pow(r.height,2))/Math.sqrt(2))/100:s=Number(t.slice(0,-1)):/px$/.test(t)?s=Number(t.slice(0,-2)):/pt$/.test(t)?s=Number(t.slice(0,-2))*4/3:/cm$/.test(t)?s=Number(t.slice(0,-2))*96/2.54:/mm$/.test(t)?s=Number(t.slice(0,-2))*96/2.54/100:/in/.test(t)?s=Number(t.slice(0,-2))*96:/pc/.test(t)?s=Number(t.slice(0,-2))*16:/q/.test(t)?s=Number(t.slice(0,-2))*96/2.54/40:s=Number(t),s||0}function G(t){var r,s,o,h,p,b=[],P,O,S=!0;for(typeof t=="string"?p=A(t):(p=J(t),S=t.style.stroke,S=S&&S!=="none"&&j(t.style.strokeWidth)!==0),O=p?p.length:0,h=0;h<O;h+=1)if(s=p[h].args,o=p[h].cmd,!(/m/.test(o)&&s.length===2&&p[h+1]&&/m/.test(p[h+1])))if(r=B(o),s=s||[],s.length>r){P=0;do b.push({cmd:o,args:s.slice(P,P+r)}),P+=r,o==="m"?o="l":o==="M"&&(o="L");while(P<s.length)}else b.push({cmd:o,args:s});return he(b,{evenOdd:p&&p.evenOdd,hasStroke:S})}function re(t){var r=t.cx,s=t.cy,o=t.rx,h=t.ry,p=t.angleDiff&&t.angleDiff>0,b=t.startAngle?t.startAngle%360:0,P=t.angleDiff?(t.angleDiff+b)%360:360,O,S,I=4*(Math.sqrt(2)-1)/3,X=I*o,z=I*h,H,Z,Q,R,L=[],q=[],_,ie,te,ye,Ce={x:r,y:s-h},pe={x:r+o,y:s},ve={x:r,y:s+h},se={x:r-o,y:s};b<0&&(b+=360),P<0&&(P+=360);function me(Se,ne){var ge=(ne-Se*90)/90;return p?ge:1-ge}if(H=Ce.x-X,Z=Ce.x+X,Q=se.y-z,R=se.y+z,L.push([{x:Ce.x,y:Ce.y},{x:Z,y:Ce.y},{x:pe.x,y:Q},{x:pe.x,y:pe.y}]),L.push([{x:se.x,y:se.y},{x:se.x,y:Q},{x:H,y:Ce.y},{x:Ce.x,y:Ce.y}]),L.push([{x:ve.x,y:ve.y},{x:H,y:ve.y},{x:se.x,y:R},{x:se.x,y:se.y}]),L.push([{x:pe.x,y:pe.y},{x:pe.x,y:R},{x:Z,y:ve.y},{x:ve.x,y:ve.y}]),p){for(O=Math.floor(b/90),O>3&&(O=0),S=Math.ceil(P/90)-1,S<0&&(S=3),ye=L.length,te=0;te<ye;te+=1)L[te].reverse();for(te=O,O===S&&Math.abs(t.angleDiff)>90&&(q.push(L[te]),te+=1,te>3&&(te=0));te!==S;)q.push(L[te]),te+=1,te>3&&(te=0);q.push(L[te])}else{for(O=Math.ceil(b/90)-1,O<0&&(O=3),S=Math.floor(P/90),S>3&&(S=0),te=O,O===S&&Math.abs(t.angleDiff)>90&&(q.push(L[te]),te-=1,te<0&&(te=3));te!==S;)q.push(L[te]),te-=1,te<0&&(te=3);q.push(L[te])}for(ie=1,P%90!==0&&(te=q.length-1,_=g(q[te]),ie=me(S,P),q[te]=_.splitAt(ie)[0].points),b%90!==0&&(_=g(q[0]),te===0?ie=me(O,b)/ie:ie=me(O,b),q[0]=_.splitAt(ie)[1].points),ye=q.length,te=0;te<ye;te+=1)q[te]=g(q[te]);return q}function le(t,r){var s,o=t.x,h=t.y,p=r[5],b=r[6],P=r[3],O=r[4],S=Math.abs(r[0]),I=Math.abs(r[1]),X=S*S,z=I*I,H,Z=r[2]%360*Math.PI/180,Q={},R=Math.cos(Z),L=Math.sin(Z),q,_,ie,te,ye,Ce,pe,ve,se,me,Se;function ne(ge){return m(ge,{a:R,b:L,c:-L,d:R})}if(!(o===p&&h===b)){if(!S||!I)return Q.cmd="L",Q.args=[p,b],Q;for(P=P?1:0,O=O?1:0,q=m({x:(o-p)/2,y:(h-b)/2},{a:R,b:-L,c:L,d:R}),te=q.x*q.x,ye=q.y*q.y,H=te/X+ye/z,H>1&&(H=Math.sqrt(H),S*=H,I*=H,X=S*S,z=I*I),ie=(P===O?-1:1)*Math.sqrt(Math.abs((X*z-X*ye-z*te)/(X*ye+z*te))),ie={x:ie*(S*q.y/I),y:ie*(-I*q.x/S)},_=ne(ie),_.x+=(o+p)/2,_.y+=(h+b)/2,H={x:(q.x-ie.x)/S,y:(q.y-ie.y)/I},Ce=y({x:1,y:0},H),pe=y(H,{x:-(q.x+ie.x)/S,y:-(q.y+ie.y)/I})%360,O===1&&pe>0?pe-=360:O===0&&pe<0&&(pe+=360),s=re({cx:_.x,cy:_.y,rx:S,ry:I,startAngle:Ce,angleDiff:pe}),r=[],me=s.length,ve=0;ve<me;ve+=1)for(H=s[ve],Se=H.points.length,r[ve]=[],se=0;se<Se;se+=1)Z&&(H.points[se]=m(H.points[se],{e:-_.x,f:-_.y}),H.points[se]=ne(H.points[se]),H.points[se]=m(H.points[se],{e:_.x,f:_.y})),se>0&&(r[ve].push(H.points[se].x),r[ve].push(H.points[se].y));return r}}function he(t,r){var s,o,h,p={x:0,y:0},b,P,O,S,I,X,z=[],H=0,Z;function Q(R,L){var q=[],_,ie,te,ye,Ce,pe,ve,se=NaN,me;if(L=L||.001,Ce=R.length,Ce<2)return!1;for(te=0;te<Ce;te+=1)ye=R[te],_=ye.cmd,_==="Z"?(pe=!1,ve=!1):_==="M"?(pe={x:ye.args[0],y:ye.args[1]},ve=!1):_==="C"?(pe={x:ye.args[4],y:ye.args[5]},ve=!1):_==="S"||_==="Q"?(pe={x:ye.args[2],y:ye.args[3]},ve=!1):_==="T"?(pe={x:ye.args[0],y:ye.args[1]},ve=!1):_==="L"&&(ie={x:ye.args[0],y:ye.args[1]},pe?(me=(ie.y-pe.y)/(ie.x-pe.x),!isNaN(se)&&(me===se||Math.abs(me-se)<L||c(pe,ie)<L)?q.pop():ve?(pe=ve,se=(ie.y-ve.y)/(ie.x-ve.x)):isNaN(me)||(se=me)):pe=ie,ve=ie),_!=="L"&&(se=NaN),q.push(ye);return q[0].cmd="M",q}for(I=t.length,P=0;P<I;P+=1){if(h=t[P].cmd,O=/[a-z]/.test(h),h=h.toUpperCase(),s=t[P].args,o=!1,h==="Z")p=b,b=!1;else if(!b&&h!=="M"&&(b=p),h==="A")O&&(s[5]+=p.x,s[6]+=p.y),Z={x:s[5],y:s[6]},s=le(p,s),p=Z,h="C",o=[Z.x,Z.y];else if(h==="H")O&&(s[0]+=p.x),p={x:s[0],y:p.y},s[1]=p.y,h="L";else if(h==="V")O&&(s[0]+=p.y),p={x:p.x,y:s[0]},s[0]=p.x,s[1]=p.y,h="L";else{if(h==="M")try{Z=t[P+1].cmd.toUpperCase(),Z==="Z"?(O?(p.x+=s[0],p.y+=s[1]):(p.x=s[0],p.y=s[1]),s=!1,P+=1):H+=1}catch(R){}for(X=s.length,S=0;S<X;S+=2)O&&(s[S]+=p.x,s[S+1]+=p.y),(S+2)%X===0&&(p={x:s[S],y:s[S+1]})}if(h==="M"&&b&&t[P-1].cmd.toUpperCase()!=="Z"&&!r.hasStroke&&z.push({cmd:"Z",args:[]}),s&&(h!=="M"||!t[P+1]||t[P+1].cmd.toUpperCase()!=="M")){if(h==="M"&&(b=p),s[0]&&s[0].length)for(X=s.length,S=0;S<X;S+=1)z.push({cmd:h,args:s[S]});else z.push({cmd:h,args:s});o&&z.push({cmd:"L",args:o})}}return h!=="Z"&&!r.hasStroke&&z.push({cmd:"Z",args:[]}),z=Q(z),r.evenOdd&&H>1?N(z):z}function fe(t){var r,s={xMin:NaN,xMax:NaN,yMin:NaN,yMax:NaN},o,h,p;for(h=0,p=t.length;h<p;h+=1)r=t[h].args,o={x:r[r.length-2],y:r[r.length-1]},!isNaN(o.x)&&!isNaN(o.y)&&(s.xMin=s.xMin<o.x?s.xMin:o.x,s.xMax=s.xMax>o.x?s.xMax:o.x,s.yMin=s.yMin<o.y?s.yMin:o.y,s.yMax=s.yMax>o.y?s.yMax:o.y);return s}function de(t,r,s,o){var h=function(se,me){return{x:(se.x+me.x)/2,y:(se.y+me.y)/2}},p=h(t,r),b=h(s,o),P=u(t,r,.75),O=u(o,s,.75),S=(o.x-t.x)/16,I=(o.y-t.y)/16,X,z,H,Z,Q,R,L,q,_,ie,te,ye,Ce,pe,ve;return R=h(P,O),P.offCurve=!0,O.offCurve=!0,q=[t,P,R],_=[R,O,o],ie=[t,p,P,R],te=[R,O,b,o],X=u(t,r,3/8),z=u(P,O,3/8),z.x-=S,z.y-=I,H=u(O,P,3/8),H.x+=S,H.y+=I,Z=u(o,s,3/8),Q=h(X,z),L=h(H,Z),X.offCurve=!0,z.offCurve=!0,H.offCurve=!0,Z.offCurve=!0,c(x(ie,.5),w(q,.5))<10?ye=[P,R]:ye=[X,Q,z,R],c(x(te,.5),w(_,.5))<10?Ce=[O,o]:Ce=[H,L,Z,o],pe=ye.length-1,ve=Ce.length-1,c(h(ye[pe-1],Ce[0]),ye[pe])<1&&ye.splice(pe),ye.concat(Ce)}function Be(t,r){var s=[],o={x:r[0],y:r[1]},h={x:r[2],y:r[3]};return s[4]=r[2],s[5]=r[3],s[0]=t.x+2/3*(o.x-t.x),s[1]=t.y+2/3*(o.y-t.y),s[2]=h.x+2/3*(o.x-h.x),s[3]=h.y+2/3*(o.y-h.y),s}function $(t){var r,s,o={x:0,y:0},h,p,b,P,O,S;for(t=t.slice(0),b=t.length,h=0;h<b;h+=1)s=t[h].cmd,r=t[h].args,s==="M"||s==="L"?o={x:r[0],y:r[1]}:s==="Z"&&(o={x:0,y:0}),s==="C"?(P={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(S=o,P&&(S=d(P,S)),P={x:r[0],y:r[1]},t[h].args=[S.x,S.y,r[0],r[1],r[2],r[3]],t[h].cmd="C",o={x:r[2],y:r[3]}):P=!1,s==="Q"?(O={x:r[0],y:r[1]},t[h].args=Be(o,r),t[h].cmd="C",o={x:r[2],y:r[3]}):s==="T"?(S=o,O&&(S=d(O,S)),O=S,t[h].args=Be(o,[S.x,S.y,r[0],r[1]]),t[h].cmd="C",o={x:r[0],y:r[1]}):O=!1;for(o={x:0,y:0},h=0;h<b;h+=1)for(r=t[h].args,p=0;p<r.length;p+=2)r[p]-=o.x,r[p+1]-=o.y,o.x+=Math.round(r[p]),o.y+=Math.round(r[p+1]);return t}function oe(t){var r,s,o={x:0,y:0},h=[],p=[],b,P,O=t.length,S,I,X,z,H,Z;function Q(){p.length>2&&(JSON.stringify(p[0])===JSON.stringify(p[p.length-1])&&(p=p.slice(0,-1)),h.push(p)),p=[]}for(b=0;b<O;b+=1)s=t[b].cmd,r=t[b].args,P=s==="M",P||s==="L"?(P&&Q(),p.push({x:r[0],y:r[1]}),o={x:r[0],y:r[1]}):s==="Z"?(o={x:0,y:0},Q()):S=o,s==="C"?(I={x:r[0],y:r[1]},X={x:r[2],y:r[3]},o={x:r[4],y:r[5]},z=o,p=p.concat(de(S,I,X,z)),H=X):s==="S"?(H?I=d(H,S):I=S,X={x:r[0],y:r[1]},o={x:r[2],y:r[3]},z=o,p=p.concat(de(S,I,X,z)),H=X):H=!1,s==="Q"?(I={x:r[0],y:r[1],offCurve:!0},o={x:r[2],y:r[3]},X=o,p.push(I),p.push(X),Z=I):s==="T"?(Z?(I=d(Z,S),I.offCurve=!0):I=S,o={x:r[0],y:r[1]},X=o,p.push(I),p.push(X),Z=I):Z=!1;return p.length>2&&h.push(p),h}function ee(t){var r,s,o={x:0,y:0},h={x:0,y:0},p=[],b,P,O=t.length,S,I,X,z,H,Z,Q=[];function R(L,q){var _;for(L=L.slice(0),_=0;_<L.length;_+=2)L[_]-=q.x,L[_+1]-=q.y;p.push(L)}for(b=0;b<O;b+=1)s=t[b].cmd,r=t[b].args,P=s==="M",P||s==="L"?(P?(p.push([r[0],r[1]]),h={x:r[0],y:r[1]}):R(r,o),o={x:r[0],y:r[1]}):s==="Z"?(o=h,p.length>0&&(p.isClosed=!0,Q.push(p)),p=[]):S=o,s==="C"?(R(r,o),H={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(H?I=d(H,S):I=S,X={x:r[0],y:r[1]},z={x:r[2],y:r[3]},R([I.x,I.y,X.x,X.y,z.x,z.y],o),H=X,o=z):H=!1,s==="Q"?(I={x:r[0],y:r[1],offCurve:!0},X={x:r[2],y:r[3]},R(Be(o,r),o),Z=I,o=X):s==="T"?(Z?(I=d(Z,S),I.offCurve=!0):I=S,X={x:r[0],y:r[1]},R(Be(o,[I.x,I.y,X.x,X.y]),o),o=X,Z=I):Z=!1;return p.length&&(Q.push(p),p=[]),Q}function ce(t){var r,s,o={x:0,y:0},h={x:0,y:0},p,b,P=t.length,O,S,I,X,z,H,Z,Q=[],R=[];for(p=0;p<P;p+=1)s=t[p].cmd,r=t[p].args,b=s==="M",b||s==="L"?(o={x:r[0],y:r[1]},H=[o,o,o],R.push(H),b&&(h=o)):s==="Z"?(o=h,R.length&&Q.push(R),R=[]):O=o,s==="C"?(H[2]={x:r[0],y:r[1]},H=[{x:r[2],y:r[3]},{x:r[4],y:r[5]}],R.push(H),z={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(z?S=d(z,O):S=O,I={x:r[0],y:r[1]},X={x:r[2],y:r[3]},H[2]=S,H=[I,X],R.push(H),z=I,o=X):z=!1,s==="Q"?(S={x:r[0],y:r[1]},I={x:r[2],y:r[3]},r=Be(o,r),H[2]={x:r[0],y:r[1]},H=[{x:r[2],y:r[3]},{x:r[4],y:r[5]}],R.push(H),o=I,Z=S):s==="T"?(Z?S=d(Z,O):S=O,I={x:r[0],y:r[1]},r=Be(o,[S.x,S.y,I.x,I.y]),H[2]=S,H=[{x:r[2],y:r[3]},{x:r[4],y:r[5]}],R.push(H),o=I,Z=S):Z=!1;return R.length&&Q.push(R),Q}function xe(t){var r,s,o,h,p=[],b={x:0,y:0},P={},O,S,I,X,z,H=.001,Z,Q,R=[],L;for(X=t.length,O=0;O<X;O+=1){I=t[O];try{s=I.args.slice(0)}catch(q){s=[]}if(h=I.cmd.toLowerCase(),z=s?s.length:0,z>1){if(P.x=s[z-2],P.y=s[z-1],h==="c"?(Z&&(L=d(Z,b),Math.abs(L.x-s[0])<H&&Math.abs(L.y-s[1])<H?(h="s",s=s.slice(2),Z=L):Z=!1),Z||(Z={x:s[2],y:s[3]}),Q=!1):h==="q"?(Q&&(L=d(Q,b),Math.abs(L.x-s[0])<H&&Math.abs(L.y-s[1])<H?(h="t",s=s.slice(2),Q=L):Q=!1),Q||(Q={x:s[0],y:s[1]}),Z=!1):h==="s"?(Z=Z?d(Z,b):!1,Q=!1):h==="t"?(Q=Q?d(Q,b):!1,Z=!1):(Z=!1,Q=!1),h==="m")h="M";else for(z=s.length,S=0;S<z;S+=2)s[S]-=b.x,s[S+1]-=b.y;h==="l"&&(s[0]===0?(h="v",s=[s[1]]):s[1]===0&&(h="h",s=[s[0]])),b.x=P.x,b.y=P.y}p.push({cmd:h,args:s})}for(o=[],O=0;O<X;O+=1){for(I=p[O],o.push(I),h=I.cmd,S=O+1;S<X&&p[S].cmd===h;)I.args=I.args.concat(p[S].args),S+=1;O=S-1}for(X=o.length,O=0;O<X;O+=1)for(I=o[O],R.push(I.cmd),z=I.args?I.args.length:0,S=0;S<z;S+=1)r=I.args[S],r>=0&&S!==0?r=" "+k(r):r=k(r),R.push(r);return R.join("")}function be(t){var r,s=t.length,o=[];for(r=0;r<s;r+=1)o.push(t[r].cmd),o.push(t[r].args.join(" "));return o.join("")}function ue(t){var r,s,o={x:0,y:0},h,p=t.length,b,P=[],O,S,I,X,z=[],H,Z,Q=[],R,L,q;for(t=JSON.parse(JSON.stringify(t)),h=0;h<p;h+=1)s=t[h].cmd,r=t[h].args,s==="C"?(I={x:r[2],y:r[3]},o={x:r[4],y:r[5]}):s==="S"?(R=o,I&&(R=d(I,R)),I={x:r[0],y:r[1]},t[h].args=[R.x,R.y,r[0],r[1],r[2],r[3]],t[h].cmd="C",o={x:r[2],y:r[3]}):I=!1,s==="Q"?(X={x:r[0],y:r[1]},t[h].args=Be(o,r),t[h].cmd="C",o={x:r[2],y:r[3]}):s==="T"?(R=o,X&&(R=d(X,R)),X=R,t[h].args=[R.x,R.y,r[0],r[1]],t[h].cmd="C",o={x:r[0],y:r[1]}):X=!1,Q.push(t[h].cmd),Q=Q.concat(t[h].args);for(b=new RegExp("[MLCQZ]",""),h=0;h<Q.length;h+=1)if(Z=Q[h],b.test(Z)){if(Z==="C")S=3,H=2;else if(Z==="Q")S=2,H=1;else if(Z==="L")S=1,H=1;else if(Z==="M")S=1,H=0;else{z.push("M");continue}for(S===H&&z.push(Z),O=0;O<S;O+=1)O===H&&z.push(Z),L=Q[++h],q=Q[++h],z.push(q),z.push(L)}else return t;for(h=z.length-1;h>-1;h-=1)typeof z[h]=="string"?P.push({cmd:z[h],args:[]}):P[P.length-1].args.push(z[h]);return P[P.length-1].cmd="Z",P}function N(t){var r,s,o,h,p,b=0,P,O=t.length,S,I,X,z,H,Z=[],Q=[],R,L,q,_,ie,te,ye;function Ce(ve){var se,me=[];for(se=0;se<ve.length;se+=1)me=me.concat(ve[se]);return me}function pe(ve,se){var me,Se,ne=0,ge,Ae;for(me=ve.getContext("2d").getImageData(0,0,ve.width,ve.height).data,Se=se.getContext("2d").getImageData(0,0,se.width,se.height).data,ge=0,Ae=me.length;ge<Ae;ge+=1)me[ge]!==Se[ge]&&(ne+=1);return ne}for(h=0;h<O;h+=1){for(r=t[h].args,p=0;p<r.length;p+=2)S=typeof S=="number"?Math.max(S,r[p]):r[p],X=typeof X=="number"?Math.min(X,r[p]):r[p],I=typeof I=="number"?Math.max(I,r[p+1]):r[p+1],z=typeof z=="number"?Math.min(z,r[p+1]):r[p+1];s=t[h].cmd,(s==="Z"||s==="z")&&(Z.push(t.slice(b,h+1)),b=h+1)}if(ye=S-X,P=I-z,_=e(['<svg width="{{width}}" height="{{height}}" viewBox="0 0 {{width}} {{height}}">','<g transform="scale({{scale}}) translate('+-X+" "+-z+')"><path d="{{paths}}" {{attrs}}/></g>',"</svg>"].join("")),L=document.createElement("canvas"),ie=document.createElement("canvas"),q=50/P,ye*=q,P*=q,L.width=ie.width=ye,L.height=ie.height=P,L.width===0||L.height===0)return t;for(canvg(L,_.fillup({paths:be(t),width:ye,height:P,scale:q,attrs:'fill-rule="evenodd"'})),h=0;h<Z.length;h+=1)Q.push(ue(Z[h]));for(H=Z.slice(0),canvg(ie,_.fillup({paths:be(Ce(H)),attrs:""})),o=pe(L,ie),R=o+1;o&&o<R;)for(R=o,h=0;h<Z.length;h+=1){if(H[h]=Q[h],canvg(ie,_.fillup({paths:be(Ce(H))})),te=pe(L,ie),te===0)return Ce(H);te<=o?o=te:H[h]=Z[h]}return Ce(H)}function W(t){var r,s,o,h={},p,b={},P;p=t[0].getAttribute("viewBox"),p&&(p=p.trim().split(/\s*[\,\s]\s*/),h.x=Number(p[0]),h.y=Number(p[1]),h.w=Number(p[2]),h.h=Number(p[3]));try{t[0].width.baseVal.unitType===2?P=h.w*t[0].width.baseVal.valueInSpecifiedUnits/100:P=t[0].width.baseVal.valueInSpecifiedUnits||t[0].width.baseVal.value,t[0].height.baseVal.unitType===2?o=h.h*t[0].width.baseVal.valueInSpecifiedUnits/100:o=t[0].height.baseVal.valueInSpecifiedUnits||t[0].height.baseVal.value}catch(O){try{r=t[0].getBBox(),P=r.width,o=r.height}catch(S){P=h.w,o=h.h}}if(p||(p=t.clone()[0],document.body.appendChild(p),s=p.getBoundingClientRect(),h={x:0,y:0,w:s.width,h:s.height},p.setAttribute("width",s.width),p.setAttribute("height",s.height),document.body.removeChild(p)),P=P||h.w,o=o||h.h,h.w<0||h.h<0)throw new Error("Invalid viewBox.");return P>=o&&h.w>=h.h||P<=o&&h.w>=h.h?(b.a=b.d=P/h.w,b.e=0):(P<=o&&h.w<=h.h||P>=o&&h.w<=h.h)&&(b.d=b.a=o/h.h),b.a&&(b.f=(o-b.d*h.h)/2,b.e=(P-b.a*h.w)/2,b.e-=h.x*b.a,b.f-=h.y*b.d),(isNaN(b.a)||b.a===1)&&!b.e&&!b.f&&(b=!1),{viewBox:{x:0,y:0,width:P,height:o},transform:b}}function T(t){return"matrix("+[t.a||0,t.b||0,t.c||0,t.d||0,t.e||0,t.f||0].join(" ")+")"}function Y(t){var r,s,o,h,p=!1,b,P=K(),O=0,S,I;function X(R){var L=R.attr("transform"),q=/(\w+)\s*\(([e\d\s\.\,\-]+)\)/gm,_=[],ie=[],te,ye;return L?(L.replace(q,function(Ce,pe,ve){var se,me,Se;ie=ve.replace(/-/g," -").replace(/e\s*/g,"e").replace(/,/g," ").replace(/\s+/g," ").trim().split(/\s/),ie.forEach(function(ne,ge){ie[ge]=Number(ne)}),pe=pe.toLowerCase(),pe==="matrix"&&ie.length===6?_.push({a:ie[0],b:ie[1],c:ie[2],d:ie[3],e:ie[4],f:ie[5]}):pe==="scale"?(se=ie[0]||1,me=ie[1]||se,_.push({a:se,b:0,c:0,d:me})):pe==="translate"?(se=ie[0]||0,me=ie[1]||0,_.push({a:1,b:0,c:0,d:1,e:se,f:me})):pe==="rotate"?(se=ie[0]/180*Math.PI,te=Math.cos(se),ye=Math.sin(se),me=ie[1]||0,Se=ie[2]||0,me===0&&Se===0?_.push({a:te,b:ye,c:-ye,d:te}):(_.push({a:1,b:0,c:0,d:1,e:me,f:Se}),_.push({a:te,b:ye,c:-ye,d:te}),_.push({a:1,b:0,c:0,d:1,e:-me,f:-Se}))):pe==="skewx"?(se=ie[0]/180*Math.PI,_.push({a:1,b:0,c:Math.tan(se),d:1})):pe==="skewy"&&(se=ie[0]/180*Math.PI,_.push({a:1,b:Math.tan(se),c:0,d:1}))}),_.reverse()):[]}function z(R,L){var q,_;for(q=0,_=L.length;q<_;q+=1)R.transform(L[q])}function H(R){var L=window.getComputedStyle(R),q=["fill","fill-opacity","stroke","display","opacity","visibility","fill-rule","stroke-width","stroke-opacity","stroke-linecap","stroke-linejoin","stroke-miterlimit"],_=[];return q.forEach(function(ie){_.push(ie+":"+L[ie])}),_.join(";")}function Z(R,L,q){var _,ie,te,ye,Ce,pe,ve,se,me,Se,ne,ge,Ae,we,Ee,ae,Fe,Me,Pe,De,ke,Ue,Ne;p&&R.attr("style",H(R[0]));try{if(R.css("opacity")==="0"||R.attr("opacity")===0)return}catch(Te){return}if(ye=R.attr("display"),Ce=R.css("display"),pe=R.attr("fill"),ve=R.css("fill"),se=R.attr("fill-opacity"),me=R.css("fill-opacity"),ke=R.attr("visibility"),Ue=R.css("visibility"),we=R.attr("opacity"),Ae=R.css("opacity"),De=j(R.css("stroke-width")||R.attr("stroke-width"),L&&L.viewBox),Ee=R.css("stroke")||R.attr("stroke"),ae=R.css("stroke-opacity")||R.attr("stroke-opacity"),Fe=R.css("stroke-linecap")||R.attr("stroke-linecap"),Me=R.css("stroke-miterlimit")||R.attr("stroke-miterlimit"),Pe=R.css("stroke-linejoin")||R.attr("stroke-linejoin"),q=q||{},q=JSON.parse(JSON.stringify(q)),(pe||ve)&&(ve=ve||pe,q.fill=ve==="none"||ve==="transparent"||/rgba\(\d+,\s*\d+,\s*\d+,\s*0\)/.test(ve)||se==="0"||me==="0",q.fill!==!0?(q.fill=ve||pe,q.fill=q.fill.replace(/\s+/g,""),(/#000|#000000|rgb\(0,0,0\)|rgba\(0,0,0,1\)/.test(q.fill)||!q.fill)&&(q.fill="#000")):q.fill="none"),q.opacity!==!0&&(we||Ae)&&(Ae=Number(Ae||we)*(Number(R.css("fill-opacity")||R.attr("fill-opacity"))||1),typeof q.opacity!="number"&&(q.opacity=1),q.opacity*=Ae,q.opacity===0&&(q.opacity=!0)),!(ye==="none"||Ce==="none")){if((ke||Ue)&&(Ue=Ue||ke,Ue==="hidden"&&(q.visibility=!0)),R.is("use")&&(Ne=R.attr("xlink:href").trim(),Ne[0]==="#"&&(Ne=S.getElementById(Ne.slice(1)),Ne&&function(){var Te;Ne=a(Ne).clone(),Te=W(Ne),Ne=a("<g>").append(Ne.html()||Ne[0].outerHTML),Te&&Te.transform&&R.attr("transform",T(Te.transform)+" "+R.attr("transform")),Ne.attr("style",R.attr("style")),R.append(Ne),R.attr("transform",["translate(",R.attr("x")||0,",",R.attr("y")||0,") ",R.attr("transform")].join(""))}())),De>0&&Ee!=="none"&&Ee!=="transparent"&&ae!=="0"&&L.viewBox&&De*De/(L.viewBox.width*L.viewBox.height)>1e-4&&(O=Math.max(O,De),q.stroke=Ee,q.strokeLinejoin=Pe,q.strokeLinecap=Fe,q.strokeMiterlimit=Me,q.strokeWidth=De),(q.fill===void 0||q.fill==="none")&&!q.strokeWidth&&(q.fill=!0),R.is("g, use")||R.is("switch"))for(ie=R.children(),Se=R[0].style["fill-rule"]||R.attr("fill-rule"),Ne=K(),Ne.viewBox=L.viewBox,ne=0,ge=ie.length;ne<ge;ne+=1)te=a(ie[ne]),Se&&!(te[0].style["fill-rule"]||te.attr("fill-rule"))&&te.attr("fill-rule",Se),Z(te,Ne,q);else if(R.is("polygon, polyline, path, circle, rect, ellipse")||R.is("line")&&q.strokeWidth>0){_={};for(Ne in q)if(q.hasOwnProperty(Ne)){if(q[Ne]===!0)return;_[Ne]=q[Ne]}Ne=K(R[0]),Ne.setAttrs(_)}else if(R.is("image")||R.is("img")){L.hasImage=!0;return}else return;z(Ne,X(R)),L.append(Ne)}}if(typeof t=="string"){var Q=new DOMParser().parseFromString(t,"text/html");je(Q),t=a(Q.body.firstElementChild)}try{for(t.find("style")&&(p=!0,document.body.appendChild(t[0])),r=t.children(),o=t[0].style["fill-rule"]||t.attr("fill-rule"),S=t[0],I=W(t),h=0,b=r.length;h<b;h+=1)s=a(r[h]),p&&s.attr("style",H(s[0])),o&&!(s[0].style["fill-rule"]||s.attr("fill-rule"))&&s.attr("fill-rule",o),I.viewBox&&(P.viewBox=Object.create(I.viewBox)),Z(s,P)}catch(R){p&&t.remove()}return p&&t.remove(),P.transform(I.transform),I.viewBox&&(P.viewBox=I.viewBox,O*O/(P.viewBox.width*P.viewBox.height)>1e-4&&(P.strokeWarning=!0)),P}function K(t){var r=[],s={};return s.append=function(o,h){var p=!1,b,P,O,S,I=[],X,z;if(r.forEach(function(H){I.push(JSON.stringify(H))}),!o)return this;if(l(o)){for(S=o.length,P=0;P<S;P+=1)s.append(o[P],!0);return this}else typeof o!="string"&&o.length&&(o=o[0]);if(typeof o=="string"&&/<\/svg>/i.test(o)||o.tagName&&o.tagName.toLowerCase()==="svg"){for(o=Y(a(o)),o.viewBox&&(s.viewBox=o.viewBox),s.hasImage=o.hasImage,o.strokeWarning&&(s.strokeWarning=!0),o=o.getPathArray(),z=s.viewBox,z={xMin:z.x,xMax:z.x+z.width,yMin:z.y,yMax:z.y+z.height},X=[],O=0;O<o.length;O+=1)b=fe(o[O]),b.xMin<z.xMax&&b.xMax>z.xMin&&b.yMin<z.yMax&&b.yMax>z.yMin&&X.push(o[O]);o=X,p=!0}else o.tagName||typeof o=="string"?o=G(o):o.getPathArray?(o=o.getPathArray(),p=!0):o=!1;return o&&(h||I.indexOf(JSON.stringify(o))===-1)&&(p?r=r.concat(o):r.push(o)),function(){var H,Z=[],Q=[];if(r.length>v){var R=r.reduce(function(L,q){return Math.min(L,q.length)},r[0].length||0);r=r.filter(function(L){return L.length>R})}!h&&r.length>1&&r.length<=v&&(r.forEach(function(L){var q=JSON.stringify(L)+JSON.stringify(L.attrs);H=Z.indexOf(q),H!==-1?Q.splice(H,1):Z.push(q),Q.push(L)}),r=Q)}(),this},s.setPath=function(o){return r=[],s.append(o)},s.setAttrs=function(o,h){h=h||0,r[h]&&(r[h].attrs=o)},s.getAttrs=function(o){var h=!0,p=n([0,0,0]),b,P,O,S=r.length,I=[],X=!1,z=!1;for(O=0;O<S;O+=1)I.push(r[O].attrs||{}),o&&(I[O].fill&&I[O].fill!=="none"&&(b=n(I[O].fill),P=I[O].fill=b.toString(),h=h&&n(I[O].fill).distance(p)<14,O&&!X&&n(I[O].fill).distance(n(I[O-1].fill))>10&&!h&&(X=!0)),I[O].stroke&&I[O].stroke!=="none"&&(b=n(I[O].stroke),I[O].stroke=b.toString()),I[O].opacity===1&&delete I[O].opacity);if(o)if(!X)I=I.map(function(H){return H.fill!=="none"&&(I.fill=P),H});else for(O=0;O<S;O+=1)I[O]=I[O]||{},I[O].fill||(I[O].fill="#000"),I[O].strokeWidth>0&&!I[O].stroke&&(I[O].stroke="#000");return I},s.getPathData=function(o){var h=[],p,b;for(p=0;p<r.length;p+=1)b=xe(r[p]),h.push(b);return o?r.length>v?[h.join("")]:h:h.join("")},s.transform=function(o,h){var p=0,b,P,O=r.length;for(!isNaN(h)&&h>=0&&h<O&&(p=h,O=h+1),p;p<O;p+=1)for(b=r[p],P=0;P<b.length;P+=1)m(b[P].args,o);return s.viewBox&&(o.a&&(s.viewBox.width=Math.abs(Math.round(o.a*s.viewBox.width))),o.d&&(s.viewBox.height=Math.abs(Math.round(o.d*s.viewBox.height)))),this},s.scale=function(o,h,p){return o=Number(o),h=Number(h),!o||o===1/0?this:(s.transform({a:o,d:h||o},p),this)},s.translate=function(o,h,p){return o=Number(o),h=Number(h),isNaN(o)?this:(isNaN(h)&&(h=o),s.transform({e:o,f:h},p),this)},s.rotate=function(o,h){var p,b;return o=Number(o)/180*Math.PI,isNaN(o)?this:(p=Math.cos(o),b=Math.sin(o),s.transform({a:p,b:b,c:-b,d:p},h),this)},s.deleteSubPath=function(o){return o>=0&&o<r.length&&r.splice(o,1),this},s.moveLayer=function(o,h){var p;o>=0&&o<r.length&&(h+=h>0?1:-1,p=r.map(function(b,P){return{el:b,order:P}}),p[o].order+=h,p.sort(function(b,P){return b.order-P.order}),r=p.map(function(b){return b.el}))},s.getTTFContours=function(){var o=[],h;for(h=0;h<r.length;h+=1)o=o.concat(oe(r[h]));return o.length||(o=[[{x:0,y:0},{x:0,y:0},{x:0,y:0}]]),o},s.getCFFPath=function(){var o=[],h;for(h=0;h<r.length;h+=1)o=o.concat(r[h]);return o=$(o),o.length||(o=[{cmd:"Z",args:[]}]),o},s.getPDFSegments=function(){var o=[],h;for(h=0;h<r.length;h+=1)o.push(ee(r[h]));return o},s.getPSPaths=function(){var o=[],h;for(h=0;h<r.length;h+=1)o=o.concat(ce(r[h]));return o},s.getPathArray=function(){return r.slice(0)},s.setPath(t),s}return K}]).factory("glyphs",["svgPath","template",function(e,n){var v=angular.element2;return function(a){var l=[],u,w,x,d,m,f,c={},y,g=Object.create(null),k,B,A,M=n(['<svg viewBox="0 0 {{width}} {{height}}" width="{{width}}" height="{{height}}">','<path d="{{d}}"></path>',"</svg>"].join("")),E;function F(U){return U=U.replace(/,[,\s]+/g,",").replace(/,$/,"").replace(/^,/,"").trim(),U.split(",")}function C(U,V,J){var j=parseInt(U.attr("horiz-adv-x"),10),G,re,le,he;if(V=V||0,J||M.fillup({width:j||c.defaultAdvX}),G=U.attr("d"),!G||G.length<10||U.hasClass("hidden"))return!1;if(le=e(G),le.transform({a:1,d:-1,f:c.ascent-V}),J){if(le.viewBox={x:0,y:0,width:j,height:c.unitsPerEm},he=U.attr("data-tags")||U.attr("glyph-name"),he&&(le.tags=F(he)),re=U.attr("unicode"),re){if(re.charLength()>1)return{d:G,path:le,liga:re};le.defaultCode=re.codePointAt(0)}return le}return v(M.fillup({d:le.getPathData()}))}if(typeof a=="string"){/<svg/.test(a)&&/<\w+:/.test(a)&&(a=a.replace(/(<\/?)\w+:/gm,"$1"));var D=new DOMParser().parseFromString(a,"text/html");je(D),a=v(D.body.firstElementChild)}if(d=a.find("glyph"),y=d.length,y)for(x=a.children(),f=0;f<x.length;f+=1)x.eq(f).is("g, polygon, polyline, path, circle, rect, ellipse, use")&&(B=!0);if(!y||B)E=a.attr("data-tags"),a=e(a),E&&(a.tags=F(E)),l.push(a);else{if(c.defaultAdvX=parseInt(a.find("font").attr("horiz-adv-x"),10),E=a.find("font-face"),c.ascent=parseInt(E.attr("ascent"),10),c.descent=parseInt(E.attr("descent"),10),c.baseline=c.descent/(c.descent-c.ascent)*100,c.unitsPerEm=c.ascent-c.descent,M.fillup({height:c.unitsPerEm}),k=a.find("metadata"),k.length&&(k=k.find("json"),k.length))try{k=JSON.parse(k.text()),l.metadata={name:k.name||k.fontFamily,url:k.url||k.fontURL,designer:k.designer,designerURL:k.designerURL,license:k.license,licenseURL:k.licenseURL,description:k.description,copyright:k.copyright,majorVersion:k.majorVersion,minorVersion:k.minorVersion,includeMetadata:!0},k.grid&&(l.metadata.grid=k.grid)}catch(U){}for(w=angular.element(document.body),f=0;f<20;f+=1)if(E=C(v(d[f])),E){w.append(E);try{u=E[0].getBBox(),E.remove()}catch(U){E.remove()}if(u.height===c.unitsPerEm){if(A===u.y)break;A=u.y}}for(f=0;f<y;f+=1)if(m=v(d[f]),E=C(m,A,!0),E)E.liga?(g[E.d]=g[E.d]||{liga:[]},g[E.d].liga.push(E.liga),g[E.d].path=E.path):(l.push(E),g[m.attr("d")]=g[m.attr("d")]||{liga:[]},g[m.attr("d")].idx=l.length-1);else try{m.attr("unicode").codePointAt(0)===32&&(c.whitespace=parseInt(m.attr("horiz-adv-x"),10)/c.unitsPerEm*100)}catch(U){}for(E in g)try{typeof g[E].idx=="number"?l[g[E].idx].liga=g[E].liga:(g[E].path.liga=g[E].liga,l.push(g[E].path))}catch(U){}}return l.fontMetrics={emSize:c.unitsPerEm,baseline:c.baseline,whitespace:c.whitespace},l}}]);(function(){var e="http://www.w3.org/1999/xlink",n=angular.module("svg"),v={};angular.forEach([{miAttrName:"miXlinkHref",attrName:"xlink:href"},{miAttrName:"miStrokeWidth",attrName:"stroke-width"},{miAttrName:"miStrokeLinejoin",attrName:"stroke-linejoin"},{miAttrName:"miStrokeLinecap",attrName:"stroke-linecap"},{miAttrName:"miStrokeMiterlimit",attrName:"stroke-miterlimit"},{miAttrName:"miFontSize",attrName:"font-size"},"d","fill","stroke","opacity","width","height","viewBox","x1","x2","y1","y2"],function(a){var l;typeof a=="string"?l="mi"+a.substr(0,1).toUpperCase()+a.substr(1):(l=a.miAttrName,a=a.attrName),v[l]=function(){return{priority:99,link:function(u,w,x){x.$observe(l,function(d){d&&(/:/.test(a)?w[0].setAttributeNS(e,a,d):w.attr(a,d))})}}}}),n.directive(v)})();angular.module("font",["svg","tmpl"]).factory("font",["svgPath","template",function(e,n){var v,a,l,u,w,x,d,m=function(N,W){return isNaN(N)?W:isNaN(W)||N<W?N:W},f=function(N,W){return isNaN(N)?W:isNaN(W)||N>W?N:W},c=function(N){return N>32767&&(N=32767),N<-32768&&(N=-32768),N},y=function(N,W){var T,Y,K,t=Array.from(N),r=Array.from(W),s=t.length;for(s=s<r.length?s:r.length,K=0;K<s;K+=1)if(T=t[K].codePointAt(0),Y=r[K].codePointAt(0),T!==Y)return isNaN(T)?-1:isNaN(Y)?1:T-Y;return t.length-r.length},g=function(N,W){var T,Y=N.length,K=0,t=0,r,s=0;for(T=0;T<Y;T+=1)K+=N[T].byteLength;if(!isNaN(W)&&W>0)for(;t<K;)t+=W;for(r=new Uint8Array(t||K),T=0;T<Y;T+=1)r.set(new Uint8Array(N[T]),s),s+=N[T].byteLength;return r.buffer},k=function(N,W,T){var Y,K,t,r,s=N.length;for(W===1?t="setUint8":(t="setUint16",W=2),Y=new ArrayBuffer(s*W),K=new DataView(Y),r=0;r<s;r+=1)K[t](r*W,N.charCodeAt(r),T);return Y},B=function(N){var W,T=N.length,Y="";for(W=0;W<T;W+=1)Y+=N[W].charCodeAt(0).toString(16);return parseInt(Y,16)},A=function(N){for(var W=0;N>=2;)N/=2,W+=1;return W},M=function(N){var W=new DataView(N),T,Y=N.byteLength,K=0;for(T=0;T<Y;T+=4)K+=W.getUint32(T),K>4294967295&&(K=parseInt(K.toString(16).match(/.{8}$/)[0],16));return K},E=function(N){var W=[{bit:0,range:[0,127]},{bit:1,range:[128,255]},{bit:2,range:[256,383]},{bit:3,range:[384,591]},{bit:4,range:[592,687]},{bit:4,range:[7424,7551]},{bit:4,range:[7552,7615]},{bit:5,range:[688,767]},{bit:5,range:[42752,42783]},{bit:6,range:[768,879]},{bit:6,range:[7616,7679]},{bit:7,range:[880,1023]},{bit:8,range:[11392,11519]},{bit:9,range:[1024,1279]},{bit:9,range:[1280,1327]},{bit:9,range:[11744,11775]},{bit:9,range:[42560,42655]},{bit:10,range:[1328,1423]},{bit:11,range:[1424,1535]},{bit:12,range:[42240,42559]},{bit:13,range:[1536,1791]},{bit:13,range:[1872,1919]},{bit:14,range:[1984,2047]},{bit:15,range:[2304,2431]},{bit:16,range:[2432,2559]},{bit:17,range:[2560,2687]},{bit:18,range:[2688,2815]},{bit:19,range:[2816,2943]},{bit:20,range:[2944,3071]},{bit:21,range:[3072,3199]},{bit:22,range:[3200,3327]},{bit:23,range:[3328,3455]},{bit:24,range:[3584,3711]},{bit:25,range:[3712,3839]},{bit:26,range:[4256,4351]},{bit:26,range:[11520,11567]},{bit:27,range:[6912,7039]},{bit:28,range:[4352,4607]},{bit:29,range:[7680,7935]},{bit:29,range:[11360,11391]},{bit:29,range:[42784,43007]},{bit:30,range:[7936,8191]},{bit:31,range:[8192,8303]},{bit:31,range:[11776,11903]},{bit:32,range:[8304,8351]},{bit:33,range:[8352,8399]},{bit:34,range:[8400,8447]},{bit:35,range:[8448,8527]},{bit:36,range:[8528,8591]},{bit:37,range:[8592,8703]},{bit:37,range:[10224,10239]},{bit:37,range:[10496,10623]},{bit:37,range:[11008,11263]},{bit:38,range:[8704,8959]},{bit:38,range:[10752,11007]},{bit:38,range:[10176,10223]},{bit:38,range:[10624,10751]},{bit:39,range:[8960,9215]},{bit:40,range:[9216,9279]},{bit:41,range:[9280,9311]},{bit:42,range:[9312,9471]},{bit:43,range:[9472,9599]},{bit:44,range:[9600,9631]},{bit:45,range:[9632,9727]},{bit:46,range:[9728,9983]},{bit:47,range:[9984,10175]},{bit:48,range:[12288,12351]},{bit:49,range:[12352,12447]},{bit:50,range:[12448,12543]},{bit:50,range:[12784,12799]},{bit:51,range:[12544,12591]},{bit:51,range:[12704,12735]},{bit:52,range:[12592,12687]},{bit:53,range:[43072,43135]},{bit:54,range:[12800,13055]},{bit:55,range:[13056,13311]},{bit:56,range:[44032,55215]},{bit:57,range:[55296,57343]},{bit:58,range:[67840,67871]},{bit:59,range:[19968,40959]},{bit:59,range:[11904,12031]},{bit:59,range:[12032,12255]},{bit:59,range:[12272,12287]},{bit:59,range:[13312,19903]},{bit:59,range:[131072,173791]},{bit:59,range:[12688,12703]},{bit:60,range:[57344,63743]},{bit:61,range:[12736,12783]},{bit:61,range:[63744,64255]},{bit:61,range:[194560,195103]},{bit:62,range:[64256,64335]},{bit:63,range:[64336,65023]},{bit:64,range:[65056,65071]},{bit:65,range:[65040,65055]},{bit:65,range:[65072,65103]},{bit:66,range:[65104,65135]},{bit:67,range:[65136,65279]},{bit:68,range:[65280,65519]},{bit:69,range:[65520,65535]},{bit:70,range:[3840,4095]},{bit:71,range:[1792,1871]},{bit:72,range:[1920,1983]},{bit:73,range:[3456,3583]},{bit:74,range:[4096,4255]},{bit:75,range:[4608,4991]},{bit:75,range:[4992,5023]},{bit:75,range:[11648,11743]},{bit:76,range:[5024,5119]},{bit:77,range:[5120,5759]},{bit:78,range:[5760,5791]},{bit:79,range:[5792,5887]},{bit:80,range:[6016,6143]},{bit:80,range:[6624,6655]},{bit:81,range:[6144,6319]},{bit:82,range:[10240,10495]},{bit:83,range:[40960,42127]},{bit:83,range:[42128,42191]},{bit:84,range:[5888,5919]},{bit:84,range:[5920,5951]},{bit:84,range:[5952,5983]},{bit:84,range:[5984,6015]},{bit:85,range:[66304,66351]},{bit:86,range:[66352,66383]},{bit:87,range:[66560,66639]},{bit:88,range:[118784,119039]},{bit:88,range:[119040,119295]},{bit:88,range:[119296,119375]},{bit:89,range:[119808,120831]},{bit:90,range:[1044480,1048573]},{bit:90,range:[1048576,1114109]},{bit:91,range:[65024,65039]},{bit:91,range:[917760,917999]},{bit:92,range:[917504,917631]},{bit:93,range:[6400,6479]},{bit:94,range:[6480,6527]},{bit:95,range:[6528,6623]},{bit:96,range:[6656,6687]},{bit:97,range:[11264,11359]},{bit:98,range:[11568,11647]},{bit:99,range:[19904,19967]},{bit:100,range:[43008,43055]},{bit:101,range:[65536,65663]},{bit:101,range:[65664,65791]},{bit:101,range:[65792,65855]},{bit:102,range:[65856,65935]},{bit:103,range:[66432,66463]},{bit:104,range:[66464,66527]},{bit:105,range:[66640,66687]},{bit:106,range:[66688,66735]},{bit:107,range:[67584,67647]},{bit:108,range:[68096,68191]},{bit:109,range:[119552,119647]},{bit:110,range:[73728,74751]},{bit:110,range:[74752,74879]},{bit:111,range:[119648,119679]},{bit:112,range:[7040,7103]},{bit:113,range:[7168,7247]},{bit:114,range:[7248,7295]},{bit:115,range:[43136,43231]},{bit:116,range:[43264,43311]},{bit:117,range:[43312,43359]},{bit:118,range:[43520,43615]},{bit:119,range:[65936,65999]},{bit:120,range:[66e3,66047]},{bit:121,range:[66208,66271]},{bit:121,range:[66176,66207]},{bit:121,range:[67872,67903]},{bit:122,range:[127024,127135]},{bit:122,range:[126976,127023]}],T,Y;for(T=0,Y=W.length;T<Y;T+=1)if(N>=W[T].range[0]&&N<=W[T].range[1])return W[T].bit;return 0},F=function(N,W){for(var T=new ArrayBuffer(12),Y=1,K=0,t,r=new DataView(T);Y<N;)K+=1,Y*=2;return Y/=2,K-=1,t=16*Y,r.setUint32(0,W?B("OTTO"):65536),r.setUint16(4,N),r.setUint16(6,t),r.setUint16(8,K),r.setUint16(10,N*16-t),T},C=function(N,S){var T,Y,K,t,r,s,o,h,p=[],b=[],P=[],O=[],S=S||{},I,X,z=0,H=function(Q,R,L,q){var _=1,ie=4,te,ye,Ce;Q==="y"&&(_+=1,ie+=1),q?(te=q.roundedVal,isNaN(te)&&(te=q.val)):te=0,L.relVal=L.val-te,Ce=Math.round(L.relVal),L.relVal>0&&L.relVal%1===.5?L.relVal=Ce-1:L.relVal=Ce,L.roundedVal=Math.round(te+L.relVal),ye=q&&L.relVal===0,!ye&&L.relVal<256&&L.relVal>-256?(R[_]=1,L.relVal<0?(R[ie]=0,L.relVal=-L.relVal):R[ie]=1,L.byteLength=1):(R[_]=0,ye?(R[ie]=1,L.byteLength=0):(R[ie]=0,L.byteLength=2))},Z=function(Q,R){var L=R.length,q=new ArrayBuffer(L*2),_=new DataView(q),ie=0,te,ye,Ce,pe;for(te=0;te<L;te+=1)ye=R[te],Ce=ye[Q].byteLength,Ce&&(pe=ye[Q].relVal,Ce===1?_.setUint8(ie,pe):Ce===2&&_.setInt16(ie,pe),ie+=Ce);return q.slice(0,ie)};for(N=Object.create(N),r=N.length,t=0;t<r;t+=1){for(T=N[t],h=[],s=T.length,z+=s,K=0;K<s;K+=1)h[K]=[],h[K][3]=0,o=T[K],o.offCurve?h[K][0]=0:(h[K][0]=1,T.xMin=m(T.xMin,o.x),T.yMin=m(T.yMin,o.y),T.xMax=f(T.xMax,o.x),T.yMax=f(T.yMax,o.y)),o.x={val:o.x},o.y={val:o.y},K===0?N[t-1]?(I=N[t-1].length,I=N[t-1][I-1]):I=!1:I=T[K-1],H("x",h[K],o.x,I?I.x:!1),H("y",h[K],o.y,I?I.y:!1);for(s=h.length,Y=0;Y<s;Y+=1){for(K=0,I=h[Y].join("");K<256&&h[Y+K+1]&&I===h[Y+K+1].join("");)K+=1;K&&(h[Y][3]=1,h[Y+1]=K,h.splice(Y+2,K-1),s=h.length,Y+=1)}T.flags=h,T.xBuffer=Z("x",T),T.yBuffer=Z("y",T)}for(h=[],Y=0,r=N.length;Y<r;Y+=1){for(T=N[Y],S.xMin=Math.round(m(S.xMin,T.xMin)),S.yMin=Math.round(m(S.yMin,T.yMin)),S.xMax=Math.round(f(S.xMax,T.xMax)),S.yMax=Math.round(f(S.yMax,T.yMax)),b.push(T.length+(b[Y-1]||-1)),K=0,s=T.flags.length;K<s;K+=1)T.flags[K].length&&(T.flags[K]=parseInt(T.flags[K].reverse().join(""),2));h.push(new Uint8Array(T.flags).buffer),P.push(T.xBuffer),O.push(T.yBuffer)}for(h=g(h),I=new ArrayBuffer(b.length*2+2),X=new DataView(I),Y=0,r=b.length;Y<r;Y+=1)X.setInt16(Y*2,b[Y]);return I=[I],P=g(P),O=g(O),I.push(h),I.push(P),I.push(O),p=g(I),I=new ArrayBuffer(10),X=new DataView(I),X.setUint16(0,N.length),X.setUint16(2,c(S.xMin)),X.setUint16(4,c(S.yMin)),X.setUint16(6,c(S.xMax)),X.setUint16(8,c(S.yMax)),I=[I],I.push(p),{buffer:g(I,4),bbox:S,contourCount:N.length,pointsCount:z}},D=function(N){var W=[],T=[],Y=[],K,t,r,s,o,h,p,b,P,O,S,I,X=3,z;function H(Q,R){var L=[],q,_,ie=Q.length;for(_=0,Q.sort(function(te,ye){return te.code-ye.code}),q=1;q<ie;q+=1)(Q[q].code!==Q[q-1].code+1||R&&Q[q].idx!==Q[q-1].idx+1)&&(L.push(Q.slice(_,q)),_=q);return L.push(Q.slice(_,ie)),L}function Z(Q,R,L){var q,_;t||(t=new ArrayBuffer(8*X)),_=t.lastOffset||0,q=new DataView(t),q.setUint16(_,Q),_+=2,q.setUint16(_,R),_+=2,q.setUint32(_,L),_+=4,t.lastOffset=_}for(b=N.length,p=0;p<b;p+=1)z=N[p],z<=65535?T.push({idx:p+1,code:z}):Y.push({idx:p+1,code:z});if(h=Y.length>0,o=T.length>0,h&&o&&(X=6),h&&(Y=Y.concat(T)),z=new ArrayBuffer(4),K=new DataView(z),K.setUint16(0,0),K.setUint16(2,X),W.push(z),o){for(z=T.map(function(Q){return Q.code}),z.indexOf(65535)<0&&T.push({idx:0,code:65535}),z.indexOf(65534)<0&&z.indexOf(65533)<0&&T.push({idx:0,code:65533}),O=H(T),I=O.length,s=new ArrayBuffer(2*(8+4*I)),K=new DataView(s),K.setUint16(0,4),K.setUint16(2,s.byteLength),K.setUint16(4,0),K.setUint16(6,2*I),z=2*Math.pow(2,A(I)),K.setUint16(8,z),K.setUint16(10,A(z/2)),K.setUint16(12,2*I-z),P=14,p=0;p<I;p+=1)K.setUint16(P,O[p][O[p].length-1].code),P+=2;for(K.setUint16(P,0),P+=2,p=0;p<I;p+=1)K.setUint16(P,O[p][0].code),P+=2;for(p=0;p<I;p+=1)K.setInt16(P,O[p][0].idx-O[p][0].code),P+=2;for(p=0;p<I;p+=1)K.setUint16(P,0),P+=2}if(P=4+X*8,z=s?s.byteLength:0,z+=P,o&&Z(0,3,P),h&&Z(0,4,z),o&&Z(1,3,P),h&&Z(1,4,z),o&&Z(3,1,P),h&&Z(3,10,z),W.push(t),o&&W.push(s),h){for(S=H(Y,!0),I=S.length,r=new ArrayBuffer(16+12*I),K=new DataView(r),K.setUint32(0,786432),K.setUint32(4,r.byteLength),K.setUint32(8,0),K.setUint32(12,I),P=16,p=0;p<I;p+=1)z=S[p],K.setUint32(P,z[0].code),P+=4,K.setUint32(P,z[z.length-1].code),P+=4,K.setUint32(P,z[0].idx),P+=4;W.push(r)}return g(W,4)},U=function(N){var W=new ArrayBuffer(N.cff?6:32),T=new DataView(W);return T.setUint32(0,N.cff?20480:65536),T.setUint16(4,N.numGlyphs||0),N.cff||(T.setUint16(6,N.maxPoints||0),T.setUint16(8,N.maxContours||0),T.setUint16(10,N.maxComponentPoints||0),T.setUint16(12,N.maxComponentContours||0),T.setUint16(14,2),T.setUint16(16,N.maxTwilightPoints||0),T.setUint16(18,N.maxStorage||0),T.setUint16(20,N.maxFunctionDefs||0),T.setUint16(22,N.maxInstructionDefs||0),T.setUint16(24,N.maxStackElements||0),T.setUint16(26,N.maxSizeOfInstructions||0),T.setUint16(28,N.maxComponentElements||0),T.setUint16(30,N.maxComponentDepth||0)),W},V=function(N){var W=new ArrayBuffer(32),T=new DataView(W);return T.setInt32(0,196608),T.setUint32(12,N.isFixedPitch?1:0),W},J=function(N){var W=new ArrayBuffer(54),T=new DataView(W),Y={val:Math.round(new Date().getTime()/1e3)+2082844800},K=N.xMax,t=N.xMin;return Y.msb=Math.floor(Y.val/4294967295),Y.lsb=Math.floor(Y.val%4294967295),T.setInt32(0,65536),T.setUint32(4,Math.round(+(N.majorVersion+"."+N.minorVersion)*65536)),T.setUint32(12,1594834165),T.setUint8(16,0),T.setUint8(17,11),T.setUint16(18,N.unitsPerEm||0),T.setUint32(20,Y.msb),T.setUint32(24,Y.lsb),T.setUint32(28,Y.msb),T.setUint32(32,Y.lsb),T.setInt16(36,c(N.xMin)||0),T.setInt16(38,c(N.yMin)||0),T.setInt16(40,c(N.xMax)||0),T.setInt16(42,c(N.yMax)||0),T.setUint16(44,0),T.setUint16(46,N.lowestRecPPEM||8),T.setInt16(48,2),T.setInt16(50,N.indexToLocFormat||0),W},j=function(N){var W=[],T,Y,K,t,r,s,o=[],h=[],p=0,b,P=[],O,S={copyright:0,fontFamily:1,subFamily:2,fontId:3,fullName:4,version:5,psName:6,trademark:7,manufacturer:8,designer:9,description:10,fontURL:11,designerURL:12,license:13,licenseURL:14};function I(X){var z=new ArrayBuffer(12),H=new DataView(z);return H.setUint16(0,X.pid),H.setUint16(2,X.sid),H.setUint16(4,X.languageID||0),H.setUint16(6,X.nameID),H.setUint16(8,X.byteLength),H.setUint16(10,X.offset),z}for(r in N)b=N[r],t=S[r],!isNaN(t)&&b&&(P.push(k(b,1)),s=b.length,o.push({pid:1,sid:0,nameID:t,offset:p,byteLength:s}),p+=s,s*=2,P.push(k(b)),h.push({pid:3,sid:1,languageID:1033,nameID:t,offset:p,byteLength:s}),p+=s);for(O=function(X,z){return X.nameID-z.nameID},o.sort(O),h.sort(O),o=o.concat(h),K=0,s=o.length;K<s;K+=1)o[K]=I(o[K]);if(s)return T=new ArrayBuffer(6),Y=new DataView(T),Y.setUint16(2,s),W.push(T),o=g(o),W.push(o),P=g(P),W.push(P),T=g(W),Y=new DataView(T),Y.setUint16(4,o.byteLength+6),T},G=function(N){var W=new ArrayBuffer(36),T=new DataView(W);return T.setUint32(0,65536),T.setInt16(4,N.ascent||0),T.setInt16(6,N.descent||0),T.setInt16(8,N.lineGap||0),T.setUint16(10,N.advanceWidthMax||0),T.setInt16(12,N.minLeftSideBearing||0),T.setInt16(14,N.minRightSideBearing||0),T.setInt16(16,c(N.xMaxExtent)||0),T.setInt16(18,1),T.setUint16(34,N.numOfLongHorMetrics),W},re=function(N){var W,T,Y,K=0,t=N.length;for(W=new ArrayBuffer(4*t),T=new DataView(W),Y=0;Y<t;Y+=1)T.setUint16(K,N[Y].aw),T.setInt16(K+2,N[Y].lsb),K+=4;return W},le=function(N){var W=new ArrayBuffer(16),T=new DataView(W),Y={tag:0,checksum:4,offset:8,length:12},K=function(t){var r,s;for(r in t)t.hasOwnProperty(r)&&(s=Y[r],isNaN(s)||T.setUint32(s,t[r]))};return K(N),{buffer:W,set:K}},he=function(N,W){var T,Y=W?4:2,K,t,r=N.length,s=W?"setUint32":"setUint16";for(T=new ArrayBuffer(r*Y),K=new DataView(T),t=0;t<r;t+=1)K[s](t*Y,N[t]*(W?2:1));return T},fe=function(N){var W=new ArrayBuffer(96),T=new DataView(W),Y=N.emSize,K,t=Math.sin(N.italicAngle*Math.PI/180),r=.7*Y,s=.65*Y,o=.14*Y,h=.48*Y;for(T.setUint16(0,3),T.setInt16(2,N.xAvgCharWidth||Y||0),N.usWeightClass=N.usWeightClass||400,T.setUint16(4,N.usWeightClass),T.setUint16(6,N.usWidthClass||5),N.fsType=N.fsType||0,T.setUint16(8,N.fsType),T.setInt16(10,s||0),T.setInt16(12,r||0),T.setInt16(14,-t*o),T.setInt16(16,o),T.setInt16(18,s),T.setInt16(20,r),T.setInt16(22,t*h),T.setInt16(24,h),T.setInt16(26,102*Y/2048),T.setInt16(28,530*Y/2048),T.setInt16(30,0),N.panose=[],N.unicodeRanges=[],K=0;K<128;K+=1)N.unicodeRanges[K]=0;return N.codes&&N.codes.forEach(function(p){N.unicodeRanges[E(p)]=1}),T.setUint32(42,parseInt(N.unicodeRanges.slice(0,32).reverse().join(""),2)),T.setUint32(46,parseInt(N.unicodeRanges.slice(32,64).reverse().join(""),2)),T.setUint32(50,parseInt(N.unicodeRanges.slice(64,96).reverse().join(""),2)),T.setUint32(54,parseInt(N.unicodeRanges.slice(96,128).reverse().join(""),2)),T.setUint16(62,64),N.italic=0,T.setUint16(64,N.usFirstCharIndex||0),T.setUint16(66,N.usLastCharIndex||0),T.setInt16(68,N.sTypoAscender||N.ascent||0),T.setInt16(70,N.sTypoDescender||N.descent||0),T.setInt16(72,N.sTypoLineGap||Math.abs(N.descent)||0),T.setUint16(74,N.usWinAscent||N.ascent||0),T.setUint16(76,N.usWinDescent||-N.descent||0),T.setUint32(78,1),N.codePageRange1=1,N.codePageRange2=0,T.setInt16(86,N.sxHeight||0),T.setInt16(88,N.sCapHeight||0),T.setUint16(92,32),T.setUint16(94,N.usMaxContext||0),N.panose=0,W},de=function(N){var W=new ArrayBuffer(4+2*N.length),T=new DataView(W),Y,K=N.length,t;for(T.setUint16(0,1),T.setUint16(2,K/2),t=4,Y=0;Y<K;Y+=2)T.setUint16(t,N[Y]),T.setUint16(t+2,N[Y+1]),t+=2;return W},Be=function(N,W){var T=[],Y,K,t,r,s,o,h=10,p=8;function b(ve,se,me){var Se=Object.create(me),ne=0,ge,Ae=String.fromCodePoint(ve.codePointAt(0));Se[Ae]||(Se[Ae]=[]),Se[Ae].push({id:N[ve],str:ve,ligaTable:P(ve,se)});var we=0;for(ge in Se)ne+=1,Se[ge].forEach(function(Fe){we+=Fe.ligaTable.byteLength}),we+=2+Se[ge].length*2;var Ee=6+2*ne,ae=4+2*ne;return{newLigaSets:Se,newLength:Ee+ae+we}}function P(ve,se){var me=Array.from(ve),Se=me.length,ne=new ArrayBuffer(2*(Se-1)+4),ge=new DataView(ne),Ae,we;for(ge.setUint16(0,se),ge.setUint16(2,Se),we=4,Ae=1;Ae<Se;Ae+=1)ge.setUint16(we,W[me[Ae]]),we+=2;return ne}function O(ve){var se=[],me=ve.length,Se=2+2*me,ne=new ArrayBuffer(Se),ge=new DataView(ne),Ae,we,Ee;for(ve.sort(function(ae,Fe){return y(Fe.str,ae.str)}),ge.setUint16(0,me),Ee=2,Ae=0;Ae<me;Ae+=1)ge.setUint16(Ee,Se),Ee+=2,we=ve[Ae].ligaTable,se[Ae+1]=we,Se+=we.byteLength;return se[0]=ne,g(se)}function S(ve){var se=[],me;for(me in ve){var Se=ve[me];se.push({key:me,set:Se,ligaSetTable:O(Se)})}se.sort(function(De,ke){return y(De.key,ke.key)});var ne=se.length,ge=new ArrayBuffer(4+2*ne),Ae=6+2*ne,we=new ArrayBuffer(Ae),Ee=new DataView(we);Ee.setUint16(0,1),Ee.setUint16(2,Ae),Ee.setUint16(4,ne);var ae=6,Fe=ge.byteLength+we.byteLength;Ee=new DataView(we);var Me=[],Pe;for(Pe=0;Pe<ne;Pe+=1)Ae=se[Pe].ligaSetTable,Me.push(Ae),Ee.setUint16(ae,Fe),ae+=2,Fe+=Ae.byteLength;for(Ee=new DataView(ge),Ee.setUint16(0,1),Ee.setUint16(2,ne),Ae=4,Pe=0;Pe<ne;Pe+=1)Ee.setUint16(Ae,W[se[Pe].key]||0),Ae+=2;return g([we,ge].concat(Me))}var I,X,z,H,Z=[],Q={},R=Object.keys(N).sort(function(ve,se){return se.length-ve.length});for(t=0;t<R.length;t+=1)r=R[t],isNaN(N[r])||(X=b(r,N[r],Q),Z.length>0?H=X.newLength:(z=2*h+p,H=z+X.newLength),H>65535?(Z.push(Q),Q=b(r,N[r],{}).newLigaSets):Q=X.newLigaSets);Z.push(Q),T=Z.map(S);var L=new ArrayBuffer(20);Y=new DataView(L),Y.setUint16(0,1),Y.setUint32(2,B("latn")),Y.setUint16(6,8),Y.setUint16(8,4),Y.setUint16(10,0),Y.setUint16(12,0),Y.setUint16(14,0),Y.setUint16(16,1),Y.setUint16(18,0);var q=new ArrayBuffer(12+2*Z.length);for(Y=new DataView(q),Y.setUint16(0,1),Y.setUint32(2,B("liga")),Y.setUint16(6,8),Y.setUint16(8,0),Y.setUint16(10,Z.length),s=12,t=0;t<Z.length;t+=1)Y.setUint16(s,t),s+=2;var _=new ArrayBuffer(2+2*Z.length);for(Y=new DataView(_),Y.setUint16(0,Z.length),s=2,t=0;t<Z.length;t+=1)Y.setUint16(s,2+2*Z.length+t*10),s+=2;var ie=[];for(t=0;t<Z.length;t+=1){var te=new ArrayBuffer(10),ye;t==0?ye=4:ye=7,Y=new DataView(te),Y.setUint16(0,ye),Y.setUint16(4,1),t==0?o=10*Z.length+8*(Z.length-1):o=10*(Z.length-t)+8*(t-1),Y.setUint16(6,o),ie.push(te)}for(length=T[0].byteLength,t=1;t<Z.length;t+=1){var Ce=new ArrayBuffer(8);Y=new DataView(Ce),Y.setUint16(0,1),Y.setUint16(2,4),Y.setUint32(4,length+8*(Z.length-t)),ie.push(Ce),length+=T[t].byteLength}K=new ArrayBuffer(10),s=10,Y=new DataView(K),Y.setUint32(0,65536),Y.setUint16(4,s),s+=L.byteLength,Y.setUint16(6,s),s+=q.byteLength,Y.setUint16(8,s);var pe=[K,L,q,_].concat(ie).concat(T);return g(pe)},$=function(N){var W=new ArrayBuffer(20),T=new ArrayBuffer(14),Y=new ArrayBuffer(12),K,t,r,s,o,h,p=[],b=[],P;P={},s=0,N.forEach(function(S){isNaN(P[S.left])&&(P[S.left]=s,s+=1,p.push({left:S.left,rights:[]})),p[P[S.left]].rights.push({id:S.right,value:S.value})}),p.sort(function(S,I){return S.left-I.left});function O(S){var I=S.rights,X=new ArrayBuffer(2+I.length*4),z=new DataView(X),H,Z;for(I.sort(function(Q,R){return Q.id-R.id}),z.setUint16(0,I.length),Z=2,H=0;H<I.length;H+=1)z.setUint16(Z,I[H].id),Z+=2,z.setInt16(Z,I[H].value),Z+=2;return X}for(t=new DataView(W),t.setUint16(0,1),t.setUint32(2,B("latn")),t.setUint16(6,8),t.setUint16(8,4),t.setUint16(10,0),t.setUint16(12,0),t.setUint16(14,65535),t.setUint16(16,1),t.setUint16(18,0),t=new DataView(T),t.setUint16(0,1),t.setUint32(2,B("kern")),t.setUint16(6,8),t.setUint16(8,0),t.setUint16(10,1),t.setUint16(12,0),t=new DataView(Y),t.setUint16(0,1),t.setUint16(2,4),t.setUint16(4,2),t.setUint16(8,1),t.setUint16(10,8),P=10+2*p.length,h=new ArrayBuffer(P),t=new DataView(h),t.setUint16(0,1),t.setUint16(2,P),t.setUint16(4,4),t.setUint16(6,0),t.setUint16(8,p.length),K=new ArrayBuffer(4+2*p.length),t=new DataView(K),t.setUint16(0,1),t.setUint16(2,p.length),P=4,s=0;s<p.length;s+=1)t.setUint16(P,p[s].left||0),P+=2;for(length=K.byteLength+h.byteLength,o=10,t=new DataView(h),s=0;s<p.length;s+=1)P=O(p[s]),b.push(P),t.setUint16(o,length),o+=2,length+=P.byteLength;return r=new ArrayBuffer(10),o=10,t=new DataView(r),t.setUint32(0,65536),t.setUint16(4,o),o+=W.byteLength,t.setUint16(6,o),o+=T.byteLength,t.setUint16(8,o),g([r,W,T,Y,h,K].concat(b))},oe=function(N){var W,T,Y,K,t,r=N.tableDirectory.length,s,o=[],h,p;for(t=new ArrayBuffer(44),Y=new DataView(t),Y.setUint32(0,2001684038),N.truetype?Y.setUint32(4,65536):Y.setUint32(4,B("OTTO")),Y.setUint16(12,r),Y.setUint32(16,N.sfntSize),Y.setUint16(20,N.majorVersion||0),Y.setUint16(22,N.minorVersion||0),s=44+r*20,K=0;K<r;K+=1)W=new ArrayBuffer(20),T=new DataView(W),h=new DataView(N.tableDirectory[K]),T.setUint32(0,h.getUint32(0)),T.setUint32(4,s),s+=N.subTables[K].byteLength,p=h.getUint32(12),T.setUint32(8,p),T.setUint32(12,p),T.setUint32(16,h.getUint32(4)),o.push(W);return o=g(o),p=g(N.subTables),Y.setUint32(8,t.byteLength+o.byteLength+p.byteLength),g([t,o,p])},ee=function(N){var W,T,Y,K=!0,t,r;function s(o){var h=new ArrayBuffer(4),p=[],b=new DataView(h);return b.setUint16(2,o.length*2,!0),p.push(h),p.push(k(o,2,!0)),g(p)}for(W=new ArrayBuffer(80),T=new DataView(W),T.setUint32(4,N.ttf.byteLength,K),T.setUint32(8,131073,K),t=16,r=N.os2.panose,Y=0;Y<r.length;Y+=1)T.setUint8(t,r[Y],K),t+=4;return T.setUint8(26,1,K),T.setUint8(27,N.os2.italic,K),T.setUint32(28,N.os2.usWeightClass,K),T.setUint16(32,N.os2.fsType,K),T.setUint16(34,20556,K),T.setUint32(36,N.os2.unicodeRange1,K),T.setUint32(40,N.os2.unicodeRange2,K),T.setUint32(44,N.os2.unicodeRange3,K),T.setUint32(48,N.os2.unicodeRange4,K),T.setUint32(52,N.os2.codePageRange1,K),T.setUint32(56,N.os2.codePageRange2,K),T.setUint32(60,N.checkSumAdjustment,K),W=g([W,s(N.name.fontFamily),s(N.name.subFamily),s(N.name.version),s(N.name.fullName),new ArrayBuffer(4),N.ttf]),T=new DataView(W),T.setUint32(0,W.byteLength,K),W},ce=function(){var N,W,T,Y,K,t=[],r,s,o,h,p=[],b,P,O;for(W=n(' horiz-adv-x="{{advX}}"'),O=n(' data-tags="{{tags}}"'),h=n(' glyph-name="{{name}}"'),T=n('<glyph unicode="{{code}}"{{tags}}{{advX}} d="{{d}}" />'),b=n(['<?xml version="1.0" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >','<svg xmlns="http://www.w3.org/2000/svg">',"<metadata>","<json>","<![CDATA[","{{metadata}}","]]>","</json>","</metadata>","<defs>",'<font id="{{fontId}}" horiz-adv-x="{{defaultAdvX}}">','<font-face units-per-em="{{unitsPerEm}}" ascent="{{ascent}}" descent="{{descent}}" />','<missing-glyph horiz-adv-x="{{defaultAdvX}}" />',"{{glyphs}}","</font></defs></svg>"].join("\n")),r=v.length,Y=0;Y<r;Y+=1)if(N=v[Y].advX,!isNaN(N)&&N!==x?N=W.fillup({advX:N}):N="",P=v[Y].tags,!P||!P.join||!P.join("")?P="":P=O.fillup({tags:P.join(", ")}),o=v[Y].name,o&&(o=h.fillup({name:o}),P?P=o+P:P=o),(v[Y].d||v[Y].code===32)&&(p.push(T.fillup({code:"&#x"+v[Y].code.toString(16)+";",d:v[Y].d,advX:N,tags:P})),v[Y].ligatures))for(K=0,s=v[Y].ligatures.length;K<s;K+=1)t.push({d:v[Y].d,liga:v[Y].ligatures[K],advX:N,tags:P});for(t.sort(function(S,I){return y(I.liga,S.liga)}),K=0,s=t.length;K<s;K+=1)t[K]=T.fillup({code:t[K].liga,d:t[K].d,advX:t[K].advX,tags:t[K].tags});return p=p.concat(t),p=p.join("\n"),b.fillup({metadata:JSON.stringify(d,null,"	"),fontId:d.fontId,defaultAdvX:x,unitsPerEm:w,ascent:l,descent:u,glyphs:p})},xe=function(N){function W(z,H){var Z,Q;return z=Math.round(z),z>=-107&&z<=107&&(!H||H===1)?(Z=new Uint8Array(1),z+=139,Z[0]=z,Z.buffer):z>=108&&z<=1131&&(!H||H===2)?(Z=new Uint8Array(2),z-=108,Z[0]=Math.floor(z/256)+247,Z[1]=Math.floor(z%256),Z.buffer):z>=-1131&&z<=-108&&(!H||H===2)?(Z=new Uint8Array(2),z+=108,Z[0]=Math.floor(-z/256)+251,Z[1]=Math.floor(-z%256),Z.buffer):z>=-32768&&z<=32767&&(!H||H===3)?(Z=new ArrayBuffer(3),Q=new DataView(Z),Q.setUint8(0,28),Q.setInt16(1,z),Z):(Z=new ArrayBuffer(5),Q=new DataView(Z),Q.setUint8(0,29),Q.setInt32(1,z),Z)}function T(z){var H,Z,Q,R=[1,14],L;for(z=z.toFixed(6).replace(/\.0+$/,"").replace(/(\.[^0]+)0+$/,"$1").toUpperCase(),Q=0;Q<z.length;Q+=1)L=z[Q],L==="."?R.push(10):L==="E"?z[Q+1]==="-"?(R.push(12),Q+=1):(R.push(11),z[Q+1]==="+"&&(Q+=1)):L==="-"?R.push(14):R.push(parseInt(L,10));for(R.push(15),R.length%2&&R.push(15),H=new ArrayBuffer(R.length/2),Z=new DataView(H),Q=0;Q<R.length;Q+=2)Z.setUint8(Q/2,R[Q]*16+R[Q+1]);return H}function Y(z){return z%1?T(z):W(z)}function K(z){var H,Z,Q,R,L=z.length,q,_=[1],ie;for(Q=new ArrayBuffer(2),H=new DataView(Q),H.setUint16(0,L),Z=0;Z<L;Z+=1)_.push(_[Z]+z[Z].byteLength);for(L=_.length,q=_[L-1],q<256?(R="setUint8",q=1):q<65536?(R="setUint16",q=2):(R="setUint32",q=4),ie=new ArrayBuffer(L*q),H=new DataView(ie),Z=0;Z<L;Z+=1)H[R](Z*q,_[Z]);return Q=g([Q,new Uint8Array([q]).buffer,ie,g(z)]),Q}var t,r,s,o=new ArrayBuffer(2),h=new ArrayBuffer(4),p=new ArrayBuffer(5),b=391,P,O,S,I,X=new ArrayBuffer(7);for(s=new DataView(h),s.setUint8(0,1),s.setUint8(2,4),s.setUint8(3,4),s=new DataView(p),s.setUint16(0,1),s.setUint8(2,1),s.setUint8(3,1),s.setUint8(4,N.psName.length+1),p=g([p,k(N.psName,1)]),s=new DataView(X),s.setUint16(0,1),s.setUint8(2,2),s.setUint16(3,1),I=1/N.emSize,X=g([X,W(b+1),new Uint8Array([2]).buffer,W(b),new Uint8Array([3]).buffer,W(388),new Uint8Array([4]).buffer,Y(I),new Uint8Array([139,139]).buffer,Y(I),new Uint8Array([139,139]).buffer,new Uint8Array([12,7]).buffer,Y(N.bbox.xMin),Y(N.bbox.yMin),Y(N.bbox.xMax),Y(N.bbox.yMax),new Uint8Array([5]).buffer]),S=[k(N.fontFamily,1),k(N.fullName,1)],P=0;P<v.length;P+=1)S.push(k("u"+v[P].code.toString(16).toUpperCase(),1));return S=K(S),r=new ArrayBuffer(5),s=new DataView(r),s.setUint8(0,2),s.setUint16(1,b+2),s.setUint16(3,N.glyphs.length-1),function(){var z,H,Z,Q=0,R,L=[g([W(-N.defaultAdvX),new Uint8Array([14]).buffer])],q,_,ie;for(R=N.glyphs,q=0;q<R.length;q+=1){for(H=[],_=R[q].svgPath.getCFFPath(),R[q].advX!==N.defaultAdvX&&H.push(W(R[q].advX-N.defaultAdvX)),ie=0;ie<_.length;ie+=1)Z=_[ie].cmd,z=_[ie].args,Z==="M"?(H.push(W(z[0])),H.push(W(z[1])),H.push(new Uint8Array([21]))):Z==="L"?(H.push(W(z[0])),H.push(W(z[1])),Q+=2,(Q>47||ie+1<_.length&&_[ie+1].cmd!=="L")&&(H.push(new Uint8Array([5])),Q=0)):Z==="C"&&(H=H.concat([W(z[0]),W(z[1]),W(z[2]),W(z[3]),W(z[4]),W(z[5])]),Q+=6,(Q>47||ie+1<_.length&&_[ie+1].cmd!=="C")&&(H.push(new Uint8Array([8])),Q=0));H.push(new Uint8Array([14])),L.push(g(H))}t=K(L)}(),O=g([W(N.defaultAdvX),new Uint8Array([20]).buffer,W(N.defaultAdvX),new Uint8Array([21]).buffer,W(0),new Uint8Array([12,10]).buffer]),function(){var z,H,Z=g([h,p,X,S,o,r]);z=Z.byteLength+20+3,H=Z.byteLength+t.byteLength+20+3,X=g([X,W(Z.byteLength-r.byteLength+23,5),new Uint8Array([15]).buffer,W(z,5),new Uint8Array([17]).buffer,W(O.byteLength,5),W(H,5),new Uint8Array([18]).buffer])}(),s=new DataView(X),s.setUint16(5,X.byteLength-6),g([h,p,X,S,o,r,t,O])},be=function(){var N="Font generated by IcoMoon.";d||(d={}),!isNaN(d.majorVersion)&&!isNaN(d.minorVersion)&&(d.version=d.majorVersion+"."+d.minorVersion),d.version=d.version&&d.version.match(/\d{1,5}\.\d{1,5}/)||"1.0",isNaN(d.majorVersion)&&(d.majorVersion=Number(d.version.match(/(\d+)\./)[1])),isNaN(d.minorVersion)&&(d.majorVersion=Number(d.version.match(/\.(\d+)/)[1])),d.version="Version "+d.version,d.fontFamily=d.fontFamily||"icomoon",d.fontId=d.fontId||d.fontFamily,d.psName=d.psName||d.fontFamily,d.subFamily=d.subFamily||"Regular",d.fullName=d.fontFamily,/regular/i.test(d.subFamily)||(d.fullName+=" "+d.subFamily),d.description?d.description.indexOf(N)===-1&&(d.description=d.description+"\n"+N):d.description=N};function ue(N){var W,T=N.outlines==="truetype"||N.woff==="truetype",Y=x,K={},t=[],r,s,o,h,p=[],b=0,P=[0],O=[{aw:x,lsb:0}],S,I,X=0,z=!0,H,Z={},Q,R={},L={},q,_,ie,te=0,ye=0,Ce,pe,ve,se={advXSum:0,advXCount:0},me=0,Se,ne,ge={},Ae=["CFF ","OS/2","cmap","gasp","glyf","head","hhea","hmtx","loca","maxp","name","post"],we,Ee,ae,Fe,Me;for(pe=v.length,S=0;S<pe;S+=1)for(ae=v[S].code,isNaN(ae)&&(ae=S+59648,v[S].code=ae),t.push(ae),ae=v[S].ligatures,q=ae&&ae.length||0,!Q&&ae&&(Q=!0),I=0;I<q;I+=1)typeof ae[I]=="string"&&ae[I].length>1&&(Z[ae[I]]=v[S].code);for(we in Z)Z.hasOwnProperty(we)&&Array.from(we).forEach(function(Pe){ae=Pe.codePointAt(0),t.indexOf(ae)===-1&&(v.push({code:ae,advX:0}),t.push(ae))});v.sort(function(Pe,De){return Pe.code-De.code}),t.sort(function(Pe,De){return Pe-De});for(we in Z)Z.hasOwnProperty(we)&&(Z[we]=t.indexOf(Z[we])+1,Array.from(we).forEach(function(Pe){L[Pe]=t.indexOf(Pe.codePointAt(0))+1}));for(a&&a.length&&(a=a.map(function(Pe){var De=t.indexOf(Pe.left),ke=t.indexOf(Pe.right);return De===-1||ke===-1?!1:{left:De+1,right:ke+1,value:Pe.value}}).filter(function(Pe){return Pe!==!1})),pe=v.length,S=0;S<pe;S+=1)v[S].contours||(ne=v[S].svgPath,ne?(ne.viewBox&&ne.viewBox.height!==w&&(ae=w/ne.viewBox.height,ne.scale(ae)),v[S].d=ne.transform({a:1,d:-1,f:l}).getPathData(),v[S].contours=ne.getTTFContours()):(v[S].contours=[[{x:0,y:0},{x:0,y:0},{x:0,y:0}]],v[S].svgPath=e())),ae=C(v[S].contours,{xMin:0,yMin:u,yMax:l}),te=f(te,ae.pointsCount),ye=f(ye,ae.contourCount),p.push(ae.buffer),P.push(b/2),b+=ae.buffer.byteLength,ae=ae.bbox,v[S].code===120&&(se.sxHeight=ae.yMax),v[S].code===72&&(se.sCapHeight=ae.yMax),K.xMin=m(K.xMin,ae.xMin),K.yMin=m(K.yMin,ae.yMin),K.xMax=f(K.xMax,ae.xMax),K.yMax=f(K.yMax,ae.yMax),_=ae.xMin,ie=m(_,ie),W=v[S].advX,isNaN(W)&&v[S].svgPath&&(W=v[S].svgPath.viewBox,W&&(W=W.width,v[S].advX=W)),!isNaN(W)&&W!==x?(z&&pe>1&&(z=!1),Y=f(W,Y)):W=x,W&&(se.advXSum+=W,se.advXCount+=1),Me=f(Me,_+ae.xMax-ae.xMin),ae=W-ae.xMax,Ce=m(Ce,ae),O.push({aw:W,lsb:_});if(pe+=1,P.push(b/2),N.woff&&!T&&(ge["CFF "]=xe({psName:d.psName,fontFamily:d.fontFamily,fullName:d.fullName,ascent:l,descent:u,bbox:{xMin:K.xMin<0?K.xMin:0,yMin:m(u,K.yMin),xMax:f(Y,K.xMax),yMax:f(l,K.yMax)},defaultAdvX:x,emSize:w,glyphs:v}),ge.maxp2=U({numGlyphs:pe,maxPoints:te,maxContours:ye,cff:!0})),P[P.length-1]>65535&&(X=1),(N.ttf||N.eot||T)&&(ge.glyf=g(p),ge.loca=he(P,X),ge.maxp=U({numGlyphs:pe,maxPoints:te,maxContours:ye})),ge.cmap=D(t),ge.gasp=de([65535,15]),ge.head=J({xMin:K.xMin,yMin:K.yMin,xMax:K.xMax,yMax:K.yMax,unitsPerEm:w,indexToLocFormat:X,majorVersion:d.majorVersion,minorVersion:d.minorVersion}),ge.hhea=G({ascent:l,descent:u,advanceWidthMax:Y,numOfLongHorMetrics:O.length,minRightSideBearing:Ce,minLeftSideBearing:ie,xMaxExtent:Me}),ge.hmtx=re(O),ge.name=j(d),Q&&(Ae.splice(1,0,"GSUB"),ge.GSUB=Be(Z,L)),a&&a.length&&(Ae.splice(1,0,"GPOS"),ge.GPOS=$(a)),s=t[0],s=s>65535?65535:s,H=t[t.length-1],se={italicAngle:0,emSize:w,usFirstCharIndex:s,usLastCharIndex:H>65535?65535:H,ascent:l,descent:u,codes:t,xAvgCharWidth:Math.round(se.advXSum/se.advXCount),sxHeight:se.sxHeight||0,sCapHeight:se.sCapHeight||0},ge["OS/2"]=fe(se),ge.post=V({isFixedPitch:z}),q=Ae.length,N.ttf||N.eot||T){for(ve=q-1,o=[F(ve)],Ee=[],Se=[],me=o[0].byteLength+ve*16,S=0;S<q;S+=1)Ae[S]!=="CFF "&&(Ae[S]==="head"&&(I=Se.length),ae=ge[Ae[S]],ae={buffer:ae,origLength:ae.byteLength},ae.buffer=g([ae.buffer],4),Se.push(ae.buffer),Ee.push(le({tag:B(Ae[S]),checksum:M(ae.buffer),offset:me,length:ae.origLength}).buffer),me+=ae.buffer.byteLength);o=o.concat(Ee),ae=M(g(o.concat(Se))),ae=2981146554-ae,new DataView(Se[I]).setUint32(8,ae),o=g(o.concat(Se))}if(N.woff&&!T){for(ve=q-2,h=[F(ve,!0)],Ee=[],Se=[],me=h[0].byteLength+ve*16,S=0;S<q;S+=1)ae=Ae[S],ae!=="glyf"&&ae!=="loca"&&(ae==="maxp"?ae="maxp2":ae==="head"&&(I=Se.length),ae=ge[ae],ae={buffer:ae,origLength:ae.byteLength},ae.buffer=g([ae.buffer],4),Se.push(ae.buffer),Ee.push(le({tag:B(Ae[S]),checksum:M(ae.buffer),offset:me,length:ae.origLength}).buffer),me+=ae.buffer.byteLength);h=h.concat(Ee),ae=M(g(h.concat(Se))),ae=2981146554-ae,new DataView(Se[I]).setUint32(8,ae),h=g(h.concat(Se))}return N.ttf&&(R.ttf=o),N.eot&&(r=ee({ttf:o,checkSumAdjustment:ae,name:d,os2:se}),R.eot=r),N.woff&&(Fe=oe({tableDirectory:Ee,subTables:Se,sfntSize:T?o.byteLength:h.byteLength,majorVersion:d.majorVersion,minorVersion:d.minorVersion,truetype:T}),R.woff=Fe),N.svg&&(R.svg=ce()),R}return function(N){var W={};return W.set=function(T){return v=T.glyphs,l=T.ascent,u=T.descent,w=T.unitsPerEm,x=T.defaultAdvX,d=T.metadata?JSON.parse(JSON.stringify(T.metadata)):{},a=T.kerningPairs,be(),this},W.generate=function(T){return T||(T={woff:!0,ttf:!0,eot:!0,svg:!0}),ue(T)},N&&W.set(N),W}}]);angular.module("file",["scriptLoader"]).factory("fileSaver",["scriptLoader","$q","$http",function(e,n,v){var a=function(f,c){this.files={},this.root="",f&&this.load(f,c)};a.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK\x07",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\x07\b"},a.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},a.prototype=function(){var f=function(E,F,C){this.name=E,this.data=F,this.options=C};f.prototype={asText:function(){var E=this.data;return E===null||typeof E=="undefined"?"":(this.options.base64&&(E=l.decode(E)),this.options.binary&&(E=a.prototype.utf8decode(E)),E)},asBinary:function(){var E=this.data;return E===null||typeof E=="undefined"?"":(this.options.base64&&(E=l.decode(E)),this.options.binary||(E=a.prototype.utf8encode(E)),E)},asUint8Array:function(){return a.utils.string2Uint8Array(this.asBinary())},asArrayBuffer:function(){return a.utils.string2Uint8Array(this.asBinary()).buffer}};var c=function(E,F){var C="",D;for(D=0;D<F;D++)C+=String.fromCharCode(E&255),E=E>>>8;return C},y=function(){var E={},F,C;for(F=0;F<arguments.length;F++)for(C in arguments[F])arguments[F].hasOwnProperty(C)&&typeof E[C]=="undefined"&&(E[C]=arguments[F][C]);return E},g=function(E){return E=E||{},E.base64===!0&&E.binary==null&&(E.binary=!0),E=y(E,a.defaults),E.date=E.date||new Date,E.compression!==null&&(E.compression=E.compression.toUpperCase()),E},k=function(E,F,C){var D=B(E);if(D&&A.call(this,D),C=g(C),C.dir||F===null||typeof F=="undefined")C.base64=!1,C.binary=!1,F=null;else if(a.support.uint8array&&F instanceof Uint8Array)C.base64=!1,C.binary=!0,F=a.utils.uint8Array2String(F);else if(a.support.arraybuffer&&F instanceof ArrayBuffer){C.base64=!1,C.binary=!0;var U=new Uint8Array(F);F=a.utils.uint8Array2String(U)}else C.binary&&!C.base64&&(C.optimizedBinaryString!==!0&&(F=a.utils.string2binary(F)),delete C.optimizedBinaryString);return this.files[E]=new f(E,F,C)},B=function(E){E.slice(-1)=="/"&&(E=E.substring(0,E.length-1));var F=E.lastIndexOf("/");return F>0?E.substring(0,F):""},A=function(E){if(E.slice(-1)!="/"&&(E+="/"),!this.files[E]){var F=B(E);F&&A.call(this,F),k.call(this,E,null,{dir:!0})}return this.files[E]},M=function(E,F,C){var D=F!==E.name,U=E.asBinary(),V=E.options,J,j;J=V.date.getHours(),J=J<<6,J=J|V.date.getMinutes(),J=J<<5,J=J|V.date.getSeconds()/2,j=V.date.getFullYear()-1980,j=j<<4,j=j|V.date.getMonth()+1,j=j<<5,j=j|V.date.getDate();var G=U!==null&&U.length!==0;if(C=V.compression||C,!a.compressions[C])throw C+" is not a valid compression method !";var re=a.compressions[C],le=G?re.compress(U):"",he="";return he+="\n\0",he+=D?"\0\b":"\0\0",he+=G?re.magic:a.compressions.STORE.magic,he+=c(J,2),he+=c(j,2),he+=G?c(this.crc32(U),4):"\0\0\0\0",he+=G?c(le.length,4):"\0\0\0\0",he+=G?c(U.length,4):"\0\0\0\0",he+=c(F.length,2),he+="\0\0",{header:he,compressedData:le}};return{filter:function(E){var F=[],C,D,U,V;for(C in this.files)this.files.hasOwnProperty(C)&&(U=this.files[C],V=new f(U.name,U.data,y(U.options)),D=C.slice(this.root.length,C.length),C.slice(0,this.root.length)===this.root&&E(D,V)&&F.push(V));return F},file:function(E,F,C){if(arguments.length===1)if(E instanceof RegExp){var D=E;return this.filter(function(U,V){return!V.options.dir&&D.test(U)})}else return this.filter(function(U,V){return!V.options.dir&&U===E})[0]||null;else E=this.root+E,k.call(this,E,F,C);return this},folder:function(E){if(!E)return this;if(E instanceof RegExp)return this.filter(function(U,V){return V.options.dir&&E.test(U)});var F=this.root+E,C=A.call(this,F),D=this.clone();return D.root=C.name,D},remove:function(E){E=this.root+E;var F=this.files[E];if(F||(E.slice(-1)!="/"&&(E+="/"),F=this.files[E]),F)if(!F.options.dir)delete this.files[E];else for(var C=this.filter(function(U,V){return V.name.slice(0,E.length)===E}),D=0;D<C.length;D++)delete this.files[C[D].name];return this},generate:function(E){E=y(E||{},{base64:!0,compression:"STORE",type:"base64"});var F=E.compression.toUpperCase();if(!a.compressions[F])throw F+" is not a valid compression method !";var C=[],D=[],U=0;for(var V in this.files)if(this.files.hasOwnProperty(V)){var J=this.files[V],j=this.utf8encode(J.name),G="",re="",le=M.call(this,J,j,F);G=a.signature.LOCAL_FILE_HEADER+le.header+j+le.compressedData,re=a.signature.CENTRAL_FILE_HEADER+"\0"+le.header+"\0\0\0\0\0\0"+(this.files[V].options.dir===!0?"\0\0\0":"\0\0\0\0")+c(U,4)+j,U+=G.length,D.push(G),C.push(re)}var he=D.join(""),fe=C.join(""),de="";de=a.signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(D.length,2)+c(D.length,2)+c(fe.length,4)+c(he.length,4)+"\0\0";var Be=he+fe+de;switch(E.type.toLowerCase()){case"uint8array":return a.utils.string2Uint8Array(Be);case"arraybuffer":return a.utils.string2Uint8Array(Be).buffer;case"blob":return a.utils.string2Blob(Be);case"base64":return E.base64?l.encode(Be):Be;default:return Be}},crc32:function(E,F){if(E===""||typeof E=="undefined")return 0;var C=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof F=="undefined"&&(F=0);var D=0,U=0;F=F^-1;for(var V=0,J=E.length;V<J;V++)U=(F^E.charCodeAt(V))&255,D=C[U],F=F>>>8^D;return F^-1},clone:function(){var E=new a;for(var F in this)typeof this[F]!="function"&&(E[F]=this[F]);return E},utf8encode:function(E){for(var F="",C=0;C<E.length;C++){var D=E.charCodeAt(C);D<128?F+=String.fromCharCode(D):D>127&&D<2048?(F+=String.fromCharCode(D>>6|192),F+=String.fromCharCode(D&63|128)):(F+=String.fromCharCode(D>>12|224),F+=String.fromCharCode(D>>6&63|128),F+=String.fromCharCode(D&63|128))}return F},utf8decode:function(E){for(var F="",C=0,D=0,U=0,V=0,J=0;C<E.length;)D=E.charCodeAt(C),D<128?(F+=String.fromCharCode(D),C++):D>191&&D<224?(V=E.charCodeAt(C+1),F+=String.fromCharCode((D&31)<<6|V&63),C+=2):(V=E.charCodeAt(C+1),J=E.charCodeAt(C+2),F+=String.fromCharCode((D&15)<<12|(V&63)<<6|J&63),C+=3);return F}}}(),a.compressions={STORE:{magic:"\0\0",compress:function(f){return f},uncompress:function(f){return f}}},a.support={arraybuffer:function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"}(),uint8array:function(){return typeof Uint8Array!="undefined"}(),blob:function(){if(typeof ArrayBuffer=="undefined")return!1;var f=new ArrayBuffer(0);try{return new Blob([f],{type:"application/zip"}).size===0}catch(y){}try{var c=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return c.append(f),c.getBlob("application/zip").size===0}catch(y){}return!1}()},a.utils={string2binary:function(f){for(var c="",y=0;y<f.length;y++)c+=String.fromCharCode(f.charCodeAt(y)&255);return c},string2Uint8Array:function(f){if(!a.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var c=new ArrayBuffer(f.length),y=new Uint8Array(c),g=0;g<f.length;g++)y[g]=f.charCodeAt(g);return y},uint8Array2String:function(f){if(!a.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var c="",y=0;y<f.length;y++)c+=String.fromCharCode(f[y]);return c},string2Blob:function(f){if(!a.support.blob)throw new Error("Blob is not supported by this browser");var c=a.utils.string2Uint8Array(f).buffer;try{return new Blob([c],{type:"application/zip"})}catch(g){}try{var y=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return y.append(c),y.getBlob("application/zip")}catch(g){}throw new Error("Bug : can't construct the Blob.")}};var l=function(){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(c,y){for(var g="",k,B,A,M,E,F,C,D=0;D<c.length;)k=c.charCodeAt(D++),B=c.charCodeAt(D++),A=c.charCodeAt(D++),M=k>>2,E=(k&3)<<4|B>>4,F=(B&15)<<2|A>>6,C=A&63,isNaN(B)?F=C=64:isNaN(A)&&(C=64),g=g+f.charAt(M)+f.charAt(E)+f.charAt(F)+f.charAt(C);return g},decode:function(c,y){var g="",k,B,A,M,E,F,C,D=0;for(c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");D<c.length;)M=f.indexOf(c.charAt(D++)),E=f.indexOf(c.charAt(D++)),F=f.indexOf(c.charAt(D++)),C=f.indexOf(c.charAt(D++)),k=M<<2|E>>4,B=(E&15)<<4|F>>2,A=(F&3)<<6|C,g=g+String.fromCharCode(k),F!=64&&(g=g+String.fromCharCode(B)),C!=64&&(g=g+String.fromCharCode(A));return g}}}(),u=Blob&&Blob.constructor&&"download"in document.createElement("a")||navigator.msSaveBlob,w=n.defer(),x=w.promise;u&&(window.saveAs||navigator.msSaveBlob?w.resolve():x=e.load("bower_components/file-saver/dist/FileSaver.min.js"));function d(f,c){var y=n.defer();return u?x.then(function(){var g=new Blob([c]);g.encoding="base64",navigator.msSaveBlob?(navigator.msSaveBlob(g,f),y.resolve()):(saveAs(g,f),y.resolve())}):y.reject(),y.promise}function m(f){var c=0,y=[],g,k;function B(A){var M,E,F;0<=A&&A<=127?y.push(A):128<=A&&A<=2047?(M=A>>>6,y.push(192+M),y.push(128+(A&63))):2048<=A&&A<=65535?(M=A>>>6,E=M>>>6,y.push(224+E),y.push(128+(M&63)),y.push(128+(A&63))):(M=A>>>6,E=M>>>6,F=E>>>6,y.push(240+F),y.push(128+(E&63)),y.push(128+(M&63)),y.push(128+(A&63)))}for(;c<f.length;)g=f[c].charCodeAt(0),k=f[c+1],k!==void 0&&(k=k.charCodeAt(0)),55296<=g&&g<=56319&&k&&56320<=k&&k<=57343?(B((g-55296)*1024+k-56320+65536),c+=1):B(g),c+=1;return new Uint8Array(y).buffer}return function(){var f=new a;return{addUnicodeString:function(c,y){return f.file(c,m(y)),this},add:function(c,y,g){return f.file(c,y,g),this},get:function(c){return f.file(c).data},save:function(c,y){return y?d(c,y):d(c,this.getArrayBuffer())},getArrayBuffer:function(){return f.generate({type:"arraybuffer"})}}}}]);angular.module("moonui",["color"]).filter("zpad",function(){return function(e,n){var v=/\-/.test(e);if(n=parseInt(n,10),isNaN(n))return e;e=String(e);var a=e.replace(/\.|\-/g,"").length,l;for(l=0;l<n-a;l+=1)e="0"+e;return v&&(e="-"+e.replace(/\-/g,"")),e}}).directive("miEditable",function(){return{priority:50,require:"ngModel",link:function(e,n,v,a){n.attr("contenteditable",!0),n.bind("input",function(l){e.$apply(function(){var u=n.text(),w=u.replace(/[<>]/g,"");u!==w&&(l.target.innerHTML=w)})}),n.bind("blur",function(){e.$apply(function(){n.html(n.text()),a.$setViewValue(n.text())})}),e.$watch(function(){return a.$viewValue},function(){n.html(a.$viewValue)})}}}).directive("miPopup",function(){return{restrict:"A",require:"^?miAbsorbClicks",link:function(e,n,v,a){var l,u=angular.element(n[0]).next(),w,x=function(){u.attr("style","opacity: 0"),setTimeout(function(){u.addClass("hidden"),u.removeAttr("style")},500)},d=function(){u.removeClass("hidden"),l=!0},m=function(){clearTimeout(w),w=setTimeout(function(){l||x(),l=!1},10)};a&&a.addCallback&&a.addCallback(m),angular.element(document).bind("click",m),x(),u.bind("click",function(f){var c=f.target.tagName.toUpperCase();f.stopPropagation(),(c==="A"||c==="BUTTON"||c==="I")&&(x(),f.target.tagName.toUpperCase()!=="A"&&f.preventDefault())}),v.miPopup==="focus"?function(){var f,c,y,g;f=n.find("input"),f.length||(f=n),f.bind("focus",d),f.bind("click",function(){l||(u.toggleClass("hidden"),l=!0)}),f.bind("blur",function(k){var B,A,M=k.relatedTarget;if(!M){l&&x();return}if(g||function(){var E,F=[],C,D,U;for(g=u.find("button"),U=g.length,C=0;C<U;C+=1)F[C]=g[C];for(E=u.find("a"),U+=E.length,C=g.length,D=0;C<U;C+=1,D+=1)F[C]=E[D];g=F.filter(function(V){return V.offsetParent!==null})}(),A=g.length,c||(c=g[0]),y||(y=g[A-1],angular.element(y).bind("blur",function(E){var F=E.relatedTarget;F!==g[A-2]&&F!==c&&x()})),g){for(B=0;B<A;B+=1)if(M===g[B])return;B===A&&x()}})}():n.bind("click",function(){u.toggleClass("hidden"),l=!0}),n.bind("keydown",function(f){f.which===27?x():f.which===13&&f.target.type==="text"&&u.addClass("hidden")})}}}).directive("miNumber",["$filter",function(e){return{restrict:"E",scope:{radix:"&",min:"&",max:"&",def:"&",zpad:"&",validator:"&",modelVal:"=model"},template:'<input type="text" ng-model="viewVal" />',link:function(n,v,a){var l=e("zpad"),u=Number(n.radix())||10,w=Number(n.min()),x=Number(n.max()),d=Number(n.zpad())||0,m=!1,f=Number(n.def())||0,c=v.children("input"),y=u===10,g=a.invalidClass,k,B=n.validator&&n.validator(),A,M;u<2&&(u=2);var E=function(F,C,D){var U=!1,V=n.viewVal;if(y)try{V=n.$eval(n.viewVal)}catch(J){V=f}else V=parseInt(V,u);isNaN(V)&&(D?(U=!0,V=n.viewVal):V=f),!U&&!isNaN(F)&&(V+=parseInt(F,10)),!isNaN(x)&&V>x?D?U=!0:V=x:!isNaN(w)&&V<w&&(D?U=!0:V=w),!U&&B&&(B(V,f)||(D?U=!0:V=f)),U&&g?(c.addClass(g),c[0].setCustomValidity("invalid")):g&&(c.removeClass(g),c[0].setCustomValidity("")),n.$apply(function(){n.viewVal=l(V.toString(u),d),a.charInput&&!U&&A.val(String.fromCodePoint(V))}),D||(isNaN(C)?n.$apply(function(){n.modelVal=f=V,k=setTimeout(function(){n.modelVal!==V&&n.$apply(function(){n.modelVal=f=V})},300)}):(clearTimeout(k),k=setTimeout(function(){n.$apply(function(){n.modelVal=f=V})},C)))};c.bind("keydown",function(F){var C;F.which===40?(C=-1,F.preventDefault()):F.which===38&&(C=1,F.preventDefault()),F.shiftKey&&(C*=u),C&&E(C,0,g)}).bind("change",function(){E()}).bind("focus",function(){m=!0}).bind("blur",function(){m=!1,g&&E()}).bind("mousewheel",function(F){if(F.stopPropagation(),!!m){var C=F.wheelDeltaY>0?1:-1;F.shiftKey&&(C*=u),F.preventDefault(),E(C,500,g)}}).bind("input",function(){g&&E(NaN,0,g)}),isNaN(n.modelVal)||(f=n.modelVal),n.modelVal=f,n.viewVal=l(f,d),n.$watch("modelVal",function(F){isNaN(F)||(n.viewVal=l(F.toString(u),d),a.charInput&&A.val(String.fromCodePoint(F)),f=F)}),a.charInput&&(A=angular.element('<input type="text" maxlength="2" />'),A.bind("keydown",function(F){(F.which===13||F.which===27)&&(F.target.blur(),F.preventDefault())}),A.val(String.fromCodePoint(f)),M=function(F){B(F,f)&&(n.$apply(function(){f=n.modelVal=F,n.viewVal=l(F.toString(u),d)}),A[0].setCustomValidity(""),g&&A.removeClass(g))},A.bind("input",function(){var F;F=A.val().codePointAt(0),document.activeElement===A[0]&&B&&(F&&B(F,f)?M(F):(A[0].setCustomValidity("invalid"),g&&A.addClass(g)))}).bind("change",function(){var F=A.val();if(!F||!A[0].validity.valid){A.val(String.fromCodePoint(n.modelVal)),A[0].setCustomValidity(""),g&&A.removeClass(g);return}F=F.codePointAt(0),f!==F&&M(F)}).bind("click",function(){A[0].select()}),v.parent().after(angular.element('<label class="'+a.charInput+'"></label>').append(A)))}}}]).directive("miSelectAll",function(){return{link:function(e,n){n.bind("focus",function(){setTimeout(function(){n[0].select()})})}}}).directive("miPresets",function(){return{restrict:"E",transclude:!0,template:'<label mi-popup="focus"><mi-number min="min" max="max" def="def" zpad="zpad" model="val"></mi-number><span ng-transclude></span></label><ul><li ng-repeat="p in presets"><button type="button" ng-click="update(p)" value="{{p}}">{{p}}</button></li></ul>',scope:{val:"=model",min:"=",max:"=",def:"=",zpad:"=",getPresets:"&presets"},link:function(e,n){e.update=function(a){e.val=a};var v=function(){var a=e.getPresets(),l;for(e.presets=[],l=0;l<a.length;l+=1)a[l]>=e.min&&a[l]<=e.max&&e.presets.push(a[l]);e.$apply()};n.bind("click",v),n.find("input").bind("focus",function(a){a.target.select(),v()})}}}).directive("miStyle",function(){return{restrict:"E",link:function(e,n){var v,a=function(){return v=n.html(),v},l=angular.element("<style></style>");n.after(l),l=l[0],n.css("display","none"),e.$watch(a,function(){l.stylesheet?l.stylesheet.cssText=v:l.innerHTML=v})}}}).directive("miLink",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<span><span ng-show="!href" ng-transclude></span><a ng-show="href" href="{{href}}" ng-transclude></a></span>',scope:{href:"@"}}}).directive("miColorPicker",["color","$timeout",function(e,n){var v=0;return{restrict:"E",replace:!0,templateUrl:"views/colorpicker.html",scope:{num:"=color",resultId:"@"},link:function(a,l){var u={h:0,s:0,l:0},w,x,d,m,f,c;a.id=v,v+=1,function(){var M,E=l.find("linearGradient");for(w=0;w<E.length;w+=1)M=angular.element(E[w]),M.attr("class")==="satGrad"?m=M.children():M.attr("class")==="litGrad"&&(x=M.children());y()}();function y(){m[0].setAttribute("stop-color","hsl("+u.h+", 0%, "+u.l+"%)"),m[1].setAttribute("stop-color","hsl("+u.h+", 100%, "+u.l+"%)"),x[0].setAttribute("stop-color","hsl("+u.h+", "+u.s+"%, 0%)"),x[1].setAttribute("stop-color","hsl("+u.h+", "+u.s+"%, 50%)"),x[2].setAttribute("stop-color","hsl("+u.h+", "+u.s+"%, 100%)"),d||(d=document.getElementById(a.resultId)),d&&d.setAttribute("style","background-color: hsl("+u.h+", "+u.s+"%, "+u.l+"%)")}u=e(a.num).toHSL();function g(){var M=e(a.num).toHSL();(M.h!==u.h||M.s!==u.s||M.l!==u.l)&&(a.num=e(u).toNumber())}function k(){a.hsl={h:u.h,s:u.s,l:u.l}}k();function B(){var M,E,F=l.find("input");if(F.length)for(M=0;M<F.length;M+=1)E=F[M].getAttribute("id"),/hue/.test(E)?F[M].value=u.h:/saturation/.test(E)?F[M].value=u.s:/lightness/.test(E)&&(F[M].value=u.l)}B();function A(M){clearTimeout(c),c=setTimeout(function(){var E=M.target.getAttribute("id");if(E==="hue"+a.id)u.h=M.target.value;else if(E==="saturation"+a.id)u.s=M.target.value;else if(E==="lightness"+a.id)u.l=M.target.value;else return;y(),n.cancel(f),f=n(function(){g(),k()},128)},16)}l[0].addEventListener("input",A,!1),l[0].addEventListener("change",A,!1),a.$watch("num",function(){n.cancel(f),f=n(function(){var M=e(a.num).toHSL();M.h===0&&u.h===360&&(M.h=u.h),(u.l===100||u.l===0)&&(M.s=u.s),e(u).toNumber()!==a.num&&(u=M,k(),y(),B())},256)}),a.$watch("hsl",function(){n.cancel(f),f=n(function(){u.h=a.hsl.h,u.s=a.hsl.s,u.l=a.hsl.l,g(),y(),B()},256)},!0)}}}]).directive("miFileOver",function(){return function(e,n){var v=!1,a,l,u;n.on("dragover",function(w){w.stopPropagation(),w.preventDefault();try{if(u=w.dataTransfer.types,u.indexOf)v=u.indexOf("Files")!==-1;else for(a=0;a<u.length;a+=1)w.dataTransfer.types[a]==="Files"&&(v=!0);v?(n.addClass("miFileOver"),clearTimeout(l),l=setTimeout(function(){n.removeClass("miFileOver")},1e3)):n.removeClass("miFileOver")}catch(x){}}),n.on("drop",function(w){w.stopPropagation(),n.removeClass("miFileOver")})}}).directive("miFileZone",function(){return{scope:{onOpen:"&"},link:function(e,n,v){var a=v.dragClass||"dragged",l=v.arrayBufferIf?new RegExp(v.arrayBufferIf):!1,u=new RegExp(v.typeRegex);n.on("dragover",function(w){n.addClass(a),w.dataTransfer.dropEffect="copy"}),n.on("dragleave",function(){n.removeClass(a)}),n.on("drop",function(w){var x=[],d=0,m,f,c,y=new FileReader,g=[],k,B=0,A=0,M=function(C){k=x[d].type||x[d].name,u.test(k)&&g.push({file:C.target.result,type:k,name:x[d].name}),d+=1,d===x.length?e.$apply(function(){e.onOpen({files:g.reverse()})}):(y=new FileReader,y.onload=M,l&&l.test(k)?y.readAsArrayBuffer(x[d]):y.readAsText(x[d]))},E=function(C){var D;function U(V){for(m=0;m<V.length;m+=1)V[m].isDirectory?B+=1:A+=1,E(V[m]);V.length===0?(B-=1,B===0&&A===0&&F()):D.readEntries(U)}C.isFile?C.file(function(V){A-=1,u.test(V.type||V.name)&&x.push(V),B===0&&A===0&&F()}):C.isDirectory&&(D=C.createReader(),D.readEntries(U))},F=function(){k=x[d].type||x[d].name,l&&l.test(k)?y.readAsArrayBuffer(x[d]):y.readAsText(x[d])};w.preventDefault(),y.onload=M;try{for(c=w.dataTransfer.items,m=0;m<c.length;m+=1)f=c[m].webkitGetAsEntry(),f&&(f.isDirectory?B+=1:A+=1,E(f))}catch(C){x=w.dataTransfer.files,F()}})}}}).directive("miFile",function(){return{restrict:"E",scope:{onOpen:"&",focused:"="},template:'<input type="file" multiple />',link:function(e,n,v){var a=n.children("input"),l=v.arrayBufferIf?new RegExp(v.arrayBufferIf):!1,u=new RegExp(v.typeRegex);a[0].addEventListener("change",function(w){var x=w.target.files,d=0,m=new FileReader,f=[],c,y=function(g){c=x[d].type||x[d].name,u.test(c)&&f.push({file:g.target.result,type:c,name:x[d].name}),d+=1,d===x.length?(e.$apply(function(){e.onOpen({files:f.reverse()})}),a[0].value=""):(m=new FileReader,m.onload=y,l&&l.test(c)?m.readAsArrayBuffer(x[d]):m.readAsText(x[d]))};m.onload=y,c=x[d].type||x[d].name,l&&l.test(c)?m.readAsArrayBuffer(x[d]):m.readAsText(x[d])},!1),v.focused&&a.bind("focus",function(){e.$apply(function(){e.focused=!0})}).bind("blur",function(){e.$apply(function(){e.focused=!1})})}}}).directive("miBoxSelector",function(){return{restrict:"E",scope:{map:"=",mode:"@",onApply:"&"},transclude:!0,template:"<div ng-transclude></div>",link:function(e,n,v){var a=[],l=!1,u=!1,w={},x={},d=NaN,m=v.boxClass||"mi-boxed",f,c,y={},g=v.selectedClass||"mi-selected",k=[],B,A=[],M,E=0,F=function(J){e.$apply(function(){e.onApply({selection:k,mode:J}),k=[]})},C=function(J){return J.offsetLeft<=y.x2&&J.offsetLeft+J.offsetWidth>=y.x1&&J.offsetTop<=y.y2&&J.offsetTop+J.offsetHeight>=y.y1?!0:J.offsetTop>y.y2||y.y1>J.offsetHeight+J.offsetTop?NaN:!1},D=function(){var J=n.find("mi-box"),j=J.length,G=[],re,le=1,he,fe;if(!j)return G;for(re=0;re<j;re+=1)J[re].offsetHeight&&G.push({el:J[re],idx:re});for(J=G,G=[],j=J.length,he=J[0].offsetTop,y.x1=Math.min(w.x,x.x),y.x2=Math.max(w.x,x.x),y.y1=Math.min(w.y,x.y),y.y2=Math.max(w.y,x.y),d===1&&(d=0),re=d||0;re<j;re+=1)if(E+=1,le===1&&J[re].el.offsetTop>he&&(le=re),fe=C(J[re].el),fe)isNaN(d)&&(d=re),G.push({index:J[re].idx,element:angular.element(J[re].el)});else{if(isNaN(fe)&&!isNaN(d))break;re+=le-1}for(re=d-1||-1;re>-1;re-=1)if(fe=C(J[re].el),fe)G.push({index:J[re].idx,element:angular.element(J[re].el)});else if(isNaN(fe))break;return G},U=function(){var J,j,G=e.map,re=n.find("mi-box"),le,he,fe=re.length,de=[];if(!fe||!G||fe!==G.length){E<500&&(E+=1,setTimeout(U,0));return}if(V(),E=0,le=JSON.stringify(G),JSON.stringify(A)!==le){for(J=0;J<fe;J+=1)JSON.stringify(A[J])!==JSON.stringify(G[J])&&de.push(J);for(fe=de.length,J=0;J<fe;J+=1){if(j=de[J],he=angular.element(re[j]),G[j].id+""!==he.attr("data-id")){setTimeout(U,300);return}G[j].order?he.addClass(g):he.removeClass(g)}A=JSON.parse(le)}};n.bind("mousedown",function(J){if(e.mode!=="move")return d=NaN,l=!0,w.x=J.pageX,w.y=J.pageY,J.preventDefault(),!1});function V(){try{B.destroy()}catch(J){}e.mode==="move"&&(B=new Sortable(n.children()[0],{ghostClass:m,onUpdate:function(J){var j,G;j=parseInt(angular.element(J.item)[0].getAttribute("data-idx"),10);try{G=parseInt(angular.element(J.item).next()[0].getAttribute("data-idx"),10)}catch(re){G=NaN}G>j&&(G-=1),k=[j,G],clearTimeout(M),M=setTimeout(function(){F("move")},300)}}))}document.body.addEventListener("mouseup",function(J){var j,G,re,le,he=e.mode,fe;if(u=!1,l=!1,d=NaN,e.mode!=="move"){if(a.length){for(G=0,le=a.length;G<le;G+=1)j=a[G],j.element.removeClass(m),he==="delete"?j.element.removeClass(g).remove():he==="select"&&j.element.toggleClass(g),fe=j.index,re=k.indexOf(fe),re>0?k.splice(re,1):k.push(j.index);a=[],clearTimeout(M),M=setTimeout(function(){F(he)},300)}for(f={x:J.pageX,y:J.pageY},c=angular.element(J.target),G=0;!c.is("mi-box")&&G<6;)c=c.parent(),G+=1;try{c=c[0]}catch(de){c=!1}}},!1),n.bind("mouseup",function(J){var j,G,re,le,he,fe,de;if(!a.length&&e.mode!=="move"){for(he=e.mode,G=he==="delete",x.x=J.pageX,x.y=J.pageY,j=D(),d=NaN,re=j.length,re===1&&f&&J.shiftKey&&(w=f,j=D(),re=j.length),n.find("mi-box").removeClass(m),le=0;le<re;le+=1)(G||re<2||j[le].element&&j[le].element[0]!==c)&&(G&&!J.shiftKey?j[le].element.removeClass(g).remove():he==="select"&&j[le].element.toggleClass(g),fe=j[le].index,de=k.indexOf(fe),de>0?k.splice(de,1):k.push(j[le].index+(G&&!J.shiftKey?k.length:0)));clearTimeout(M),M=setTimeout(function(){F(he)},300)}}),n.bind("mousemove",function(J){if(e.mode!=="move"){var j;if(!l||J.buttons!==1)return;for(u=!0,clearTimeout(M),x.x=J.pageX,x.y=J.pageY,a=D(),n.find("mi-box").removeClass(m),j=0;j<a.length;j+=1)a[j].element.addClass(m)}}),window.addEventListener("scroll",function(){clearTimeout(M);var J=e.mode;k.length&&(M=setTimeout(function(){F(J)},300))},!1),e.$watch("map",function(){U()},!0),e.$watch("mode",function(J){try{B.destroy()}catch(j){}e.mode==="move"&&V()}),U()}}}).directive("miTags",function(){return{priority:2,require:"ngModel",link:function(e,n,v,a){var l=n.is("span");a.$parsers.push(function(w){var x=[],d=w;return d?(d=d.replace(/\s*,\s*/g,",").replace(/,+/g,", ").trim().replace(/^,+|,+$/,""),d=d.split(", "),d.forEach(function(m){m&&x.indexOf(m)===-1&&x.push(m)}),x.join(", ")):""}),l=n.is("span");function u(){n.val(a.$modelValue),l&&n.html(a.$modelValue)}a.$render=u,n.bind("change, blur",function(){a.$setViewValue(l?n.html():n.val()),u()})}}}).directive("miBlurOnEnter",function(){return{link:function(e,n){n.bind("keydown",function(v){(v.which===13||v.which===27)&&(v.target.blur(),v.preventDefault())})}}}).directive("miUnique",function(){return{priority:5,require:"ngModel",link:function(e,n,v,a){var l=e[v.miUnique]||{},u=!n[0].hasAttribute("contenteditable"),w=typeof v.miTags=="string";a.$parsers.push(function(x){var d=[],m,f,c,y,g,k;if(x=angular.element("<div></div>").html(x).text(),w){for(k in l)l.hasOwnProperty(k)&&(d=d.concat(l[k]));for(g=x.split(/,\s*/),k=l[e.$id]||[],c=g.length,m=0;m<c;m+=1)if(d.indexOf(g[m])!==-1&&k.indexOf(g[m])===-1){f=!1;break}m===c&&(f=!0)}else{for(k in l)k!==e.$id&&l.hasOwnProperty(k)&&d.push(l[k]);y=x.replace(/\s*/g,""),f=d.indexOf(y)===-1}return f?(a.$setValidity("unique",!0),v.miInvalidClass&&n.removeClass(v.miInvalidClass),x):(document.activeElement===n[0]?(a.$setValidity("unique",!1),v.miInvalidClass&&n.addClass(v.miInvalidClass)):u?n.val(a.$modelValue):n.html(a.$modelValue),a.$modelValue)}),n.bind("change, blur",function(){a.$setViewValue(u?n.val():n.text()),a.$setValidity("unique",!0),n.removeClass(v.miInvalidClass)}),e.$watch(function(){return a.$modelValue},function(x){x?w?l[e.$id]=x.split(/,\s*/):l[e.$id]=x.replace(/\s*/g,""):delete l[e.$id]})}}}).directive("miTooltip",["$parse",function(e){var n=600,v=n,a;return{link:function(l,u,w){var x=u[0],d,m=e(w.miTooltip)();u.bind("mouseenter",function(){var f=function(){var c,y,g,k;c=x.getBoundingClientRect(),d=angular.element("<div></div>"),d.addClass(m.class||"tooltip"),d.text(m.text),angular.element(document.body).append(d),g=d[0].getBoundingClientRect(),m.hasOwnProperty("marginTop")?k=c.top+c.height+(Number(m.marginTop)||0):k=c.top-c.height-(Number(m.marginBottom)||0),m.hasOwnProperty("marginRight")?y=c.left+c.width-g.width-Number(m.marginRight):y=c.left+c.width/2-g.width/2,d.css({left:y+"px",top:k+"px"}),v=0};clearTimeout(a),v?a=setTimeout(f,v):f()}).bind("mouseleave",function(f){var c;clearTimeout(a),d&&d.remove(),c=f.toElement,c&&(v!==0||!c.hasAttribute("mi-tooltip"))&&(v=n)}).bind("click",function(){clearTimeout(a),v=n,d&&d.remove()})}}}]).directive("miAbsorbClicks",function(){return{controller:["$scope",function(e){e.callbacks=[],this.addCallback=function(n){e.callbacks.push(n)}}],scope:{onClick:"&"},link:function(e,n){var v,a;n.bind("mousedown",function(l){l.stopPropagation()}),n.bind("click",function(l){for(l.stopPropagation(),e.onClick({e:l}),a=e.callbacks.length,v=0;v<a;v+=1)e.callbacks[v]()})}}}).directive("miFocusWhen",function(){return{scope:!0,link:function(e,n,v){var a;e.$watch(function(){return v.miFocusWhen},function(){clearTimeout(a),a=setTimeout(function(){try{v.miFocusWhen==="true"&&(n.is("input, button")?n[0].focus():(n=n.find("input"),n.length&&n[0].focus()))}catch(l){}},100)})}}}).directive("miGrid",["template",function(e){return{restrict:"E",scope:{left:"@",top:"@",width:"@",height:"@",gridSize:"@"},link:function(n,v){var a=e('<div class="miGrid" style="left: {{left}}px; top: {{top}}px; width: {{width}}px; height: {{height}}px;">{{hLines}}{{vLines}}</div>'),l=e('<div class="hLine" style="top: {{y}}px"></div>'),u=e('<div class="vLine" style="left: {{x}}px"></div>');function w(x,d,m,f,c){var y=[],g,k=m/f*c,B=[];if(m===0||f===0)return"";for(g=0;g<k;g+=1)B.push(u.fillup({x:Math.round(g/k*m)}));for(B.push(u.fillup({x:Math.round(m)})),g=0;g<c;g+=1)y.push(l.fillup({y:Math.round(g/c*f)}));return y.push(l.fillup({y:Math.round(f)})),a.fillup({left:x,top:d,width:m,height:f,hLines:y.join(""),vLines:B.join("")})}n.$watch(function(){return n.left+n.top+n.width+n.height+n.gridSize},function(){v.html(w(Number(n.left),Number(n.top),Number(n.width),Number(n.height),Number(n.gridSize))||"")})}}}]).directive("miVisibleBox",function(){return{link:function(e,n,v){var a=0,l=n[0],u,w={width:0,height:0};function x(){var m=e[v.miVisibleBox];m&&(m.processing=!0),a<50?(setTimeout(function(){d()},300),a+=1):a=0}function d(){var m,f,c;try{if(m=l.getBoundingClientRect(),!m.width||!m.height)return;f=l.offsetLeft,isNaN(f)&&(c=l.parentElement||l.parentNode,f=(c.offsetWidth-m.width)/2),e[v.miVisibleBox]={width:Math.round(m.width),height:Math.round(m.height),left:Math.round(f),top:0,processing:!1},setTimeout(function(){e.$apply()},100)}catch(y){x();return}}e.$watch(function(){return n.attr("viewBox")+n.attr("style")+v.miVisibleBoxWatch},function(){d()}),window.addEventListener("resize",function(){clearTimeout(u),u=setTimeout(function(){d(),e.$apply()},500)},!1)}}});location.hash==="#library"&&(location.hash="#/select/library");angular.module("icomoonApp",["ui.router","storage","svg","font","tmpl","color","swatch","csh","file","moonui","cloud","search"]).config(["$stateProvider","$urlRouterProvider","$compileProvider",function(e,n,v){n.otherwise("/select"),v.debugInfoEnabled(!1),v.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|chrome-extension):|data:image\//),e.state("select",{url:"/select",templateUrl:"views/main.html",controller:"MainCtrl",resolve:{project:["session","$q","storage","message",function(a,l,u,w){var x,d=l.defer(),m=a("icomoon"),f=function(c){var y=c.total||c.totalSize;y!==c.loaded&&w.setMessage(c.loaded/y)};return u.load("currentProject",function(c){c||(c=-1),m.load("icomoon-lib/presets.json").then(function(y){var g,k;c<0&&!isNaN(y.currentProject)&&(c=y.currentProject);function B(A){d.resolve(A)}for(y.projects||(y={currentProject:-1,projects:[]}),g=0;g<y.projects.length;g+=1)if(y.projects[g].created===c)return x=a(c),x.downloadProgressHandler=x.downloadProgressHandler||f,x.load(y.projects[g].uri).then(B,function(A){if(A==="no such project"){location.hash="#/projects";return}}),d.promise;if(g===y.projects.length){if(g>1){location.hash="#/projects";return}y.projects[c]||(c=0),c<y.projects.length&&c>-1&&y.projects[c].iconSets?(k=new Date().getTime(),y.projects[c].metadata.created=k,a(k).quickSave(y.projects[c]).then(function(A){y.projects.splice(c,1,A.metadata),c=k,y.time+=1,d.resolve(A),d.promise.then(function(){m.quickSave(y)})})):g>0?(c=y.projects[c].created,x=a(c),x.downloadProgressHandler=x.downloadProgressHandler||f,x.load().then(B)):(c=new Date().getTime(),y.projects=[{created:c,name:"Untitled Project 1",lastOpened:0}],m.quickSave(y),k={metadata:y.projects[0],iconSets:[]},a(c).quickSave(k).then(function(){d.resolve(k)}))}u.save("currentProject",c)})}),d.promise}]}}).state("select.font",{url:"/font",templateUrl:"views/font.html",controller:"FontCtrl"}).state("select.image",{url:"/image",templateUrl:"views/image.html",controller:"ImageCtrl"}).state("select.library",{url:"/library",templateUrl:"views/lib.html",controller:"LibCtrl",resolve:{iconSets:["$q","$http",function(a,l){var u=a.defer();return l.get("icomoon-lib/library.json").then(function(w){u.resolve(w.data)}),u.promise}]}}).state("projects",{url:"/projects",templateUrl:"views/projects.html",controller:"ProjectsCtrl",resolve:{}})}]);angular.module("icomoonApp").controller("MsgCtrl",["$scope","message",function(e,n){e.message=n,n.$apply=function(){try{e.$apply()}catch(v){}}}]);angular.module("icomoonApp").factory("session",["$q","$http","$rootScope","$timeout","storage","cloud","scriptLoader","message",function(e,n,v,a,l,u,w,x){"use strict";var d={},m,f={},c={},y=0;function g(){return m=w.load("components/jsondiffpatch/jsondiffpatch.min.js"),y=3e3,m.then(function(){jsondiffpatch.config.objectHash=function(B){return B.id||0}}),m}u.hasCloudAccess().then(g);function k(B){c={},l.clear(function(){B?location.pathname="/login/%2Fapp":location.reload()})}return function(B){var A,M,E,F,C,D,U,V={},J=3;if(d[B])return d[B];d[B]=V;function j(G){var re=0,le=e.defer();function he(){(c[B]===!0||c[B]==="pending")&&re<800?(setTimeout(he,300),re+=1):fe()}function fe(){c[B]=!0,u.hasCloudAccess(!0,B).then(function(de){m||g();var Be=de.time||-1;G&&(G.time=G.time||E&&E.time||0),!G||Be>G.time||!isNaN(G.uid)&&G.uid!==de.uid?u.getSession({id:B,progress:V.downloadProgressHandler}).then(function($){$&&($.uid=de.uid,G&&G.projects&&G.projects.length>1&&(G.uid===void 0||G.uid===-1)&&(c[B]=!1),le.resolve($)),$||(G?(G&&de&&(G.uid=de.uid),le.resolve()):B!=="icomoon"&&(le.reject("no such project"),c[B]=!1),le.resolve($))},function(){G&&de&&(G.uid=de.uid),le.resolve()}):Be!==G.time?(G&&de&&(G.uid=de.uid),le.resolve()):G&&de&&(G.uid=de.uid,G.projects=G.projects||[],le.resolve(G))},function(de){de.noAccess&&G&&G.premium?(c[B]=!1,k(),le.resolve(!1)):le.resolve(void 0),de&&G&&(G.uid=de.uid)})}return he(),le.promise.then(function(){c[B]=!1,f[B]=!1}),le.promise}return V.load=function(G){var re=e.defer();function le(he){(function fe(){j(he).then(function(de){var Be=!1;if(!de&&!he)if(de!==!1&&J>0){J-=1,setTimeout(fe,1e3*(4-J));return}else Be=!0,n.get(G).then(function($){M=$.data,re.resolve(M)});else M=de||he,de?(E=JSON.parse(JSON.stringify(de)),re.resolve(de)):re.resolve(he);re.promise.then(function($){u.hasCloudAccess().then(function(){m||g(),$.premium=!0,Be?V.quickSave($,1):V.quickSave($)})})},function(de){de==="no such project"&&re.reject(de)})})()}return M?le(M):l.load(B,function(he){le(he),v.$apply()}),re.promise},V.save=function(G,re,le){return re=re||y,F||(F=e.defer()),A?F.resolve():(a.cancel(C),C=a(function(){function he(de){a.cancel(U),U=a(function(){fe()},de||1e3)}function fe(){u.hasCloudAccess().then(function(){return m||g(),m}).then(function(){if(c[B]==="offline"&&(c[B]=!1),c[B]&&c[B]!=="failed"&&c[B]!=="pending"){he();return}a.cancel(D),D=a(function(){var de,Be,$=!1,oe,ee,ce;c[B]=!0;function xe(){M.time=le||u.getTime(),ee=M.time,u.storeSession({session:oe,id:B,time:ee}).then(be,function(){c[B]="failed",f[B]="failed",he()})}function be(ue){var N;ue.wasLate?(A=!0,c[B]=!1,f[B]=!1,location.reload()):ue.error?(/Unauthed/.test(ue.error)&&(c[B]=!1,k(M&&M.premium)),N=!0):ee!==ue.time&&(N=!0),N?xe():(E=JSON.parse(oe),c[B]=!1,f[B]=!1)}if(le=le||u.getTime(),E){de=jsondiffpatch.diff(E,M);for(ce in de)if(de.hasOwnProperty(ce)&&ce!=="time"){$=!0,M.time=le,de.time=[E.time,le];break}$?de=JSON.stringify(de):(de=!1,M.time=E.time),isNaN(M.time)&&(M.time=le),oe=JSON.stringify(M)}else{M.time=le,oe=JSON.stringify(M),xe();return}if(ee=M.time,!de){E=JSON.parse(oe),l.save(B,M),c[B]=!1,f[B]=!1;return}Be=JSON.stringify(de),Be.length<oe.length?u.storeSession({diff:de,id:B,time:ee}).then(be,function(){c[B]="failed",f[B]="failed",he()}):xe()},re/3)}),G.time=G.time||u.getTime(),l.save(B,G,function(){F&&F.resolve(G),F=!1})}G=G||M,M=G,u.hasCloudAccess(!0,B).then(function(de){m||g(),M.uid&&M.uid!==-1&&M.uid!==de.uid||E&&E.time&&E.time<de.time||c[B]==="failed"?(A=!0,c[B]=!1,f[B]=!1,F&&F.resolve(),M.uid!==de.uid?k():location.reload()):(le=G.time=u.getTime(),M.uid=de.uid)},function(de){de.noAccess&&M.premium?(A=!0,k()):(M.uid=de.uid,c[B]="offline")}).finally(function(){A||fe()})},re),A||(c[B]="pending"),F.promise)},V.quickSave=function(G,re){return V.save(G,300,re)},V.isSyncing=function(){var G;for(G in f)if(f.hasOwnProperty(G)&&f[G])return f[G];for(G in c)if(c.hasOwnProperty(G)&&c[G])return c[G];return!1},window.onbeforeunload||u.hasCloudAccess().then(function(){window.onbeforeunload=function(G){if(!u.forceUnload&&V.isSyncing()&&!/#\/projects/.test(location.hash))return"IcoMoon has not finished syncing your data to the cloud."}}),V}}]);angular.module("icomoonApp").factory("message",["$q","$sce",function(e,n){var v,a;return{show:function(l,u,w){return typeof l=="string"?a=l:(a=l.message,u=l.firstButton,w=l.secondButton),this.visible=!0,v=e.defer(),u&&u.caption?this.firstButton={caption:u.caption,focused:u.focused}:this.firstButton=!1,w&&w.caption?this.secondButton={caption:w.caption,focused:w.focused}:this.secondButton=!1,v.promise},setMessage:function(l){a=l,typeof this.$apply=="function"&&this.$apply()},getRawMessage:function(){return a},getMessage:function(){return n.trustAsHtml(String(a))},hide:function(l){this.visible=!1,v.resolve(l)}}}]);angular.module("icomoonApp").factory("hotkeys",function(){var e=[],n=[],v={},a;function l(m){var f;return m=m.toLowerCase(),m.length===1?/[0-9a-z]/.test(m)?m.toUpperCase().charCodeAt(0):-1:(f={cmd:91,command:91,shift:16,ctrl:17,control:17,alt:18,option:18,opt:18,left:37,up:38,right:39,down:40,esc:27},f[m]||-1)}function u(m,f){var c,y=m.length,g=f.length;if(y!==g)return!1;for(c=0;c<g;c+=1)if(m.indexOf(f[c])===-1)return!1;return!0}function w(m){var f,c,y,g=n.length,k;for(c=0;c<g;c+=1)for(f=n[c].keys,k=f.length,y=0;y<k;y+=1)if(u(f[y],m))return n[c];return!1}function x(m){return(m===224||m===93)&&(m=91),m}function d(m){var f=m.getAttribute("contenteditable");return!!(m.type==="text"||m.type==="search"||f&&f.toLowerCase()==="true")}return document.addEventListener("keydown",function(m){var f,c,y,g;d(m.target)||(g=x(m.which),c=e.indexOf(g),c===-1&&(e.push(g),y=!0),m.metaKey||(c=e.indexOf(91),c!==-1&&e.splice(c,1)),f=w(e),f&&f.down&&(y||!f.waitForUp||!f.up)&&(f.scope?f.scope.$apply(f.down):f.down(),f.waitForUp=!0,m.preventDefault()),e.length&&!f?a=setTimeout(function(){e=[]},1e3):clearTimeout(a))}),window.addEventListener("blur",function(){var m=w(e);m&&m.up&&(m.scope?m.scope.$apply(m.up):m.up()),e=[]}),document.addEventListener("keyup",function(m){var f,c,y;if(d(m.target)){e=[];return}y=x(m.which),f=e.indexOf(y),f!==-1?(c=w(e),e.splice(f,1),m.which===91&&(e=[]),c&&(c.waitForUp=!1,c.keys.forEach(function(g){var k=w(g);k&&(k.waitForUp=!1)}),c.up&&(c.scope?c.scope.$apply(c.up):c.up(),m.preventDefault()))):(c=w([y]),c&&c.up&&(c.scope?c.scope.$apply(c.up):c.up(),m.preventDefault()))},!1),v.clear=function(){n=[]},v.add=function(m){var f,c,y,g,k,B,A=m.arr.slice(0),M=[];for(m.id&&(n.forEach(function(E){m.id!==E.id&&M.push(E)}),n=M),f=0,g=A.length;f<g;f+=1){for(B=A[f].keys,typeof B=="string"&&(A[f].keys=B=[B]),c=0,k=B.length;c<k;c+=1)for(B[c]=B[c].trim().split(/\s+\+?\s*/),y=0;y<B[c].length;y+=1)B[c][y]=l(B[c][y]);m.scope&&(A[f].scope=m.scope),m.id&&(A[f].id=m.id)}n=n.concat(A)},v});angular.module("cloud",[]).factory("cloud",["$http","$q",function(e,n){var v={},a={},l,u,w,x=0,d,m,f,c,y,g;function k(B){return["/oldapi/",B].join("")}return v.ping=function(){var B=n.defer(),A;return navigator.onLine?(A=new Date().getTime(),A-x<3e3?B.resolve():e({method:"GET",url:k("authstat"),withCredentials:!0}).then(function(M){x=A,B.resolve(),M&&M.data&&M.data.csrf_token&&(g=M.data.csrf_token)},function(){B.reject()})):B.reject(),B.promise},v.auth=function(){var B=n.defer();return c===!0?B.resolve():c===!1?B.reject():e({method:"GET",url:k("authstat"),withCredentials:!0}).then(function(A){var M=A.data;g=M.csrf_token,M.auth?(v.uid=M.uid,B.resolve(),c=!0):(B.reject(),c=!1)},function(){B.reject()}),B.promise},v.hasCloudAccess=function(B,A){var M=n.defer();return A=A||"",!B&&l?M.resolve(l):m&&m.noAccess?M.reject(m):v.auth().then(function(){e({method:"POST",url:k("getsessiontime"),withCredentials:!0,headers:{"x-csrf-token":g},data:{id:A}}).then(function(E){var F=E.data;F.error?(m={uid:F.uid||y||-1,noAccess:!0},M.reject(m)):(y=F.uid,l={time:F.time,uid:F.uid},M.resolve(l)),F.refTime&&(f=F.refTime*1e3,d=new Date().getTime())},function(){m={uid:y||-1},M.reject(m)})},function(){m={uid:y||-1,noAccess:!0},M.reject(m)}),M.promise},v.getTime=function(){if(f){var B=new Date().getTime();return f+(B-d+B%1e3)}else return new Date().getTime()},v.storeSession=function(B){var A=n.defer();return e({method:"POST",url:k("storesession"),withCredentials:!0,headers:{"x-csrf-token":g},data:B}).then(function(M){A.resolve(M.data)},function(M){A.reject(),(M.status===403||M.status===0)&&(v.forceUnload=!0,location.href="https://icomoon.io/login")}),A.promise},v.getWoff2=function(B){var A=n.defer();return e({method:"POST",url:k("woff2"),withCredentials:!0,headers:{"x-csrf-token":g},data:B}).then(function(M){var E=M.data;E.error?A.reject():E.data&&A.resolve(E.data)},function(){A.reject()}),A.promise},v.getSession=function(B){var A=n.defer(),M=0,E=B.progress,F=B.id||"";return e({method:"POST",url:k("getsession"),headers:{"x-csrf-token":g},withCredentials:!0,data:{id:F,onlyLength:!0}}).then(function(C){M=Number(C.data),e({method:"POST",url:k("getsession"),headers:{"x-csrf-token":g},withCredentials:!0,data:{id:F},progress:function(D){typeof E=="function"&&E({total:M,loaded:D.loaded})}}).then(function(D){A.resolve(D.data)},function(){A.reject()})}),A.promise},v.getPurchases=function(){var B=n.defer();return e({method:"GET",url:k("purchases/0"),headers:{"x-csrf-token":g},withCredentials:!0}).then(function(A){B.resolve(A.data)},function(){B.reject()}),B.promise},v.getExpTime=function(){var B=n.defer();return a.timestamp&&new Date().getTime()-a.timestamp<10368e5?B.resolve(a.daysLeft):e({method:"GET",url:k("purchases/1"),headers:{"x-csrf-token":g},withCredentials:!0}).then(function(A){a.daysLeft=NaN,a.timestamp=new Date().getTime(),A.data.length?(A.data.forEach(function(M){(isNaN(a.daysLeft)||M.daysLeft>a.daysLeft)&&(a.daysLeft=M.daysLeft)}),B.resolve(a.daysLeft)):B.resolve(NaN)}),B.promise},v.host=function(B){var A=n.defer(),M=B.hash;return M===u&&B.onlyDev===!0?(A.resolve(w),A.promise):(u=M,e({method:"POST",url:k("host"),headers:{"x-csrf-token":g},withCredentials:!0,data:B}).then(function(E){w=E.data,A.resolve(w)},function(){A.reject()}),A.promise)},v.unpublish=function(B){var A=n.defer();return e({method:"POST",url:k("unpublish"),headers:{"x-csrf-token":g},withCredentials:!0,data:B}).then(function(M){A.resolve()},function(){A.reject()}),A.promise},v.restoreProjects=function(){var B=n.defer();return e({method:"POST",url:k("restore"),withCredentials:!0,headers:{"x-csrf-token":g}}).then(function(A){A.data?A.data.error?B.reject():B.resolve():B.reject()},function(){B.reject()}),B.promise},v.contact=function(B){var A=n.defer(),M,E="security=2&submitted=IcoMoon";B.email||(B.email="support@icomoon.io",B.msg+="<br /><br />No email address was provided.");for(M in B)E+="&"+(M+"="+B[M]);return e({method:"POST",url:"https://icomoon.io/contact/m.php",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:E}).then(function(F){/error/.test(F.data)?A.reject():A.resolve()},function(){A.reject()}),A.promise},v}]);angular.module("search",[]).factory("search",["$http","$q",function(e,n){var v={},a={query:"",arr:[]},l,u,w=[],x;x||(x=n.defer(),e({method:"GET",url:"icomoon-lib/dict.json"}).then(function(f){w=f.data,x.resolve()}));var d=function(f,c,y){var g,k,B,A,M=0,E=0,F,C=-1,D=!1,U;if(y=y||.65,c.length<=2)return c===f;if(c=c.replace(/\s*/,"").toLowerCase().trim(),!c.length)return!1;if(c=c.split("/"),f=f.replace(/\s*/,"").toLowerCase().trim(),c.length===1)c=c[0];else{for(g=0;g<c.length;g+=1)if(d(f,c[g],g>0?1:!1))return!0;return!1}if(A=c.length,D=Math.min(A,f.length)>=3||Math.abs(f.length-A)/A<=1-y/2,c===f||D&&(f.match(new RegExp("^"+c,"i"))||f.match(new RegExp(c+"$","i"))))return!0;for(g=0;g<A;g+=1)B=c[g],F=f.indexOf(B,C+1),g&&F!==C+1&&(k=!0),F!==-1?(k||(C=F),f=f.split(""),f[F]=" ",f=f.join(""),M+=1):(U=f.indexOf(B),U===-1?E+=1:E+=Math.abs(g-U));return E+=Math.abs(A-f.length),M&&!E&&!k&&A/f.length>y||(M-E)/f.length>y},m=function(f){var c,y,g,k,B,A,M=[],E;if(typeof f=="string"&&(f=[f]),B=w.length,!B)return f;for(c=0;c<f.length;c+=1){for(E=[],y=0;y<B;y+=1)for(A=w[y],g=0,k=A.length;g<k;g+=1)if(!g&&typeof A[g]=="number"&&(k=A[g],A=A.slice(1)),d(A[g],f[c],.8)){E=E.concat(A);break}E.push(f[c]),M=M.concat(E)}return M};return v.match=function(f,c){var y,g,k,B,A,M,E;if(!c||!f)return!1;if(c=c.replace(/\\/g,"").replace(/\./g,"\\."),typeof f=="string")f=f.replace(/[\s\-\,_]+/g," "),f=f.split(" ").concat([f.replace(/\s+/g,"")]);else if(f.slice){for(f=f.slice(0),E=[],g=0;g<f.length;g+=1)f[g]=f[g].replace(/[\s\-\,_]+/g," "),f[g]=[f[g].replace(/\s+/g,"")].concat(f[g].split(" ")),E=E.concat(f[g]);f=E}if(a.query!==c){for(a.query=c,typeof c=="string"&&(c=c.replace(/\s+\/\s+/g,"/").replace(/[\s\-]+/g," ").replace(/,+/g,",").replace(/_/g,""),c=c.split(" ").concat([c.replace(/\s+/g,"")])),E=m(c),a.arr=[],M=[],g=0;g<E.length;g+=1)/\s/.test(E[g])?a.arr=a.arr.concat(E[g].split(/\s+/)):M.push(E[g]);for(M=M.join("/"),g=0;g<a.arr.length;g+=1)a.arr[g]=a.arr[g]+"/"+M;a.arr.length||(a.arr=[M])}for(c=a.arr,B=c.length,y=0,g=0;g<B;g+=1){for(c[g]=c[g].trim(),k=0,A=f.length;k<A;k+=1)if(d(f[k],c[g])){y+=1;break}if(k===A)return!1}return y&&y>=B},v.getExternalResults=function(f,c){var y=n.defer(),g,k=[],B=[],A;return c=c||[],u?u.resolve():(u=n.defer(),e.get("icomoon-lib/map.json").then(function(M){l=M.data,u.resolve()})),u.promise.then(function(){if(!f)y.resolve(k);else{for(A=[],g=0;g<l.sets.length;g+=1)c.indexOf(l.sets[g].metadata.name)===-1&&A.push(g);c=A;for(var M in l.tags)l.tags.hasOwnProperty(M)&&v.match(M,f)&&(B=B.concat(l.tags[M]));for(A=JSON.parse(JSON.stringify(l.sets)),g=0;g<A.length;g+=1)A[g].dir=g,A[g].icons=[];for(g=0;g<B.length;g+=1)A[B[g][0]]&&A[B[g][0]].icons.indexOf(B[g][1])===-1&&A[B[g][0]].icons.push(B[g][1]);for(g=0;g<A.length;g+=1)c.indexOf(g)!==-1&&A[g].icons.length&&k.push(A[g]);k.dir=l.dir,y.resolve(k)}}),y.promise},v}]);angular.module("icomoonApp").directive("miIcon",["template",function(e){var n=e(['<div class="icon{{wide}}">','<svg width="{{width}}" height="{{height}}" viewBox="0 0 {{width}} {{height}}" style="margin-left: calc(50% - {{offset}}em)">','<g transform="scale({{scale}} {{scale}})">{{paths}}</g>',"</svg>","</div>"].join("")),v=e('<path{{attrs}} d="{{d}}"></path>'),a=function(l){var u=[],w,x,d;for(d in l)l.hasOwnProperty(d)&&(w=d.replace(/([A-Z])/g,"-$1").toLowerCase(),x=l[d],u.push(" "+w+'="'+x+'"'));return u.join("")};return{restrict:"E",scope:{icon:"=",height:"@",prevsize:"@"},link:function(l,u){l.$watch(function(){return{icon:l.icon,prevSize:l.prevsize}},function(){var w,x,d,m,f,c=[],y;for(f=l.icon.paths,m=f.length,w=l.icon.attrs||{},x=0;x<m;x+=1)c.push(v.fillup({d:f[x],attrs:w[x]?a(w[x]):""}));d=Number(l.height),y=l.icon.width,isNaN(y)&&(y=d),u.html(n.fillup({width:y,height:d,paths:c.join(""),wide:y>d*1.5?" icon-wide":"",offset:y/d/2,scale:Number(l.prevsize)/d}))},!0)}}}]);angular.module("icomoonApp").controller("MainCtrl",["$scope","$timeout","$state","$q","$http","search","cloud","template","color","swatch","fileSaver","message","hotkeys","glyphs","svgPath","session","project",function(e,n,v,a,l,u,w,x,d,m,f,c,y,g,k,B,A){var M,E,F=1024,C,D,U,V;e.externalSets=[],w.auth().then(function(){e.signedIn=!0},function(){e.signedIn=!1}),B=B(A.metadata.created),e.isSyncing=B.isSyncing,w.hasCloudAccess().then(function(){e.cloudAccess=!0},function(){e.cloudAccess=!1}),Date.now()<16231356e5&&w.getPurchases().then(function(t){var r,s,o;for(r=0,s=t.length;r<s;r+=1)if(o=t[r].product,o===23||o===24||o===25){e.showNotification=function(){var h=B.isSyncing();return!h||h==="offline"};break}}),e.showNotification=function(){return!1},e.scrollPositions={},e.tmp={},e.$on("$stateChangeSuccess",function(){var t=v.current.name;e.tab=t,e.search="",setTimeout(function(){var r=e.scrollPositions[t]||0;window.scrollTo(0,r)},100)}),e.$on("$stateChangeStart",function(){e.scrollPositions[v.current.name]=window.scrollY});function J(){w.getExpTime().then(function(t){var r;t===0&&e.cloudAccess&&(t=1),r=t+" day"+(t===1?"":"s"),t>0&&t<10?(e.expiration=t<4?"error":"warning",e.expMessage="Subscription ends in "+r,e.expMessage2="subscription will end in "+r+"."):t<=0?(e.expiration="error",e.expMessage="Subscription Expired",e.expMessage2="subscription has expired.<br />You may extend it to access your projects again."):e.expiration=!1})}J(),setInterval(J,10368e5);function j(t){var r;setTimeout(function(){if(M.indexOf(t)===0)r=-99999;else try{r=document.getElementById("setH"+t.id).offsetTop-16,r-=document.getElementById("toolbar").offsetHeight}catch(s){r=0}window.scrollTo(0,r)},500)}function G(t){var r,s,o;if(!t||!t.length)return 0;s=t.length;try{o=t[0].id}catch(h){}for((!o||isNaN(o))&&(o=0),r=1;r<s;r+=1)o=t[r]&&t[r].id>o?t[r].id:o;return o+1}e.getNextId=G,e.getSetHash=function(t){var r,s=t.icons,o=s.length,h=[];for(r=0;r<o;r+=1)h.push(s[r].paths.join("")),s[r].tags&&h.push(s[r].tags.join(""));return h.join("").hashCode()};function re(t,r){var s;t.selection||(t.selection=[]),s=t.selection[r]||{id:G(t.selection)},t.selection[r]=s,s.order=0}function le(t){var r,s;for(s=t.icons.length,t.selection.length=s,r=0;r<s;r+=1){re(t,r);try{isNaN(t.icons[r].id)&&(t.icons[r].id=G(t.icons))}catch(o){}}}e.clearSelection=function(){var t,r=M.length;for(t=0;t<r;t+=1)le(M[t])},e.selectAllNone=function(t,r){var s,o,h,p=0,b=typeof t=="number"?M[t]:t,P=b.selection,O=0;if(o=P.length,h=o/2,r==="undefined"){for(s=0;s<o&&(P[s].order?O+=1:p+=1,!(O>h));s+=1)if(p>h){r=!0;break}}P.forEach(function(S,I){r?(S.order=C,C+=1):re(b,I)})};function he(t){var r,s,o=0,h,p,b="",P=[],O=0;for(t&&!isNaN(t.setIdx)?(o=t.setIdx,r=o+1):r=M.length,o;o<r;o+=1)if(s=M[o].selection.length,!M[o].invisible)for(t&&t.selectionHash&&(b+=M[o].id),h=0;h<s;h+=1)M[o].icons[h]?M[o].selection[h].order?t&&t.selectionHash?b+=JSON.stringify(M[o].icons[h]):t&&t.onlyCount?O+=1:(p=M[o].selection[h],p.prevSize=p.prevSize||M[o].prevSize,P.push({icon:M[o].icons[h],attrs:M[o].icons[h].attrs,properties:p,setIdx:o,setId:M[o].id,iconIdx:h})):(M[o].selection[h].order=0,isNaN(M[o].selection[h].id)&&(M[o].selection[h].id=G(M[o].selection))):M[o].selection.splice(h,1);return t&&t.selectionHash?b:t&&t.onlyCount?O:(r=P.length,P)}e.getSelectedIcons=he,function(){var t=!1,r=!1;e.getSelectionCount=function(){return r===!1?(r=he({onlyCount:!0}),e.$parent.selectionCount=r,r):(t||(t=setTimeout(function(){r=!1,t=!1},750)),e.$parent.selectionCount=r,r)}}(),e.getSelectionHash=function(){return he({selectionHash:!0})};function fe(){var t,r={};for(M=A.iconSets,t=0;t<M.length;t+=1)r[M[t].id]=[];e.searchResults=r,e.project=A,e.pref=A.preferences,e.externalSets=[],e.fontPref=A.preferences.fontPref,e.imagePref=A.preferences.imagePref,e.edit&&e.edit.refresh&&e.edit.refresh(),e.set=M[e.setIdx]}function de(t){function r(s){return typeof s=="number"?{f:s}:s}return Object.keys(t).forEach(function(s){!t[s]||!t[s].map?delete t[s]:t[s]=t[s].map(r)}),t}(function(){var r,s,o,h,p,b,P,O,S,I,X=[],z;for(e.normSize=F,e.mode="select",e.edit={},e.visiblePanels={},E=[],E.idx=0,A.preferences=A.preferences||{},A.preferences.showGlyphs===void 0&&(A.preferences.showGlyphs=!0),A.preferences.showCodes===void 0&&(A.preferences.showCodes=!0),A.preferences.showQuickUse===void 0&&(A.preferences.showQuickUse=!0),A.preferences.showQuickUse2===void 0&&(A.preferences.showQuickUse2=!0),A.preferences.showSVGs===void 0&&(A.preferences.showSVGs=!0),A.preferences.fontPref=A.preferences.fontPref||{prefix:"icon-",metadata:{},metrics:{emSize:1024,baseline:6.25,whitespace:50}},A.preferences.imagePref=A.preferences.imagePref||{prefix:"icon-",png:!0,useClassSelector:!0,color:0,bgColor:16777215},E.size=A.preferences.historySize||50,A.preferences.historySize=E.size,fe(),b=M.length,S=[],o=0;o<b;o+=1){for((isNaN(M[o].id)||S.indexOf(M[o].id)!==-1)&&(M[o].id=G(M)),S.push(M[o].id),M[o].prevSize=M[o].prevSize||32,M[o].metadata=M[o].metadata||{name:"Untitled Set"},r=M[o].icons.filter(function(H){return typeof H=="object"}),M[o].icons=r,p=M[o].height,P=r.length,p!==F?(I=F/p,M[o].height=F):I=0,s=[],h=0;h<P;h+=1)r[h]&&((isNaN(r[h].id)||s.indexOf(r[h].id)!==-1)&&(r[h].id=G(r)),s.push(r[h].id),r[h].grid=r[h].grid||0,I&&(O=k(r[h].paths),O.viewBox={width:r[h].width||p,height:p},O.scale(I),r[h].paths=O.getPathData(!0),r[h].width=O.viewBox.width,O.viewBox.width===F&&delete r[h].width,delete r[h].height),r[h].attrs||(r[h].attrs=[]),typeof r[h].colorPermutations=="object"&&(r[h].colorPermutations=de(r[h].colorPermutations)));if(r=M,!r[o].selection||r[o].selection.length!==r[o].icons.length||r[o].selection[0]&&isNaN(r[o].selection[0].id))le(r[o]);else for(P=r[o].selection.length,h=0;h<P;h+=1)z=r[o].selection[h],z&&z.order&&X.push(z)}for(X.sort(function(H,Z){return H.order-Z.order}),C=1,o=0,b=X.length;o<b;o+=1)C=C>X[o].order?C:X[o].order;if(C+=1,C>9999999){for(o=0;o<b;o+=1)X[o].order=o+1;C=X.length+1||1}})(),e.changeIcons=function(t,r,s,o){var h=[],p,b=o?e.externalSets[r]:M[r],P,O=s==="delete",S,I=s==="edit",X=!1,z,H,Z=function(_){z[_]||(z[_]={}),H=z[_].order,H?re(b,_):(z[_].order=C,C+=1)},Q=function(_){h.push(P[_])},R=function(_){z[_]=0,!X&&b.icons[_].isMulticolor&&(X=!0),b.icons[_]=0},L=function(){var _,ie,te;_=t[0],ie=t[1],isNaN(ie)&&(ie=b.icons.length-1),te=b.icons.splice(_,1)[0],b.icons.splice(ie,0,te),te=b.selection.splice(_,1)[0],b.selection.splice(ie,0,te),e.search&&(te=e.searchResults[b.id].splice(_,1)[0],e.searchResults[b.id].splice(ie,0,te))},q;if(b){if(z=b.selection,P=b.icons,O)q=R;else if(I)q=Q;else if(s==="move"){L();return}else q=Z;if(t.forEach(q),O)q=function(_){return!!_},b.icons=P.filter(q),e.search&&(e.history.ignore=!1,e.searchResults[b.id]=e.searchResults[b.id].filter(function(_,ie){return b.selection[ie]})),b.selection=z.filter(q),X&&e.extractColorTheme(b);else if(I){if(S=e.edit,S.selection=!1,h.length===1&&!t.noNavigation){if(e.search){for(S.icons=[],z=[],S.idx=0,p=0;p<b.icons.length;p+=1)e.searchResults[b.id][p]&&(S.icons.push(b.icons[p]),z.push(b.selection[p]),!S.idx&&t[0]===p&&(S.idx=S.icons.length-1));S.selection=z}else S.icons=b.icons,S.idx=t[0];S.properties=!1}else S.icons=h,S.idx=0,S.properties=t.properties,S.selection=b.selection.filter(function(_,ie){return e.search?t.indexOf(ie)!==-1&&e.searchResults[b.id][ie]:t.indexOf(ie)!==-1});S.set=b,e.visiblePanels.edit=!0,S.refresh=function(){var _=S.idx;H=e.visiblePanels.edit,e.changeIcons(t,r,s),e.edit.idx=_,e.visiblePanels.edit=H}}}},function(){var t,r=0;e.$watch(function(){return r=A.time,delete A.time,JSON.stringify(A)},function(s,o){n.cancel(t),t=n(function(){U?U=!1:(E.idx>-1&&(E[E.idx]=o),e.history.ignore||E[E.idx]===s?e.history.ignore=!1:(E.idx+=1,E[E.idx]=s,E.splice(E.idx+1),E.length>E.size+1&&(E.shift(),E.idx-=1))),e.history.noUndo=E.idx<1,e.history.noRedo=E.idx>E.length-2,A.time=r,B.save(A)},500)})}(),e.history=function(t){E.idx+t>-1&&E.idx+t<E.length&&(JSON.stringify(E[E.idx+t])===JSON.stringify(A)?(E.splice(E.idx+t,1),t<0&&(E.idx-=1)):(E.idx+=t,A=JSON.parse(E[E.idx]),fe(),U=!0)),e.history.noUndo=E.idx<1,e.history.noRedo=E.idx>E.length-2,e.history.idx=E.idx},e.history.noUndo=!0,e.history.noRedo=!0;function Be(t,r){var h,s=t.length,o;if(r=r||"fill",!s)return!1;var h=t.map(function(p){return p[r]!=="none"?p[r]+" "+p.opacity:""}).filter(function(p){return!!p});for(s=h.length,o=1;o<s;o+=1)if(h[o]!==h[0])return!0;return!1}e.isMulticolor=Be;function $(t,r,s,o){var h={id:r},p=1,b;return t.paths?(s!==F?(b=k(t.paths),b.viewBox={width:t.width||s,height:s},b=b.scale(F/s),h.width=b.viewBox.width,h.paths=b.getPathData(!0)):(h.paths=t.paths,t.width&&(h.width=t.width)),h.attrs=t.attrs||[]):(s=s||t.viewBox.height,s!==F&&(p=F/s,t.scale(p)),h.paths=t.getPathData(!0),h.attrs=t.getAttrs(!0).map(function(P){return P.strokeWidth>0&&(P.strokeWidth*=p),P}),!isNaN(t.viewBox.width)&&t.viewBox.width!==F&&(h.width=t.viewBox.width)),h.isMulticolor=Be(h.attrs),h.isMulticolor2=Be(h.attrs,"stroke"),t.colorPermutations&&(h.colorPermutations=t.colorPermutations),t.tags&&(h.tags=t.tags),t.kerning&&(h.kerning=t.kerning),t.defaultCode&&(h.defaultCode=t.defaultCode),h.grid=o||0,h}function oe(t){var r,s,o,h,p,b={selection:[]},P;if(typeof t=="string"){for(h=M.length,r=0;r<h;r+=1)if(M[r].metadata.name===t)return M[r];return oe({metadata:{name:t}})}if(t=t||{},b.id=G(M),b.metadata=t.metadata||{},delete b.metadata.iconsHash,!b.metadata.name){for(p=[],r=0,h=M.length;r<h;r+=1)p.push(M[r].metadata.name);if(P="Untitled Set",p.indexOf(P)!==-1){for(o=2;p.indexOf(P+" "+o)!==-1;)o+=1;P=P+" "+o}b.metadata.name=P}b.height=F,s=t.icons||[],h=s.length;try{t.prevSize&&t.prevSize<=128?b.prevSize=t.prevSize:b.prevSize=t.selection[0].prevSize||32}catch(O){b.prevSize=32}for(P=G(b.icons),b.icons=[],b.icons[s.length-1]=0,t.selection?(b.selection=t.selection,b.selection.forEach(function(O,S){O.id=S})):le(b),r=0;r<h;r+=1)s[r].liga&&Array.isArray(s[r].liga)&&(b.selection[r].ligatures=s[r].liga.join(", ")),s[r]=$(s[r],P+r,t.height,s[r].grid||b.metadata.grid),s[r].colorPermutations&&(s[r].colorPermutations=de(s[r].colorPermutations));return b.icons=s,t.invisible===!0&&(b.invisible=!0),t.colorThemes&&(b.colorThemes=t.colorThemes,b.colorThemeIdx=t.colorThemeIdx||0),M.unshift(b),b}e.newSetFromSelection=function(t,r){var s,o,h=[],p,b,P=[],O={icons:h};for(s=!t,t=t||he(),e.search&&(t=t.filter(function(S){return e.searchResults[S.setId][S.iconIdx]})),o=0,p=t.length;o<p;o+=1)h[o]=JSON.parse(JSON.stringify(t[o].icon)),delete h[o].colorPermutations,r&&(P[o]=JSON.parse(JSON.stringify(t[o].properties))),s&&(t[o].properties.order=0);r&&(O.selection=P),b=oe(O),e.extractColorTheme(b),e.search&&(O=[],P.forEach(function(){O.push(!0)}),e.searchResults[b.id]=O),window.scrollTo(0,0)},e.removeSet=function(t,r){var s;r&&(s=he({setIdx:t})),M.splice(t,1),r&&s.length&&e.newSetFromSelection(s,!0)};function ee(t){t&&t.name&&(A.preferences.fontPref.metadata.fontFamily=t.name),t&&t.url&&(A.preferences.fontPref.metadata.fontURL=t.url),t&&t.designer&&(A.preferences.fontPref.metadata.designer=t.designer),t&&t.designerURL&&(A.preferences.fontPref.metadata.designerURL=t.designerURL),t&&t.license&&(A.preferences.fontPref.metadata.license=t.license),t&&t.licenseURL&&(A.preferences.fontPref.metadata.licenseURL=t.licenseURL),t&&t.description&&(A.preferences.fontPref.metadata.description=t.description),t&&t.copyright&&(A.preferences.fontPref.metadata.copyright=t.copyright),t&&t.majorVersion&&(A.preferences.fontPref.metadata.majorVersion=t.majorVersion),t&&t.minorVersion&&(A.preferences.fontPref.metadata.minorVersion=t.minorVersion),t&&t.includeMetadata&&(A.preferences.fontPref.includeMetadata=t.includeMetadata)}function ce(t){var r;return t.isMulticolor===void 0&&(t.isMulticolor=Be(t.attrs)),t.isMulticolor2===void 0&&(t.isMulticolor2=Be(t.attrs,"stroke")),(!t.isMulticolor||!t.isMulticolor2)&&(r=d([0,0,0]),t.attrs=t.attrs.map(function(s){if(!t.isMulticolor)try{s.fill&&s.fill!=="none"&&d(s.fill).distance(r)<30&&delete s.fill}catch(o){delete s.fill}if(!t.isMulticolor2)try{d(s.stroke).distance(r)<30&&delete s.stroke}catch(o){delete s.stroke}return s})),t}e.simplifyIcon=ce,function(){var t;e.import=function(r,s,o){var h,p=[],b,P=a.defer(),O,S,I=[],X,z,H,Z,Q,R,L,q=/^[\d\-_\.\s]+|\.[^\.]*$/g,_,ie,te,ye=!1,Ce=!1,pe=/svg/,ve,se;function me(ne){var ge,Ae={};return ne=ne.replace(/\.[^\.]*$/,""),ge=ne.match(/U0x[0-9A-F]+/i),ge&&(ge=parseInt(ge[0].slice(3),16),Ae.defaultCode=ge,ne=ne.replace(/U0x[0-9A-F]+/i,"")),/[^\d]/g.test(ne)&&(ne=ne.replace(/^[\d]+/,"")),ne=ne.replace(/^[\-_\.\s]+|[\-_\.\s]+$/,""),Ae.name=ne,Ae.tags=ne.split("#").filter(function(we){return we}),Ae}function Se(ne){var ge,Ae,we,Ee,ae=ne.path,Fe=ne.name,Me=ne.tags,Pe=ne.importSize,De;if(!ae)return P.reject(),P.promise;Pe&&(Q&&typeof Q.width=="number"&&Q.width===Q.height&&Pe.width!==Pe.height&&Pe.height!==Q.height&&(Ee=Math.max(Pe.width,Pe.height),Ae=Ee-Pe.height,we=Ee-Pe.width,ae.translate(0,Ae/2),ae.viewBox.height=Ee,ae.translate(we/2,0),ae.viewBox.width=Ee),te.metadata.importSize=Pe,!te.prevSize&&typeof Pe.height=="number"&&Pe.height<=128&&(te.prevSize=Pe.height)),typeof O!="number"&&(O=!1);var ke=$(ae,G(te.icons),!1,O);return!ke.tags&&(Me||Fe)&&(Me&&Me.length?ke.tags=Me:Fe&&(ke.tags=[Fe])),isNaN(ne.defaultCode)||(ke.defaultCode=ne.defaultCode),ce(ke),te.icons.unshift(ke),te.selection=te.selection||[],De={order:0,id:G(te.selection)},Me&&Me.length&&(De.name=ke.tags.join(", ")),ae.liga&&Array.isArray(ae.liga)&&(De.ligatures=ae.liga.join(", ")),te.selection.unshift(De),ke}return r?(H=r.length,H||c.show("Please choose SVG images, SVG fonts or JSONs exported by IcoMoon."),typeof s=="number"?s>=0&&(te=M[s],_=a.defer()):s&&s.icons?te=s:ie=!0,function(){for(S=0;S<H;S+=1)if(pe.test((r[S].type||"").replace(/.*\.([^\.]*)/,"$1"))){if(L=g(r[S].file),L.length===1&&!Q)for(Z=H,Z>10&&(Z=10),Q={},X=0;X<Z&&Z>4;X+=1)try{se=g(r[X].file),se={width:Math.round(se[0].viewBox.width),height:Math.round(se[0].viewBox.height)},!Q.width||!Q.height?Q=se:(Q.width=Math.max(Q.width,se.width),Q.height=Math.max(Q.height,se.height))}catch(ge){se=!1}if(L.length>1){for(se=L.metadata||{},se.name||(se.name=r[S].name.replace(q,"")),se=oe({icons:L,metadata:se}),X=0;X<se.icons.length;X+=1)delete se.icons[X].attrs;L.fontMetrics&&c.show({message:"The glyphs in your SVG font were loaded.<br />Use this font's metrics and metadata when exporting fonts?",firstButton:{caption:"Yes"},secondButton:{caption:"No",focused:!0}}).then(function(ge){ge==="Yes"&&(A.preferences.fontPref.metrics.baseline=L.fontMetrics.baseline,A.preferences.fontPref.metrics.whitespace=L.fontMetrics.whitespace,ee(L.metadata),fe())})}else{try{se={width:Math.round(L[0].viewBox.width),height:Math.round(L[0].viewBox.height)}}catch(ge){se=!1}if(ye=ye||L[0].strokeWarning,Ce=Ce||L[0].hasImage,te)_||(_=a.defer(),_.resolve());else{if(M.length>0)try{for(b=[],t&&M.indexOf(t)!==-1&&b.push(t),X=0;X<M.length&&M[X].metadata.name.indexOf("Untitled Set")!==-1;X+=1)b.push(M[X]);for(b.length===0&&M.length>0&&(b=[M[0]]),X=0;X<b.length;X+=1)if((b[X].metadata.importSize||{}).height===se.height){te=b[X];break}te||(te=oe({prevSize:se}))}catch(ge){te=oe()}else te=oe();_=a.defer()}for(te.invisible=!1,t=te,p=[],z=0;z<te.selection.length;z+=1)try{p.push(te.selection[z].name||te.icons[z].tags[0])}catch(ge){}for(z=0;z<H;z+=1)if(X=p.indexOf(me(r[z].name).name),X!==-1&&p.indexOf(me(r[z].name).name,X+1)===-1&&(te.icons[X].tags.length!==1||te.selection[X].name&&te.icons[X].tags[0]!==te.selection[X].name||!isNaN(te.icons[X].defaultCode)||!isNaN(te.selection[X].code)||te.selection[X].ligatures&&te.selection[X].ligatures.length)){c.show({message:"Replace existing icons?<br />By replacing, your settings (tags, char codes, etc.) won't&nbsp;change.",firstButton:{caption:"Replace"},secondButton:{caption:"Reimport",focused:!0}}).then(function(ge){_.resolve(ge==="Replace")});break}z===H&&_.resolve(),typeof r[S].grid=="number"?O=r[S].grid:(O=e.getGridSize(te),O=O&&O[0]),R=me(r[S].name),_.promise.then(function(ge,Ae,we){return function(Ee){X=-1,Ee&&(X=p.indexOf(ge.name),X!==-1&&(Ae=ce($(we)),te.icons[X].paths=Ae.paths,te.icons[X].width=Ae.width,te.icons[X].attrs=Ae.attrs,I.push(te.icons[X]))),X===-1&&(I.push(Se({path:we,name:ge.name,tags:ge.tags,importSize:Ae,defaultCode:ge.defaultCode})),p&&p.unshift(""))}}(R,se,L[0]))}}else{try{se=JSON.parse(r[S].file)}catch(ge){var ne="<strong>Invalid JSON file</strong>";try{ne+="<br>"+ge.message}catch(Ae){}c.show(ne);continue}if(ve=se.IcoMoonType,ve==="icon-set")oe(se);else if(ve==="selection")(function(){var ge,Ae,we,Ee={};for(X=0,Z=se.icons.length;X<Z;X+=1)we=se.icons[X].icon,Ae=we.grid||"undefined",Ee.hasOwnProperty(Ae)?ge=Ee[Ae]:(ge=Ee[Ae]={},ge.icons=[],ge.selection=[],ge.height=se.height,ge.metadata=se.metadata),ge.icons.push(we),ge.selection.push(se.icons[X].properties);e.clearSelection();for(Ae in Ee)Ee.hasOwnProperty(Ae)&&oe(Ee[Ae]);se.preferences&&c.show({message:"Your icon selection was loaded.<br />Would you like to load all the settings stored in your selection file?",firstButton:{caption:"Yes"},secondButton:{caption:"No",focused:!0}}).then(function(ae){ae==="Yes"&&(A.preferences=se.preferences,fe())})})();else if(Array.isArray(se.iconSets))try{se.iconSets.reverse().forEach(function(ge){oe(ge)})}catch(ge){}}_||(_=a.defer(),_.resolve()),_.promise.then(function(){te&&I.length&&(e.extractColorTheme(te),be(I,te)),ie&&j(te),o||(e.search=""),Ce?c.show('Embedded or referenced images get ignored.<br>Note that raster images, which consist of pixels, are not scalable and embedding them in SVG does not make them vector.<br><br><a target="_blank" href="https://en.wikipedia.org/wiki/Vector_graphics">Learn about vector versus raster graphics.</a>'):ye&&c.show('Strokes get ignored when generating fonts or CSH files.<br />You may <a target="_blank" href="https://icomoon.io/docs/#stroke-to-fill">convert them to fills</a> and reimport your SVG(s).'),P.resolve()})}(),P.promise):(P.reject(),P.promise)}}(),e.showInfo=function(t){var r=M[t];e.setIdx=t,e.visiblePanels.info=!0,e.metadata=r.metadata,e.iconsCount=r.icons.length,e.set=r,e.colorTheme=e.extractColorTheme(r)},e.hasValidTheme=function(t){var r;if(t.colorThemes)try{return r=t.colorThemes[t.colorThemeIdx],r.length>=2&&r.length<=15}catch(s){return!1}return!1},e.setSet=function(t){var r=M[t];e.setIdx=t,e.set=r,e.colorTheme=e.extractColorTheme(r),e.metadata=r.metadata},e.getGridSize=function(t){var r,s,o,h;if(t=t||e.set,!(!t||!t.icons)){for(h=t.icons.length,r=0;r<h;r+=1)if(s=t.icons[r],s.grid){if(!o)o=[s.grid];else if(o.indexOf(s.grid)===-1&&(o.push(s.grid),o.length>3))break}if(o)return o.toString=function(){var p,b;if(this.length){if(this.length>1)return b=this.slice(0),b.forEach(function(P){P=P||"unknown"}),p="mixed",this.length<4&&(p+=" ("+b.join(", ")+")"),p;if(this.length===1)return this[0]||"unknown"}else return"unknown"},o.sort()}};function xe(t){return t=t.slice(0),t.forEach(function(r,s){t[s]=parseInt(r.join(""),10)}),t.sort().join("")}e.colorThemeKey=xe,e.clearAttrs=function(t){var r=t.some(function(s){return s.strokeWidth>0});return r?t.map(function(s){return delete s.stroke,s.fill!=="none"&&delete s.fill,s}):[]},e.removeColorTheme=function(t,r){var s,o,h;r=r||e.set,!(t>=r.colorThemes.length)&&(t===r.colorThemeIdx&&e.selectColorTheme(0),t<r.colorThemeIdx&&(r.colorThemeIdx-=1),e.colorThemeIdx.value=r.colorThemeIdx,h=r.colorThemes.splice(t,1),s=xe(h[0]),o=r.colorThemes.length===0,r.icons.forEach(function(p){try{delete p.colorPermutations[s]}catch(b){}o&&(p.attrs=e.clearAttrs(p.attrs))}),o||ue(r))},e.removeAllColors=function(t){t=t||e.set,t.icons.forEach(function(r){try{delete r.colorPermutations,delete r.isMulticolor2,delete r.isMulticolor,t.colorThemes=[],r.attrs=e.clearAttrs(r.attrs),e.visiblePanels.info=!1}catch(s){}})},e.downloadColorTheme=function(t,r){var s="icomoon_color_theme",o=f();r=r||e.set,!(t>=r.colorThemes.length)&&(o.add(s+".ase",m(r.colorThemes[t]).getASE({name:"IcoMoon Theme"})),o.add(s+".svg",m(r.colorThemes[t]).getSVG()),o.save(s+".zip"))},e.editColorTheme=function(t,r,s){var o,h,p,b,P,O,S;for(r=r||e.set,typeof s!="number"&&(s=r.colorThemeIdx),T(r,s),o=r.colorThemes[s],O=xe(o),t.forEach(function(I,X){o[X]=d(I.hex).toArray()}),P=xe(o),h=0;h<r.icons.length;h+=1)if(p=r.icons[h],(!p.colorPermutations||!p.colorPermutations[O])&&be([p],r),S=p.colorPermutations[P]=p.colorPermutations[O],delete p.colorPermutations[O],S)for(b=0;b<p.attrs.length;b+=1)S[b]&&S[b].f>=0&&p.attrs[b].fill!=="none"&&(p.attrs[b].fill=d(o[S[b].f]).toString()),S[b]&&S[b].s>=0&&p.attrs[b].stroke&&p.attrs[b].strokeWidth>0&&(p.attrs[b].stroke=d(o[S[b].s]).toString())};function be(t,r){var s,o,h,p,b;(!r.colorThemes||!r.colorThemes[0])&&e.extractColorTheme(r),!(!r.colorThemes||!r.colorThemes[0])&&(o=r.colorThemes[r.colorThemeIdx].slice(0),p=xe(o),t.forEach(function(P){if(!P.colorPermutations||!P.colorPermutations[p]){for(o.forEach(function(O,S){o[S]=d(O).toString()}),s=[],h=0;h<P.attrs.length;h+=1)s[h]={},P.attrs[h]&&P.attrs[h].fill&&P.attrs[h].fill!=="none"&&(b=o.indexOf(d(P.attrs[h].fill).toString()),b===-1&&(b=0),s[h].f=b),P.attrs[h]&&P.attrs[h].strokeWidth>0&&(b=o.indexOf(d(P.attrs[h].stroke).toString()),b===-1&&(b=0),s[h].s=b);P.colorPermutations=P.colorPermutations||{},P.colorPermutations[p]=s}}))}e.addColorPermutations=be,e.addColorTheme=function(t,r,s){var o,h=0,p,b,P;function O(S,I){var X,z;return S.length>I.length?(X=S,z=I):(X=I,z=S),X=X.map(function(H){return JSON.stringify(H)}),z.every(function(H){return X.indexOf(JSON.stringify(H))!==-1})}if(r=r||e.set,o=r.colorThemes,t=t.slice(0),t.forEach(function(S,I){S&&S.hex&&(S=S.hex),(typeof S=="string"||!S.length)&&(t[I]=d(S).toArray())}),t.sort(function(S,I){return d(S).toHSL().l-d(I).toHSL().l}),!o||!o[0])o=[t];else{for(o=o.filter(function(S){var I=!0;return p=xe(S),S.length<t.length&&O(S,t)&&(I=!1),I||r.icons.forEach(function(X){try{delete X.colorPermutations[p]}catch(z){}}),I}),r.colorThemes=o,b=xe(t),h=0;h<o.length&&(P=o[h],p=xe(P),!(p===b||O(t,P)));h+=1);h===o.length&&o.push(t),be(r.icons,r)}return r.colorThemes=o,s&&e.selectColorTheme(h),h},e.importColorTheme=function(t){var r,s,o;if(o={},!!t.length){if(/ase/.test(t[0].type))o.ase=t[0].file;else if(/svg/.test(t[0].type))o.svg=t[0].file;else try{o.json=JSON.parse(t[0].file)}catch(h){}if(r=m(o).colors,r&&r.length){for(e.newColorTheme=[],s=0;s<r.length;s+=1)e.newColorTheme.push({hex:d(r[s]).toNumber()});e.newColorTheme.idx=0}}},e.getColorString=function(t){return d(t).toString()};function ue(t){t=t||e.set,e.currentTheme=t.colorThemes[t.colorThemeIdx].slice(0),e.currentTheme.forEach(function(r,s){e.currentTheme[s]={hex:d(r).toNumber()}}),e.currentTheme.idx=e.currentTheme.idx||0}function N(t){var r={},s,o,h,p,b,P,O,S,I,X;function z(R,L){var q,_=0,ie;if(!isNaN(R)&&!isNaN(L))_=R-L;else if(R&&R.distance&&L&&L.distance)_=R.distance(L);else if(Array.isArray(R)&&Array.isArray(L)){for(ie=Math.min(R.length,L.length),q=0;q<ie;q+=1)_+=Math.pow(z(R[q],L[q]),2);_=Math.sqrt(_)}return _}function H(R,L){var q,_=R.length<L.length?R.length:L.length,ie=0;for(q=0;q<_;q+=1)ie+=Math.pow(z(R[q],L[q]),2);return Math.sqrt(ie)}function Z(R){var L=[];return R.forEach(function(q){var _=[];R.forEach(function(ie){q!==ie&&_.push(q.color.distance(ie.color,{l:1,a:0,b:0}))}),L.push(_)}),L}function Q(R){var L=0;function q(_,ie){var te,ye;if(ie===1){typeof R.func=="function"&&R.func(),L+=1;return}if(!(!isNaN(R.max)&&L>=R.max)){for(te=0;te<ie-1;te+=1)q(_,ie-1),ie%2===0?(ye=_[te],_[te]=_[ie-1],_[ie-1]=ye):(ye=_[0],_[0]=_[ie-1],_[ie-1]=ye);q(_,ie-1)}}q(R.arr,R.arr.length)}return o=t.theme1.map(function(R){return d(R).toNumber()}),h=t.theme2.map(function(R,L){return{color:d(R),idx:L}}),s=[],t.icon.attrs.forEach(function(R,L){var q,_,ie;R.fill&&R.fill!=="none"&&(q=d(R.fill),_=o.indexOf(q.toNumber()),_<0&&(_=0),s.push({color:q,t1Ref:_,type:"f",idx:L})),R.stroke&&R.strokeWidth>0&&(ie=d(R.stroke),_=o.indexOf(ie.toNumber()),_<0&&(_=0),s.push({color:ie,t1Ref:_,type:"s",idx:L}))}),p=s.map(function(R){return R.color}),P=Z(s),S=s.map(function(R){return R.color.toLAB().l}),Q({arr:h,func:function(){var R=[],L,q,_,ie;s.forEach(function(te,ye){var Ce=te.t1Ref%h.length;te.color=h[Ce].color,R[ye]=h[Ce].idx}),b=s.map(function(te){return te.color}),O=Z(s),I=s.map(function(te){return te.color.toLAB().l}),L=H(p,b),q=H(P,O),_=H(S,I),ie=Math.sqrt(L*L+q*q+10*_*_),(isNaN(r.dist)||r.dist>ie)&&(r.dist=ie,r.colors=R)},max:720}),X=[],s.forEach(function(R,L){var q=X[R.idx]||{};q[R.type]=r.colors[L],X[R.idx]=q}),X}function W(t){var r=[],s,o,h,p,b=[],P=[],O=[];for(s=0;s<t.theme1.length;s+=1)for(o=0;o<t.theme2.length;o+=1)r.push({d:t.theme1[s].distance(t.theme2[o],t.lab),pair:[s,o]});for(r.sort(function(S,I){return S.d-I.d}),s=0;s<r.length;s+=1)h=r[s].pair[0],p=r[s].pair[1],b.indexOf(h)===-1&&P.indexOf(p)===-1&&(b.push(h),P.push(p),O[h]=p);return O}function T(t,r){var s,o,h;try{s=t.colorThemes[t.colorThemeIdx].slice(0),h=[],s.forEach(function(p,b){h[b]=d(p).toString()}),o=xe(s),t.icons.forEach(function(p){var b;if((!p.colorPermutations||p.colorPermutations.length!==void 0)&&(p.colorPermutations={}),!p.colorPermutations[o]||p.colorPermutations[o].length!==p.attrs.length)for(p.colorPermutations[o]=[],b=0;b<p.attrs.length;b+=1)p.colorPermutations[o][b]=p.colorPermutations[o][b]||{},p.attrs[b]&&p.attrs[b].fill&&p.attrs[b].fill!=="none"&&(p.colorPermutations[o][b].f=h.indexOf(d(p.attrs[b].fill).toString()),p.colorPermutations[o][b].f===-1&&(p.colorPermutations[o][b].f=0)),p.attrs[b]&&p.attrs[b].stroke&&p.attrs[b].strokeWidth>0&&(p.colorPermutations[o][b].s=h.indexOf(d(p.attrs[b].stroke).toString()),p.colorPermutations[o][b].s===-1&&(p.colorPermutations[o][b].s=0))})}catch(p){}}e.selectColorTheme=function(t){var r,s,o,h,p,b,P=e.set;P.colorThemeIdx!==t&&(r=P.colorThemes[P.colorThemeIdx].slice(0),o=xe(r),T(P,P.colorThemeIdx),P.colorThemeIdx=t,b=P.colorThemes[t].slice(0),h=xe(b),r.forEach(function(O,S){r[S]=d(O)}),b.forEach(function(O,S){b[S]=d(O)}),b.forEach(function(O,S){b[S]=O.toString()}),P.icons.forEach(function(O){if(O.colorPermutations&&O.colorPermutations[o])for((!O.colorPermutations[h]||!O.colorPermutations[h][0]||O.colorPermutations[h].indexOf(null)!==-1)&&(O.colorPermutations[h]=N({icon:O,theme1:r,theme2:b})),p=O.colorPermutations[h],s=0;s<O.attrs.length;s+=1)O.attrs[s].fill&&O.attrs[s].fill!=="none"&&(O.attrs[s].fill=b[p[s]&&p[s].f||0]),O.attrs[s].stroke&&O.attrs[s].stroke!=="none"&&(O.attrs[s].stroke=b[p[s]&&p[s].s||0])}),ue())},e.extractColorTheme=function(t){var r,s=[],o,h,p,b,P,O=t.icons.length,S,I;function X(z){delete z.colorPermutations}for(T(t,t.colorThemeIdx),p=0;p<O;p+=1)if(P=t.icons[p],P.attrs)for(b=0;b<P.attrs.length;b+=1){if(o=P.attrs&&P.attrs[b]&&P.attrs[b].fill,o&&o!=="none"&&(r=d(o).toString(),r&&s.indexOf(r)===-1&&(s.push(r),s.length>15)))return t.icons.forEach(X),t.colorThemes=[],[];if(h=P.attrs&&P.attrs[b]&&P.attrs[b].stroke,h&&P.attrs[b].strokeWidth>0&&(r=d(h).toString(),r&&s.indexOf(r)===-1&&(s.push(r),s.length>15)))return t.icons.forEach(X),t.colorThemes=[],[]}if(s.length<=1)if(t.colorThemes&&t.colorThemes[t.colorThemeIdx])s=t.colorThemes[t.colorThemeIdx];else return t.colorThemes=[],[];for(t.colorThemeIdx=e.addColorTheme(s,t),e.colorThemeIdx={value:t.colorThemeIdx},e.newColorTheme=[],S=Math.round(192/s.length),p=0;p<s.length;p+=1)I=32+S*p,e.newColorTheme[p]={hex:I+I*256+I*65536};return ue(t),e.newColorTheme.idx=0,t.colorThemes[t.colorThemeIdx]},e.duplicateColor=function(){var t=e.newColorTheme;t.length<15&&(t.splice(t.idx,0,{hex:t[t.idx].hex}),t.idx+=1,t.idx>t.length-1&&(t.idx=t.length-1))},e.removeColor=function(){var t=e.newColorTheme;t.length>2&&(t.splice(t.idx,1),t.idx-=1,t.idx<0&&(t.idx=0))},e.editMetadata=function(t){t&&(e.metadata=t.metadata),e.visiblePanels.info=!1,e.visiblePanels.metadata=!0},e.showGridReset=function(){e.visiblePanels.info=!1,e.visiblePanels.gridReset=!0},e.showPaddings=function(){var t=e.getGridSize();!t||!t[0]||t.length>1?e.showGridReset():(e.tmp.gridSize=t,e.tmp.minPadding=-t+1,e.tmp.maxPadding=t,e.tmp.padding=Math.round(t/2),e.visiblePanels.info=!1,e.visiblePanels.paddings=!0)},e.resetGrids=function(t,r){r=r||e.set,t=t||0,r.icons.forEach(function(s){s.grid=t}),e.visiblePanels.gridReset=!1},e.addPadding=function(t,r){var s,o,h,p=e.tmp.gridSize,b,P,O;r=r||e.set,b=r.height||F,t=Math.round(t),t&&(O=p/(t+p),P=p+t,s=o=b*O*(Math.floor(t/2)/p),h=t%2,h===1?o+=b*O/p:h===-1&&(s+=b*O/p),r.icons.forEach(function(S){var I=k(S.paths);I.scale(O),I.translate(s,o),S.paths=I.getPathData(!0),S.grid=P}),r.prevSize=Math.round(r.prevSize/p*P),e.visiblePanels.paddings=!1)},e.showRearrange=function(t){var r=M[t];e.setIdx=t,e.visiblePanels.rearrange=!0,e.set=r},e.rearrange=function(){var t=[],r,s,o=e.tmp.arrangeSelection,h=e.tmp.orderBy,p=e.set;if(t=p.icons.map(function(b,P){return{icon:b,s:p.selection[P]}}),o&&(t=t.filter(function(b){return!!b.s.order})),!h||h==="reverse")if(o)for(t.reverse(),s=0,r=0;r<p.icons.length;r+=1)p.selection[r].order&&(p.selection[r]=t[s].s,p.icons[r]=t[s].icon,s+=1);else p.icons.reverse(),p.selection.reverse();else if(h==="name"?t.sort(function(b,P){return b=b.s.name||b.icon.tags&&b.icon.tags[0],P=P.s.name||P.icon.tags&&P.icon.tags[0],b>P?1:b<P?-1:0}):h==="code"&&t.sort(function(b,P){return b=b.s.code||b.icon.defaultCode,P=P.s.code||P.icon.defaultCode,b-P}),o)for(s=0,r=0;r<p.icons.length;r+=1)p.selection[r].order&&(p.selection[r]=t[s].s,p.icons[r]=t[s].icon,s+=1);else for(p.icons=[],p.selection=[],r=0;r<t.length;r+=1)p.icons[r]=t[r].icon,p.selection[r]=t[r].s;e.visiblePanels.rearrange=!1},e.getMultiples=function(t,r){var s=[],o,h,p,b,P;for(typeof t=="number"&&(t=[t]),p=t.length,r=Math.floor((r||4)/p)||1,h=0;h<p;h+=1){if(b=t[h],!b||isNaN(b)){if(p===1)return[16,20,24,32];b=16}for(o=0;o<r&&(P=b*(o+1),!(P>100));o+=1)s.indexOf(P)===-1&&s.push(P)}return s.length<r&&(P=s[0]/2,s[0]%2===0&&P>=12&&s.unshift(P)),s},e.moveSet=function(t,r){var s,o=M.indexOf(t);s=o+r,o!==-1&&s>-1&&s<M.length&&(M.splice(o,1),M.splice(s,0,t))},e.hasAttrs=function(t){var r;if(t.attrs&&t.attrs.length){for(r=0;r<t.attrs.length&&!(Object.keys(t.attrs[r]).length>0);r+=1);if(r<t.attrs.length)return!0}return!1},e.downloadSet=function(t){var r,s,o;t=t||e.set,r=JSON.parse(JSON.stringify(t)),delete r.id,delete r.invisible,r.icons.forEach(function(h,p){try{o=r.selection[p].code,o&&(h.defaultCode=o)}catch(b){}h.defaultCode||delete h.defaultCode,h.isMulticolor||delete h.isMulticolor,h.isMulticolor2||delete h.isMulticolor2,e.hasAttrs(h)||(delete h.attrs,delete h.colorPermutations),delete h.id}),r.selection.forEach(function(h){delete h.tempChar,delete h.id,delete h.code}),r.preferences=A.preferences,r.IcoMoonType="icon-set",r.metadata.iconsHash=e.getSetHash(t),f().save(r.metadata.name+".json",JSON.stringify(r,null,"  "))};function Y(t){var r=t.map(function(o){return o.icon}),s=t.map(function(o){return o.properties});M.forEach(function(o){o.icons=o.icons.filter(function(h){return r.indexOf(h)===-1}),o.selection=o.selection.filter(function(h){return s.indexOf(h)===-1})})}e.copySelectionToSet=function(t,r,s){var o,h=[],p,b,P=[],O,S,I=M[t];if(I){O=he(),e.search&&(O=O.filter(function(H){return e.searchResults[H.setId][H.iconIdx]})),p=G(I.icons),I.selection=I.selection||[],b=G(I.selection);var X=I.icons.map(function(H,Z){var Q=I.selection[Z].code;return Q||H.defaultCode}),z;for(o=0;o<O.length;o+=1){if(S=JSON.parse(JSON.stringify(O[o].icon)),S.id=p+o,S.defaultCode=O[o].properties.code||S.defaultCode,z=X.indexOf(S.defaultCode),!S.defaultCode)delete S.defaultCode;else if(s===void 0&&z!==-1){c.show({message:"There is a conflict between the codes of the glyphs in your selection and the ones in the set.<br />Which character codes do you want to keep?",firstButton:{caption:"Target Set",focused:!0},secondButton:{caption:"Selection"}}).then(function(H){e.copySelectionToSet(t,r,H!=="Selection")});return}h.push(S),S=JSON.parse(JSON.stringify(O[o].properties)),S.id=b+o,S.order=0;try{s?delete S.code:(delete I.selection[z].code,delete I.icons[z].defaultCode)}catch(H){}P.push(S)}r&&Y(O),e.search&&(S=[],h.forEach(function(){S.push(!0)}),e.searchResults[I.id]=S.concat(e.searchResults[I.id])),I.icons=h.concat(I.icons),I.selection=P.concat(I.selection)}},function(){var t,r,s=navigator.userAgent.indexOf("Mac OS X")!==-1;y.clear(),y.add({arr:[{keys:"opt",down:function(){t=e.mode,e.mode="edit"},up:function(){e.mode=t||r||"select",t=!1}},{keys:["ctrl + alt","cmd + opt"],down:function(){r=t||e.mode||"select",e.mode="delete"},up:function(){e.mode=r}},{keys:["ctrl + z","cmd + z"],down:function(){e.history(-1)}},{keys:["ctrl + y","ctrl + shift + z","cmd + shift + z","cmd + y"],down:function(){e.history(1)}},{keys:"esc",up:function(){Object.keys(e.visiblePanels).forEach(function(o){e.visiblePanels[o]=!1})}}],scope:e}),s?e.tooltips={delMode:"Remove (Cmd + Opt)",editMode:"Edit (Opt)",undo:"Undo (Cmd + Z)",redo:"Redo (Cmd + Shift + Z)"}:e.tooltips={delMode:"Remove (Ctrl + Alt)",editMode:"Edit (Alt)",undo:"Undo (Ctrl + Z)",redo:"Redo (Ctrl + Shift + Z)"},e.tooltips.selectMode="Select"}(),e.vendorPrefix=function(){var t=window.getComputedStyle(document.documentElement,"");return(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||t.OLink===""&&["","o"])[1]}(),e.$watch("search",function(t){var r=[],s,o,h,p,b,P;if(e.importExternalIcons(!0),t&&(e.history.ignore=!0),e.externalSets=[],Object.keys(e.searchResults).length===0&&(e.scrollPositions[v.current.name]=window.scrollY),!t){e.history.ignore=!1,P=e.scrollPositions[v.current.name]||0,setTimeout(function(){window.scrollTo(0,P)},100),e.searchResults={};return}for(s=0,p=M.length;s<p;s+=1){for(h=0,b=M[s].icons.length;h<b;h+=1)o=M[s].icons[h],e.searchResults[M[s].id]=e.searchResults[M[s].id]||[],e.searchResults[M[s].id][h]=u.match(o.tags,t);r.push(e.searchResults[M[s].id])}if(v.current.name!=="select"){e.history.ignore=!1;return}e.externalSets.status=!0,e.externalSets.status="Connecting...",n.cancel(D),window.scrollTo(0,0),D=n(function(){w.ping().then(function(){if(e.search!==t){e.history.ignore=!1;return}e.externalSets.status="Searching other packs...",e.externalSets.icon=!0;var O=0,S=[];M.forEach(function(I){S.push(I.metadata.name)}),w.getPurchases().then(function(I){var X,z,H=[];for(X=0,z=I.length;X<z;X+=1)H[X]=I[X].product;u.getExternalResults(t,S).then(function(Z){if(e.search!==t){e.history.ignore=!1;return}Z.forEach(function(Q){var R=H.indexOf(Q.productId);Q.premium&&R!==-1?(Q.premium=!1,Q.purchased=!0,Q.dir=I[R].svgslink):Q.dir="/app/icomoon-lib/"+Z.dir+"/"+Q.dir+"/",Q.selection=[];var L;for(L=0;L<Q.icons.length;L+=1)Q.selection.push({order:0,id:L});O+=Q.icons.length}),e.externalSets=Z,e.externalSets.icon=!1,e.externalSets.status=O+" results from other packs"})})},function(){e.externalSets.status="Connection Failed",e.externalSets.icon=!1,e.history.ignore=!1})},300)}),e.importExternalIcons=function(t,r){var s,o,h,p,b,P,O,S,I,X,z=e.search;function H(Z,Q,R){return function(L){Z.files=Z.files||[],Z.files.push({type:"image/svg",file:L.data,name:z,grid:R}),Q.resolve(Z)}}if(s=e.externalSets,s)for(p=0,P=s.length;p<P;p+=1){for(S=s[p].selection,I=!1,h=[],b=0,O=S.length;b<O;b+=1)S[b].order&&(I||(X=JSON.parse(JSON.stringify(s[p].metadata)),X.name+=" (subset)",I=oe(X.name),I.metadata=X,I.prevSize=s[p].prevSize),o=a.defer(),h.push(o.promise),l({method:"GET",url:s[p].dir+s[p].icons[b]+".svg",withCredentials:s[p].purchased}).then(H(I,o,s[p].grid)),S[b].order=0);h.length&&a.all(h).then(function(Z){var Q=Z[0],R=Q.files;delete Q.files,e.history.ignore=!1,e.import(R,Q,!0).then(function(){var L,q=R.length;for(L=0;L<q;L+=1)t&&(Q.selection[L].order=L+1),e.searchResults[Q.id]=e.searchResults[Q.id]||[],e.searchResults[Q.id][L]=u.match(Q.icons[L].tags,e.search);j(Q),r&&(e.search="")})})}},e.hasExternalSelection=function(){var t,r,s=e.externalSets.length,o;for(t=0;t<s;t+=1)for(o=e.externalSets[t],r=0;r<o.selection.length;r+=1)if(o.selection[r].order)return!0;return!1};function K(t){return/^stroke=/.test(t)||/^fill=/.test(t)||/^opacity/.test(t)?0:1}e.stringifyAttrs=function(t,r){var s=[],o,h,p,b=r&&r.props,P=void 0,O;for(p in t)if(t.hasOwnProperty(p))if(o=p.replace(/([A-Z])/g,"-$1").toLowerCase(),h=t[p],r&&r.scale&&o==="stroke-width"&&(h*=r.scale,h=e.fixed(h,4)),(o==="stroke"||o==="fill")&&h!=="none"&&(h=d(h),r&&r.xaml?h=h.toString({hex:!0,argb:!0,forCSS:!0}):h=h.toString({hex:!0,forCSS:!0}),o==="fill"&&r.fillIdx>0&&(s.push({key:o,val:h}),o="style",h="fill: var(--color"+r.fillIdx+", "+h+")"),o==="stroke"&&r.strokeIdx>0&&(s.push({key:o,val:h}),o="style",h="stroke: var(--color"+r.strokeIdx+", "+h+")")),o=="style"){P=P||s.length;try{O=s[P].val+"; "+h}catch(S){O=h}s[P]={key:o,val:O}}else s.push({key:o,val:h});return t&&t.strokeWidth>0&&!t.stroke&&s.push({key:"stroke",val:r&&r.defaultColor||"#000"}),(!t||!t.fill)&&s.push({key:"fill",val:r&&r.defaultColor||"#000"}),s=s.filter(function(S){var I=!1;return I=S.key.toLowerCase()==="opacity"&&String(S.val)==="1"||S.key.toLowerCase()==="visibility"&&/false/i.test(String(S.val)),!(I||b&&!b[S.key])}),r&&r.css?s=s.map(function(S){return(S.key==="fill"?"color":S.key)+":"+S.val+"; "}).join("; ")+";":r&&r.xaml?s=s.map(function(S){var I=String(S.key).toLowerCase(),X=String(S.val).toLowerCase();if(X==="none")return"";if(I==="stroke-width")I="StrokeThickness";else{if(I==="stroke-linecap")return X==="butt"&&(X="Flat"),X=X[0].toUpperCase()+X.slice(1),'StrokeStartLineCap="'+X+'" StrokeEndLineCap="'+X+'"';I==="stroke-linejoin"?I="StrokeLineJoin":I==="stroke-miterlimit"&&(I="StrokeMiterLimit")}return I=I[0].toUpperCase()+I.slice(1),X=X[0].toUpperCase()+X.slice(1),I+'="'+X+'"'}).join(" "):s=s.map(function(S){return S.key+'="'+S.val+'"'}).sort(K).join(" "),(" "+s).replace(/\s+$/,"")},e.premiumAlert=function(t){c.show({message:"<strong>"+t.metadata.name+"</strong> is a premium set. Would you like to purchase it?",firstButton:{caption:"Purchase"},secondButton:{caption:"Cancel",focused:!0}}).then(function(r){r==="Purchase"&&(window.location=t.metadata.url)})},e.sortByGrid=function(t){var r=[],s,o=0,h,p,b={};if(t){for(h=t.length,s=0;s<h;s+=1)p=t[s].icon.grid||0,b.hasOwnProperty(p)||(b[p]={idx:o,arr:[]},o+=1),b[p].arr.push(t[s]);for(p in b)b.hasOwnProperty(p)&&r.push(b[p]);for(r.sort(function(P,O){return P.idx-O.idx}),t=[],s=0,h=r.length;s<h;s+=1)t=t.concat(r[s].arr);return t}},e.fixed=function(t,r){return(isNaN(r)||r<0)&&(r=3),(t||0).toFixed(r).replace(/\.0+$/,"").replace(/(\.[^0]+)0+$/,"$1")},e.round=function(t){return Math.round(t)},e.showWarning=function(t){t?c.show(t):c.show({message:"Your premium plan "+e.expMessage2,firstButton:{caption:"Extend",focused:!0},secondButton:{caption:"Cancel"}}).then(function(r){r==="Extend"&&(window.location="https://icomoon.io/pricing")})},e.showPromo=function(t){e.cloudAccess||(c.show({message:['<p class="talign-left mvn">Become a premium member of IcoMoon to: </p>','<ul class="noListStyle talign-left">','<li><i class="icon-check fgc9 mrs"></i>Save changes in your account</li>','<li><i class="icon-check fgc9 mrs"></i>Manage an unlimited number of projects</li>','<li><i class="icon-check fgc9 mrs"></i>Encode and embed fonts in CSS</li>','<li><i class="icon-check fgc9 mrs"></i>Generate WOFF 2.0 fonts</li>','<li><i class="icon-check fgc9 mrs"></i>Generate PDFs</li>','<li><i class="icon-check fgc9 mrs"></i>Access extra icon packs in the <a href="#/select/library">library tab</a></li>','<li><i class="icon-check fgc9 mrs"></i>Upload icons for sharing, development or production</li>',"</ul>"].join(""),firstButton:{caption:"Subscribe",focused:!0},secondButton:{caption:"Cancel"}}).then(function(r){r==="Subscribe"&&(window.location="https://icomoon.io/pricing")}),t&&t.hide&&(e.visiblePanels[t.hide]=!1))},x().get("image.svg")}]);angular.module("icomoonApp").controller("EditCtrl",["$scope","glyphs","template","fileSaver","svgPath","hotkeys","message","color",function(e,n,v,a,l,u,w,x){var d,m=e.edit,f=!0,c,y=e.normSize,g;function k(C){var D=y,U=C.width||y;C.translate(-U/2,-D/2)}function B(C){var D=y,U=C.width||y;C.translate(U/2,D/2)}e.pref.gridSize=e.pref.prevSize||16,function(){var C;e.$watch(function(){return JSON.stringify([e.edit.idx,e.edit.icons[e.edit.idx],e.visiblePanels.edit,e.name])},function(){var D=e.edit,U,V=D.idx;if(e.visiblePanels.edit&&D.icons&&D.icons.length){U=D.icons[V],e.icon=U,e.tempIds=U.paths.map(function(J,j){return j});try{e.currentTheme=D.set.colorThemes[D.set.colorThemeIdx].slice(0),c=e.colorThemeKey(e.currentTheme),e.currentTheme.forEach(function(J,j){e.currentTheme[j]={str:x(J).toString()}})}catch(J){e.currentTheme=!1,c=!1}try{e.properties=D.properties?D.properties:D.selection?D.selection[V]:D.set.selection[V],e.name&&V===e.name.idx&&(e.name.name&&!e.properties.hasOwnProperty("name")||e.properties.hasOwnProperty("name")&&e.name.name!==e.properties.name)&&(e.properties.name=e.name.name),e.name={name:e.properties.name||"",idx:V}}catch(J){e.name={name:"",idx:V}}e.noNext=V>D.icons.length-2,e.noPrev=V<1,U.paths&&(g=l(U.paths),g.width=U.width||y),U.tags?e.tags=U.tags.join(", "):e.tags="",e.showColorTools=!!e.currentTheme&&e.currentTheme.length>1||e.hasAttrs(U)}C!==V&&(C=V,e.pathIdx=NaN)})}();function A(C){m.icons&&m.icons.forEach(function(D){D.grid=D.grid||C})}e.$watch(function(){return JSON.stringify([e.icon&&e.icon.grid,e.icon&&e.icon.width])},function(){var C=e.icon&&e.icon.grid,D=m.icons[m.idx].width||y,U=y,V=U/C,J=[],j,G=[];for(d=C,j=0;j*V<=U;)J[j]={y:j*V},j+=1;for(j=0;j*V<=D;)G[j]={x:j*V},j+=1;e.grid={hLines:J,vLines:G}}),e.$on("$destroy",function(){d&&A(d)}),e.$watch("tags",function(C){typeof C=="string"&&(e.icon.tags=C.split(", "))});function M(C){k(g),C(),B(g),m.icons[m.idx].paths=g.getPathData(!0)}e.ccw=function(){M(function(){g.rotate(-90,e.pathIdx)})},e.cw=function(){M(function(){g.rotate(90,e.pathIdx)})},e.flipHorizontal=function(){M(function(){g.transform({a:-1,d:1},e.pathIdx)})},e.flipVertical=function(){M(function(){g.transform({a:1,d:-1},e.pathIdx)})};function E(){return y/(e.icon.grid*2||64)}function F(){var C=angular.element(document.body),D=angular.element(document.getElementById("edit-svg")).clone(),U=e.pathIdx>=0?D.find("path").eq(e.pathIdx):D.find("g"),V={};return D.attr("style","transform: scale(2);"),C.append(D),V.c=D[0].getBoundingClientRect(),V.p=U[0].getBoundingClientRect(),D.remove(),V}e.scale=function(C){var D=F(),U=D.c.height/(e.icon.grid||64),V=(D.p.height+U*(C.dir||1))/D.p.height,J,j;Math.round(V)>0&&(J=V,j=V,C&&C.width===!1&&(J=1),C&&C.height===!1&&(j=1),M(function(){g.scale(J,j,e.pathIdx)}))},e.fitToCanvas=function(){var C,D,U,V;try{C=F(),U=C.c,V=C.p,V.width/V.height>U.width/U.height?D=U.width/V.width:D=U.height/V.height,D!==1&&M(function(){g.scale(D,D,e.pathIdx)})}catch(J){}},e.align=function(C){var D,U,V,J=0,j=0,G=m.icons[m.idx].width||y,re=y;try{D=F(),U=D.c,V=D.p,C==="left"?J=(U.left-V.left)/U.width*G:C==="right"?J=(U.right-V.right)/U.width*G:C==="top"?j=(U.top-V.top)/U.height*re:C==="bottom"?j=(U.bottom-V.bottom)/U.height*re:(V.centerX=(V.left+V.right)/2,V.centerY=(V.top+V.bottom)/2,U.centerX=(U.left+U.right)/2,U.centerY=(U.top+U.bottom)/2,J=(U.centerX-V.centerX)/U.width*G,j=(U.centerY-V.centerY)/U.height*re),M(function(){g.translate(J,j,e.pathIdx)})}catch(le){}},e.moveLayer=function(C){var D=m.icons[m.idx],U;g.moveLayer(e.pathIdx,C),D.paths=g.getPathData(!0),U=D.attrs.map(function(V,J){var j={order:J,attr:V};return D.colorPermutations&&(j.p=D.colorPermutations[J]),j}),U.length&&(U[e.pathIdx].order+=C+(C>0?1:-1),U.sort(function(V,J){return V.order-J.order}),D.colorPermutations&&(D.colorPermutations=U.map(function(V){return V.p})),D.attrs=U.map(function(V){return V.attr})),U=e.pathIdx+C,U>=0&&U<D.paths.length&&(e.pathIdx=U)},e.makeSquare=function(){m.icons[m.idx].width=m.icons[m.idx].height},e.increaseWidth=function(){var C=E();isNaN(m.icons[m.idx].width)&&(m.icons[m.idx].width=y),m.icons[m.idx].width+=C},e.decreaseWidth=function(){var C=E();isNaN(m.icons[m.idx].width)&&(m.icons[m.idx].width=y),m.icons[m.idx].width-=C,m.icons[m.idx].width<0&&(m.icons[m.idx].width=0)},e.translate=function(C,D){var U=E();C=Number(C),C?C=C>0?1:-1:C=0,D=Number(D),D?D=D>0?1:-1:D=0,M(function(){g.translate(C*U,D*U,e.pathIdx)})},e.selectPath=function(C){isNaN(C)?e.pathIdx=NaN:e.pathIdx=C},e.next=function(){m.icons&&m.idx<m.icons.length-1&&(m.idx+=1),f&&(A(d),f=!1)},e.prev=function(){m.icons&&m.idx>0&&(m.idx-=1),f&&(A(d),f=!1)},e.replace=function(C){var D,U,V,J,j=1;if(!C||!C[0]){e.visiblePanels.edit=!1,w.show("Please select an SVG image.").then(function(){e.visiblePanels.edit=!0});return}D=C[0],V=n(D.file),V.length===1&&(U=V[0],e.normSize!==U.viewBox.height&&(j=e.normSize/U.viewBox.height,U.scale(j)),J=m.icons[m.idx],J.paths=V[0].getPathData(!0),J.attrs=U.getAttrs(!0),j!==1&&(J.attrs=J.attrs.map(function(G){return G.strokeWidth>0&&(G.strokeWidth*=j),G})),m.set&&(delete J.colorPermutations,delete J.isMulticolor,delete J.isMulticolor2,e.simplifyIcon(J),e.addColorPermutations([J],m.set))),m.set&&m.set.colorThemes&&e.extractColorTheme(m.set)},e.makeCopy=function(C){for(var D=JSON.parse(JSON.stringify(C)),U=0;U<m.set.icons.length&&C!==m.set.icons[U];)U+=1;U>=m.set.icons.length||(D.id=e.getNextId(m.set.icons),m.set.selection.splice(U+1,0,{order:0}),m.set.icons.splice(U+1,0,D),e.searchResults[m.set.id].splice(U+1,0,e.searchResults[m.set.id][U]),e.visiblePanels.edit=!1)},e.downloadIcon=function(C){var D,U,V,J,j=!1,G,re,le,he,fe,de=v().get("image.svg"),Be;for(re=l(C.paths),re.viewBox={width:C.width||y,height:C.height||y},he=(C.grid||32)*32/re.viewBox.height,re.scale(he),le=re.getPathData(!0),U=0,J=le.length;U<J;U+=1)le[U]={d:le[U],strAttrs:C.attrs&&C.attrs[U]?e.stringifyAttrs(C.attrs[U],{scale:he}):""};if(G=C.tags,G&&(G=G[0]),G||(G="icomoon"),e.pref.showGrid&&C.grid){for(j=[],V=!0,Be=re.viewBox.width,D=re.viewBox.height,fe=Math.round(D/C.grid/2),U=fe;U<Be;U+=fe)j.push({y1:0,y2:D,x1:U,x2:U,opacity:V?.3:1}),V=!V;for(V=!0,U=fe;U<D;U+=fe)j.push({y1:U,y2:U,x1:0,x2:Be,opacity:V?.3:1}),V=!V}de.then(function($){a().save(G+".svg",$.fillup({paths:le,width:re.viewBox.width,height:re.viewBox.height,lines:{lines:j}}))})},e.getWidth=function(C){var D=e.icon,U;return D?(U=D.width,isNaN(U)&&(U=y),Math.round(U/(D.height||y)*C)+"%"):0},e.removeColors=function(){var C=e.icon;C.attrs=e.clearAttrs(C.attrs),C.colorPermutations={}},e.updateColor=function(C,D){var U,V=e.icon,J=e.pathIdx,j,G=C==="fill"?"f":"s";V.colorPermutations||(V.colorPermutations={}),U=e.currentTheme[D].str,!V.colorPermutations[c]||!V.colorPermutations[c][J]?(V.colorPermutations[c]=[],V.attrs=e.clearAttrs(V.attrs),V.paths.forEach(function(re,le){j={},V.attrs[le]=V.attrs[le]||{},le===J&&(V.attrs[le][C]=U,j[G]=D),V.colorPermutations[c][le]=j})):(V.colorPermutations[c][J][G]=D,(!V.attrs||!V.attrs.length)&&(V.attrs=e.clearAttrs(V.attrs),V.paths.forEach(function(re,le){V.attrs[le]=V.attrs[le]||{},V.attrs[le][C]=U,V.colorPermutations[c][le][G]=D})),V.attrs[J]=V.attrs[J]||{},V.attrs[J][C]=U),V.isMulticolor=e.isMulticolor(V.attrs),m.set&&m.set.colorThemes&&e.extractColorTheme(m.set)},e.deletePath=function(C){g.deleteSubPath(C);var D=m.icons[m.idx];D.paths=g.getPathData(!0),D.attrs.splice(C,1),m.set&&m.set.colorThemes&&e.extractColorTheme(m.set)},u.add({arr:[{keys:"left",down:e.prev},{keys:"right",down:e.next}],scope:e,id:"edit"})}]);angular.module("icomoonApp").controller("FontCtrl",["$scope","$state","$q","$sce","$timeout","svgPath","font","template","fileSaver","cloud","message","color",function(e,n,v,a,l,u,w,x,d,m,f,c){var y,g=!1,k=[],B=[[33,126],[59648,65535],[983040,1048575]],A,M,E,F,C=e.fontPref.woffOutlines||"truetype";B.idx={bLatin:0,pua:1,spua:2},m.hasCloudAccess().then(function(){g=!0},function(){e.fontPref.embed=!1});function D($){var oe,ee,ce,xe;if(typeof $=="string")$?ee=B.idx[$]:ee=1;else{if(typeof $=="number")return k.indexOf($)===-1?(k.push($),$):D($+1);ee=1}for(xe=B[ee],ce=xe[1],oe=xe[0];oe<ce;oe+=1)if(k.indexOf(oe)===-1)return k.push(oe),oe;return ee+1<B.length&&D(ee+1),0}function U($){$.split?$=$.split(/\s*,\s*/):$.slice&&($=$.slice(0));var oe=e.pref.fontPref.prefix;return $.forEach(function(ee,ce){var xe=1;if((!oe||oe==="")&&(ee=ee.replace(/^[^a-z_]+/i,"")),ee=ee.replace(/\s+/g,"-").replace(/[^a-z0-9_-]/ig,""),!!$){if(M.indexOf(ee)!==-1){for(;M.indexOf(ee+xe)!==-1;)xe+=1;ee=ee+xe}$[ce]=ee,M.push(ee)}}),$.join(", ")}function V($){var oe=e.fontPref.metrics.baseline/100,ee,ce=e.fontPref.metrics,xe=[],be,ue,N,W,T,Y,K=e.normSize,t,r,s,o,h={};ce?(ce=ce.emSize,ee=-oe*ce):(ce=1024,ee=-.0625*1024),F=e.sortByGrid(F),T=F.length;function p(P){s=u(P),s.viewBox={width:isNaN(N.width)?K:N.width,height:isNaN(N.height)?K:N.height},$&&o&&s.translate(0,o),xe.push({svgPath:s,s:r})}function b(P,O){var S=!0;try{N.attrs[O].fill==="none"&&(S=!1)}catch(I){}return S}for(ue=0;ue<T;ue+=1)r=F[ue],N=r.icon,$&&(be=N.grid||r.properties.prevSize||W||16,W=be,h[be]?o=h[be]:(Y=Math.round(oe*be),o=Y*ce/be-oe*ce,o=o/(ce/K),h[be]=o)),N.isMulticolor&&N.attrs.length!==N.paths.length&&(N.isMulticolor=!1),N.isMulticolor?N.paths.slice(0).forEach(p):(t=u(N.paths.filter(b)),t.viewBox={width:isNaN(N.width)?K:N.width,height:isNaN(N.height)?K:N.height},$&&o&&t.translate(0,o),xe.push({svgPath:t,s:r}));return{glyphs:xe,emSize:ce,ascent:ce+ee,descent:ee,unitsPerEm:ce,defaultAdvX:ce}}function J(){var $,oe;$=V(!0),$.glyphs.length?(oe=w($).generate({ttf:!0}).ttf,l(function(){URL&&URL.createObjectURL&&Blob?(URL.revokeObjectURL(e.localFont),e.localFont=URL.createObjectURL(new Blob([oe],{type:"application/x-font-ttf"}))):e.localFont="data:application/x-font-ttf;charset=utf-8;base64,"+oe.toString(!0)},0)):e.localFont=""}e.quickUsage={statusMessage:"Working\u2026"},function(){var $;e.pref.fontUrlS3&&(e.quickUsage.url2=e.pref.fontUrlS3),e.pref.fontCF?($=new Date().getTime()-e.pref.fontCF.time||0,$>2?e.quickUsage.url3=e.pref.fontCF.url:(e.quickUsage.url3="...",l.cancel(y),y=l(function(){e.quickUsage.url3=e.pref.fontCF.url},2-$))):e.pref.fontUrlCF&&(e.quickUsage.url3=e.pref.fontUrlCF)}(),e.hostFont=function($){var oe=e.fontPref,ee=$&&$.enable,ce=$&&$.onlyDev&&e.pref.fontUploadTime,xe=Be(!0),be;!oe.autoHost&&!ee||(oe.autoHost=!0,x().get("demo2.html.tmpl"),x().get("demo2.css.tmpl"),be=e.project.metadata.name.replace(/[^a-zA-Z\-\_0-9]/g,""),ce=ce&&e.pref.fontHostingName===be,(!e.pref.quickUsageToken||!e.pref.quickUsageToken[be])&&(e.pref.quickUsageToken={}),e.onlineEditor={disabled:!0},e.quickUsage.icon="sync fgc-warning",e.quickUsage.statusMessage="Uploading\u2026",ce?e.quickUsage.updateCaption="Update":(e.quickUsage.updateCaption="Uploading\u2026",e.quickUsage.hostingDisabled=!0),xe.promise.then(function(){var ue={hash:xe.hash,zip:xe.zip.getArrayBuffer().toString(!0),name:be,token:e.pref.quickUsageToken[be],ssl:!0,onlyDev:ce},N,W="";e.ttfSize=xe.ttfSize+" bytes",e.history.ignore=!0,m.host(ue).then(function(T){m.hasCloudAccess().then(null,function(){!T.path2&&!T.path3&&(W="\nIt will expire in 24 hours. ")}).finally(function(){var Y=ce?e.pref.fontUrlHash||0:xe.hash.toString(36);W=W||"\nFor development purposes only. Do not use in Production.",e.quickUsage.url=T.path+"/style.css",e.quickUsage.url2=T.path2?T.path2+"/style.css?"+Y:!1,e.onlineEditor.data=JSON.stringify({html:"<!-- Add the following link to the <head> of your HTML."+W+' -->\n<link rel="stylesheet" href="'+e.quickUsage.url+'">\n'+xe.onlineEditor.html,css:xe.onlineEditor.css}),e.onlineEditor.disabled=!1,e.pref.quickUsageToken[be]=T.token,e.history.ignore=!0,e.quickUsage.icon="check fgc-success",e.quickUsage.statusMessage="Ready",!ce&&T.path2&&(N=new Date,e.pref.fontUploadTime=N.toLocaleDateString()+", "+N.toLocaleTimeString(),e.pref.fontUrlS3=e.quickUsage.url2,e.pref.fontCF={url:T.path3?T.path3+"/style.css?"+Y:"Error",time:N.getTime()},e.quickUsage.url3="...",l.cancel(y),y=l(function(){e.quickUsage.url3=e.pref.fontCF.url},2),e.pref.fontUrlHash=Y,e.pref.fontHostingName=be),T.path2||(e.pref.fontHostingName=void 0,e.fontUploadTime=void 0,e.quickUsage.url2=void 0,e.quickUsage.url3=void 0,e.pref.fontUploadTime=void 0,e.pref.fontUrlS3=void 0,e.pref.fontCF=void 0),ce||(e.quickUsage.hostingDisabled=!1,e.quickUsage.updateCaption="Update")})},function(){e.quickUsage.icon="warning fgc-error",e.quickUsage.statusMessage="Upload Failed",ce||(e.quickUsage.hostingDisabled=!1,e.quickUsage.updateCaption="Update")})}))};function j($){for(var oe=0,ee=$,ce,xe;ee>1;)ee/=2,oe+=1;return ce=Math.pow(2,oe),xe=Math.pow(2,oe-1),Math.abs($-xe)<Math.abs($-ce)?xe:ce}function G(){F.length<500?de({ttf:!0}).ttfReady.then(function($){e.ttfSize=$.byteLength+" bytes"}):e.ttfSize="unknown"}function re(){return F.some(function($){try{return $.icon.attrs.some(function(oe){return!!oe.strokeWidth})}catch(oe){return!1}})}function le(){F.forEach(function($){$.icon.attrs.some(function(oe){return oe&&oe.strokeWidth})&&($.properties.order=0)})}function he(){return F.map(function($){return $.icon.isMulticolor?$.icon.attrs.length:1}).reduce(function($,oe){return $+oe},0)}(function(){var $=0,oe,ee=[],ce=!0,xe;e.$watch(function(){return F=e.getSelectedIcons(),JSON.stringify(F)+e.history.idx},function(){var ue,N=NaN,W,T,Y,K,t=e.fontPref,r,s=0,o,h=59648,p=e.normSize,b,P=F.length,O=e.getSelectionHash(),S,I=!1;if(ce&&re()&&f.show({message:'<p class="mtn">Strokes get ignored when generating fonts. <br />You can <a target="_blank" href="https://icomoon.io/docs/#stroke-to-fill">convert them to fills</a> to prevent this.</p><p>Would you like to deselect icons containing&nbsp;strokes?</p>',firstButton:{caption:"Deselect"},secondButton:{caption:"Continue",focused:!0}}).then(function(X){X==="Deselect"&&le()}),k=[],M=[],e.glyphNames={empty:""},e.ligatures={},(P>$||P===$&&O!==oe)&&(I=!0),!I){for(W=0;W<P;W+=1)if(b=F[W],!b.properties.tempChar||!A[W]){I=!0;break}}for(I&&($=P,A=[],e.glyphSets=[]),oe=e.getSelectionHash(),e.ligaWarning=!1,S=F.slice(0),S.sort(function(X,z){return X.properties.order-z.properties.order}),Y=0,W=0;W<P;W+=1)if(b=S[W],r=b.icon,ue=b.properties.code,isNaN(ue)||(b.properties.code=D(ue)),o=b.properties.name,o&&(b.properties.name=U(o)),r.isMulticolor&&r.paths.length<2&&(r.isMulticolor=!1,delete b.properties.codes),r.isMulticolor&&b.properties.codes)if(s+=1,b.properties.code!==b.properties.codes[0])b.properties.codes=!1;else for(T=1;T<r.attrs.length;T+=1)b.properties.codes[T]=D(b.properties.codes[T]);for(e.fewMulticolors=s/P<.5||s<10&&s!==P,e.hasMulticolor=s>0,F=e.sortByGrid(F),W=0;W<P;W+=1){if(b=F[W],r=b.icon,ue=b.properties.code,isNaN(ue)&&(ue=r.defaultCode,isNaN(ue)&&(ue="pua"),ue=D(ue),b.properties.code=ue),r.isMulticolor&&!b.properties.codes)for(b.properties.codes=[ue],T=1;T<r.attrs.length;T+=1)b.properties.codes.push(D(ue));if(o=b.properties.name,o||(!o&&r.tags&&(o=r.tags[0].replace(/[^\w\d\-\_]/g,""),t.prefix.trim()||(o=o.replace(/^\d+/,""))),o||(o="uni"+ue.toString(16).toUpperCase()),o=U(o)),b.properties.name=o,I)if(b.properties.tempChar=String.fromCodePoint(h),h+=1,r.isMulticolor)for(b.properties.tempChar=[b.properties.tempChar],S=[],T=0;T<r.attrs.length;T+=1)T&&(b.properties.tempChar.push(String.fromCodePoint(h)),h+=1),A.push({grid:r.grid,properties:T===0?b.properties:{code:b.properties.codes[T]},icon:r,selectionIdx:W,hide:T>0,marginLeft:S,setId:b.setId,iconIdx:b.iconIdx,idx:A.length}),S.push(T>0?-((isNaN(r.width)?p:r.width)/(isNaN(r.height)?p:r.height))+"em":0),Y+=1;else A.push({grid:r.grid,properties:b.properties,icon:r,selectionIdx:W,setId:b.setId,iconIdx:b.iconIdx,idx:A.length}),Y+=1;else if(r.isMulticolor)for(T=0;T<r.attrs.length;T+=1)T===0?(A[Y].properties=b.properties,S=[],A[Y].marginLeft=S):A[Y].properties={code:b.properties.codes[T]},A[Y].icon=r,A[Y].grid=r.grid,A[Y].hide=T>0,S.push(T>0?-((isNaN(r.width)?p:r.width)/(isNaN(r.height)?p:r.height))+"em":0),A[Y].selectionIdx=W,Y+=1;else A[Y].properties=b.properties,A[Y].grid=r.grid,A[Y].selectionIdx=W,A[Y].icon=r,A[Y].hide=!1,Y+=1;K=b.properties.ligatures,r.isMulticolor&&typeof K=="string"&&(b.properties.ligatures="")}for(e.numOfGlyphs=he(),e.tmp.resetTo=e.numOfGlyphs,I&&!ce&&J(),A.splice(Y),T=-1,Y=0,W=0;W<A.length;W+=1)A[W].grid!==N&&(N=A[W].grid,T+=1,ee[T]=ee[T]||[],ee[T].grid=N,T!==-1&&ee[T].splice(Y),Y=0),ee[T][Y]=A[W],ee[T][Y].properties.prevSize=ee[T][0].properties.prevSize||N||32,Y+=1;Y&&T!==-1&&ee[T].splice(Y),ee.splice(T+1),e.glyphSets=ee,ce=!1,l.cancel(xe),xe=l(function(){e.fontPref.autoHost?e.hostFont({onlyDev:!0}):G()},2e3)});var be;e.$watch(function(){return{fontPref:e.fontPref,showLiga:e.pref.showLiga}},function(ue){var N=ue.fontPref,W=N.metrics,T=JSON.stringify(W);l.cancel(xe),xe=l(function(){e.fontPref.autoHost?e.hostFont({onlyDev:!0}):G()},2e3),!N.prefix.trim()&&!N.prefix.trim()&&(N.selector||(N.prefix="icon-")),N.selector==="class"&&(N.classSelector=N.classSelector||"",N.classSelector="."+(N.classSelector.replace(/[^a-zA-Z\-\_0-9]/g,"").replace(/^[^a-zA-Z_\-]/,"").replace(/^-([^a-zA-Z_])/,"")||"icon")),N.prefix&&(N.prefix=N.prefix.replace(/\s+/,"-")),N.postfix&&(N.postfix=N.postfix.replace(/\s+/,"-")),N.noie8&&(N.ie7=!1),N.ie7&&(N.noie8=!1);try{N.metadata.fontFamily=N.metadata.fontFamily.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z\-\_0-9]/g,""),N.metadata.fontFamily=N.metadata.fontFamily.slice(0,31)}catch(Y){N.metadata.fontFamily="icomoon"}N.metadata.fontFamily==="svgdefs"&&(N.metadata.fontFamily="icomoon"),W.emSize=j(W.emSize),be!==T&&(be=T,W&&!isNaN(W.baseline)&&J()),N.cssVars&&((!N.cssVarsFormat||N.cssVarsFormat==="scss_new")&&(N.cssVarsFormat="scss_new"),N.cssVarsFormat==="stylus"&&(N.cssVarsFormat="styl"),N.cssVarsFormat==="scss"?x().get("variables.scss.tmpl"):x().get("variables.tmpl"),!N.cssVarsFormat||N.cssVarsFormat==="scss"||N.cssVarsFormat==="scss_new"?x().get("style.scss.tmpl"):N.cssVarsFormat==="less"?x().get("style.less.tmpl"):N.cssVarsFormat==="styl"&&x().get("style.styl.tmpl")),N.ie7&&(x().get("ie7.js.tmpl"),x().get("ie7.css.tmpl"))},!0)})();function fe($,oe){var ee=e.fontPref.metrics.emSize,ce,xe=[],be=[];if($.kerning)try{ce=JSON.parse($.kerning),Object.keys(ce).forEach(function(ue){isNaN(ce[ue])||ue.replace(/\s+/g,"").split("").forEach(function(N){N=N.charCodeAt(0),xe.indexOf(N)===-1&&(xe.push(N),be.push({left:oe,right:N,value:$.grid?Math.round(ce[ue]*ee/$.grid):Math.round(ce[ue])}))})})}catch(ue){}return be}function de($){var oe=v.defer(),ee,ce,xe,be,ue,N,W=e.fontPref,T,Y=!1,K=[],t,r,s,o=W.metadata,h,p=!1,b=e.pref.showLiga,P;for(o||(o={},W.metadata=o),ue=V(!0),ce=0,r=ue.glyphs.length;ce<r;ce+=1)if(T=ue.glyphs[ce],xe=T.s.icon,xe.isMulticolor){for(be=0;be<xe.attrs.length;be+=1)T=ue.glyphs[ce+be],T.code=T.s.properties.codes[be];ce+=be-1}else T.code=T.s.properties.code,T.code===32&&(h=!0),T.code===48&&(p=!0),W.includeMetadata&&(T.tags=xe.tags),T.name=T.s.properties.name,b&&(s=T.s.properties.ligatures,s&&s.length>1&&(T.ligatures=[],s=s.split(/,\s*/),s.forEach(function(O){try{var S=O.replace(/\[COMMA\]/g,",");T.ligatures.push(S)}catch(I){T.ligatures.push(O)}}),Y=!0),(!t||T.code>t.code)&&(t=T)),xe.kerning&&(K=K.concat(fe(xe,T.code)));return Y&&(t.ligatures||(t.ligatures=[]),P=t.code+1,P<=65533&&(P=String.fromCharCode(P),P+=P,t.ligatures.push(P))),h||ue.glyphs.push({code:32,advX:W.metrics.whitespace/100*(W.metrics.emSize||1024)}),W.addZero&&!p&&ue.glyphs.push({code:48,advX:W.metrics.emSize||1024}),ue.glyphs.push({code:0,advX:0}),ue.glyphs.push({code:1,advX:0}),K.length&&(ue.kerningPairs=K),W.includeMetadata||(o={fontFamily:o.fontFamily||"icomoon",majorVersion:o.majorVersion,minorVersion:o.minorVersion}),ue.metadata=o,$=$||{woff:C,ttf:!0,svg:!0,eot:!W.noie8},N=w(ue).generate($),P={ready:oe.promise},P.ready=oe.promise,N.ttf&&(ee=v.defer(),P.ttfReady=ee.promise,ee.resolve(N.ttf)),N.woff&&(ee=v.defer(),P.woffReady=ee.promise,ee.resolve(N.woff)),!W.noie8&&N.eot&&(ee=v.defer(),P.eotReady=ee.promise,ee.resolve(N.eot)),N.svg&&(ee=v.defer(),P.svgReady=ee.promise,ee.resolve(N.svg)),!$.woff||!$.ttf?oe.resolve():m.hasCloudAccess().then(function(){m.getWoff2({ttf:N.ttf.toString(!0)}).then(function(O){ee=v.defer(),P.woff2Ready=ee.promise,ee.resolve(O),oe.resolve()},function(){oe.resolve()})},function(){oe.resolve()}),P}function Be($){var oe=de(),ee=e.fontPref,ce=ee.metadata&&ee.metadata.fontFamily||"icomoon",xe=$?"":"fonts/",be=d(),ue,N={},W,T=ee.prefix||ee.postfix,Y=v.defer(),K=v.defer(),t=v.defer(),r=v.defer(),s=v.defer(),o=v.defer(),h=v.defer(),p=v.defer(),b=v.defer(),P=v.defer(),O=v.defer();return ee.selector&&(T=ee.classSelector||".icon",T=T.slice(1)),ee.cssVars||r.resolve(),(!ee.flutter||$)&&s.resolve(),oe.ttfReady&&oe.ttfReady.then(function(S){be.add(xe+ce+".ttf",S),N.ttfSize=S.byteLength}),oe.woffReady&&oe.woffReady.then(function(S){be.add(xe+ce+".woff",S)}),!ee.noie8&&oe.eotReady&&oe.eotReady.then(function(S){be.add(xe+ce+".eot",S)}),oe.svgReady&&oe.svgReady.then(function(S){ee.includeMetadata||(S=S.replace(/(<metadata>)[\s\S]*(<\/metadata>)/,"$1Generated by IcoMoon$2")),be.add(xe+ce+".svg",S)}),oe.ready.then(function(){oe.woff2Ready?oe.woff2Ready.then(function(S){be.add(xe+ce+".woff2",S,{base64:!0}),O.resolve()},function(){O.resolve()}):O.resolve()}),W=JSON.parse(JSON.stringify(F)),W.forEach(function(S){delete S.properties.tempChar,delete S.icon.id,delete S.icon.matchesSearch}),W={IcoMoonType:"selection",icons:W,height:e.normSize,metadata:{name:ee.metadata.fontFamily,url:ee.metadata.fontURL,designer:ee.metadata.designer,designerURL:ee.metadata.designerURL,license:ee.metadata.license,licenseURL:ee.metadata.licenseURL},preferences:e.pref},ue=JSON.stringify(W),be.addUnicodeString("selection.json",ue),ue=(ue+e.project.metadata.name).hashCode(),x().get("demo.html").then(function(S){var I,X,z,H,Z,Q=-1,R,L,q,_=e.pref.showLiga?[]:!1,ie=[],te,ye=[],Ce,pe=[],ve=[],se,me,Se=[],ne,ge;for(_&&(X=function(we){we&&(we=we.replace(/\[COMMA\]/g,","),ie.push({tag:we,code:ne.code}),Se.push(we))}),H=0,L=e.glyphSets.length;H<L;H+=1)ne=e.glyphSets[H],ye[H]={},ye[H].tmpGlyphs=ne,pe[H]={idx:H+1,size:ne[0].properties.prevSize},ye[H].grid=ne.grid||"Unknown";for(z={prefix:ee.prefix,postfix:ee.postfix,hiddenLiga:!_,hiddenCodes:!1,selector:ee.selector==="class"?T+" ":"",element:ee.selector==="i"?"i":"span"},!z.prefix&&!z.postfix&&(z.prefix=""),H=0;H<L;H+=1)for(ye[H].glyphs=[],ye[H].fontSizeIdx=H+1,Q=0,q=ye[H].tmpGlyphs.length;Q<q;Q+=1){if(se=ye[H].tmpGlyphs[Q],te=se.properties,Z=se.icon,ne=Object.create(z),ne.glyphName=te.name.replace(/\s+/g," ").split(/\s*,\s*/),ne.code=te.code.toString(16),ne.char=te.code,ne.liga=te.ligatures,ne.paths=!1,Z.isMulticolor){for(ne.paths=[],ne.glyphName.splice(1),ne.single=!1,R=0;R<Z.attrs.length;R+=1)ne.paths[R]={},ne.paths[R].name="path"+(R+1),ne.paths[R].marginLeft=se.marginLeft[R]!==0?{value:se.marginLeft[R]}:!1,ne.paths[R].color={value:Z.attrs[R].fill},Z.attrs[R].opacity&&Z.attrs[R].opacity!==1?ne.paths[R].opacity={value:e.fixed(Z.attrs[R].opacity,4)}:ne.paths[R].opacity=!1,ne.paths[R].glyphName=ne.glyphName[0],ne.paths[R].code=ye[H].tmpGlyphs[Q+R].properties.code.toString(16),ne.paths[R].pathIdx=R+1,ne.paths[R].pathClass=" .path"+(R+1),ne.paths[R].prefix=z.prefix,ne.paths[R].postfix=z.postfix;Q+=R-1}else if(ne.single={code:ne.code,prefix:z.prefix,postfix:z.postfix,glyphName:ne.glyphName},!Z.isMulticolor)try{Z.attrs[0].fill&&Z.attrs[0].fill!=="none"?ne.single.color={value:c(Z.attrs[0].fill).toString({hex:!0,forCSS:!0})}:ne.single.color=!1}catch(we){ne.single.color=!1}if(_&&ne.liga&&ne.liga.split(/,\s*/).forEach(X),ne.fontSizeIdx=H+1,ne.glyphName.length>1)for(I=ne.glyphName,R=0;R<I.length;R+=1)ge=Object.create(ne),ne.single?(ge.single=Object.create(ge.single),ge.glyphName=ge.single.glyphName=I[R]):ge.glyphName=I[R],ve.push(ge),ye[H].glyphs.push(ge);else ne.glyphName=ne.glyphName[0],ve.push(ne),ye[H].glyphs.push(ne)}if(_=!!ie.length,me=ee.selector==="i"?"icomoon-liga":T,$?(N.onlineEditor={},x().get("demo2.html").then(function(we){N.onlineEditor.html=we.fillup({sets:ye}),P.resolve()}),x().get("demo2.css").then(function(we){N.onlineEditor.css=we.fillup({fontSizes:pe}),b.resolve()}),Y.resolve(),K.resolve()):(be.addUnicodeString("demo.html",S.fillup({fontName:ce,glyphsCount:F.length,sets:ye,ie7:ee.ie7?[]:!1,liga:_,ligaClass:me,testDrive:Se.join(" ")})),P.resolve(),x().get("demo.js").then(function(we){be.add("demo-files/demo.js",we.fillup({})),Y.resolve()}),x().get("demo.css").then(function(we){be.add("demo-files/demo.css",we.fillup({fontSizes:pe})),b.resolve()}),x().get("readme.txt").then(function(we){be.add("Read Me.txt",we.fillup({})),K.resolve()})),Ce={fontsDir:xe,fontFamily:ce},x().get("style.css").then(function(we){var Ee=!1;oe.ready.then(function(){oe.woff2Ready&&(Ee=!0)}).finally(function(){var ae={fontFamily:ce,glyphs:ve,fontFace:"",fontFaceB64:""};ee.selector==="i"?(ae.selector="i",_&&(ae.selector+=", .icomoon-liga")):ee.selector==="class"?ae.selector=ee.classSelector:(ee.postfix&&(ae.selector='[class$="'+ee.postfix+'"], [class*="'+ee.postfix+' "]'),(!ae.selector||ee.prefix)&&(ae.selector='[class^="'+T+'"], [class*=" '+T+'"]')),ae.fontFace=Ce,g&&ee.embed?ae.fontFaceB64=Ce:(ae.fontFace=Ce,ae.fontFace.hash=ue.toString(36),ae.fontFace.cacheBuster="?"+ae.fontFace.hash),ae.liga=_,ae.fontFace=Ce,ee.noie8?(ae.fontFace.eot=!1,ae.fontFace.eot2=!1):(ae.fontFace.eot=Ce,ae.fontFace.eot2=Ce),g&&ee.embed?oe.ttfReady.then(function(Fe){Ce.ttf=Fe.toString(!0),ae.fontFaceB64.eot=ee.noie8?!1:Ce,ae.fontFace="",be.add("style.css",we.fillup(ae).replace(/\n\n$/,"\n")),t.resolve(ae)}):(Ee?ae.fontFace.woff2=ae.fontFace:ae.fontFace.woff2=!1,be.add("style.css",we.fillup(ae).replace(/\n\n$/,"\n")),t.resolve(ae))})}),ee.flutter&&!$&&x().get("flutter.dart.tmpl").then(function(we){var Ee=ve.map(function(Fe){return{code:Fe.code,glyphName:Fe.glyphName.split(/[\s\-_]+/).map(function(Me,Pe){return Pe>0?Me.slice(0,1).toUpperCase()+Me.slice(1):Me.slice(0,1).toLowerCase()+Me.slice(1)}).join("")}}),ae=ce.replace(/[\s\-]/g,"_");be.add(ce+"_icons.dart",we.fillup({fontName:ce,class:ae[0].toUpperCase()+ae.slice(1),glyphs:Ee})),s.resolve()}),ee.cssVars){var Ae="variables.tmpl";(!ee.cssVarsFormat||ee.cssVarsFormat==="scss")&&(Ae="variables.scss.tmpl"),x().get(Ae).then(function(we){var Ee,ae,Fe=ee.cssVarsFormat||"scss_new",Me,Pe,De,ke,Ue,Ne;ve.length===0?Ne=!1:Ne=ve,Fe==="scss"||Fe==="scss_new"?(Pe=": ",Me="$",ae="scss",Ee=";",De="#{$icomoon-font-path}",ke="#{$icomoon-font-family}"):Fe==="styl"?(Pe=" = ",Me="",ae="styl",Ee="",De=""):Fe==="less"&&(Pe=": ",Me="@",ae="less",Ee=";",De="@{icomoon-font-path}",ke="@{icomoon-font-family}"),Ue={separator:Pe,ending:Ee,indicator:Me},we.fillup({glyphs:Ne&&[{single:Ue,paths:[Ue]}]}),be.add("variables."+ae,we.fillup({glyphs:Ne,filepath:function(){var Te=$?".":"fonts";if(Fe==="scss"||Fe==="scss_new")return'$icomoon-font-family: "'+ce+'" !default;\n$icomoon-font-path: "'+Te+'" !default;';if(Fe==="less")return'@icomoon-font-family: "'+ce+'";\n@icomoon-font-path: "'+Te+'";';if(Fe==="styl")return'icomoon-font-path ?= "'+Te+'"'}()})),t.promise.then(function(Te){var Ie="style.";Fe==="styl"?Ie+="styl":Fe==="less"?Ie+="less":Ie+="scss",Ie+=".tmpl",x().get(Ie).then(function(Le){Le.fillup({variables:Fe==="scss_new"?'@use "variables" as *;':'@import "variables";',glyphs:Ne&&[{single:Ue,paths:[Ue]}]}),Te.fontFamilyVar=ke,Te.fontFace&&(Te.fontFace.fontPathVar=De,Te.fontFace.fontFamilyVar=ke),Te.fontFaceB64&&(Te.fontFaceB64.fontFamilyVar=ke),Le.fillup(Te),be.add("style."+ae,Le.fillup({glyphs:Ne})),r.resolve()})})})}ee.ie7?(x().get("ie7.css").then(function(we){be.add($?"ie7.css":"ie7/ie7.css",we.fillup({glyphs:ve})),h.resolve()}),x().get("ie7.js").then(function(we){be.add($?"ie7.js":"ie7/ie7.js",we.fillup({glyphs:ve,fontFamily:ce,prefix:ee.prefix})),o.resolve()})):(o.resolve(),h.resolve()),_?x().get("liga.js").then(function(we){be.addUnicodeString("liga.js",we.fillup({ligaTags:ie,ligaClass:me})),p.resolve()}):p.resolve()}),N.hash=ue,N.name=ce,ee.metadata.majorVersion!==void 0&&ee.metadata.minorVersion!==void 0&&(N.name+="-v"+ee.metadata.majorVersion+"."+ee.metadata.minorVersion),N.zip=be,N.promise=v.all([Y.promise,K.promise,t.promise,o.promise,h.promise,p.promise,b.promise,P.promise,O.promise,s.promise]),N}e.download=function(){e.downloading=!0;var $=Be();$.promise.then(function(){$.zip.save($.name+".zip").then(function(){e.downloading=!1})})},e.validateCode=function($,oe){var ee;return $>=55296&&$<=57343||(ee=k.indexOf($),$<0)?!1:ee===-1||k[ee]===oe},e.showUniCharts=function($){x().get("uniCharts.html").then(function(oe){e.uniCharts=a.trustAsHtml(oe.fillup())}),E=$,e.visiblePanels.uniCharts=!0},e.assignCode=function($){E.properties.code=parseInt($.target.value,16),e.visiblePanels.uniCharts=!1},e.resetCodes=function($,oe){var ee,ce,xe=e.fontPref.resetPoint||0;for($=Number($)||0,$<0&&($=0),oe=Number(oe),oe>=A.length&&(oe=A.length-1),xe>126&&xe<161&&(xe=161),k=[],ee=0;ee<$;ee+=1)A[ee].properties.code=D(A[ee].properties.code);for(ee=oe+1;ee<A.length;ee+=1)A[ee].properties.code=D(A[ee].properties.code);for(ee=$;ee<=oe;ee+=1)xe=D(xe),A[ee].properties.code=xe,xe+=1;e.visiblePanels.reset=!1},e.resetLigatures=function($,oe){var ee,ce,xe=e.fontPref.ligaReset==="tags",be=A.length;for($=Number($)||0,$<0&&($=0),oe=Number(oe),oe>=A.length&&(oe=A.length-1),M=[],ee=0;ee<$;ee+=1)A[ee].isMulticolor||(A[ee].properties.ligatures=U(A[ee].properties.ligatures||""));for(ee=oe+1;ee<be;ee+=1)A[ee].isMulticolor||(A[ee].properties.ligatures=U(A[ee].properties.ligatures||""));for(ee=$;ee<=oe;ee+=1)A[ee].isMulticolor||(ce=A[ee].icon,A[ee].properties.ligatures=U((xe?ce.tags.slice(0,2):A[ee].properties.name)||""));e.visiblePanels.reset=!1},e.removeGlyph=function($){$.properties.order=0},e.editGlyph=function($){F=e.sortByGrid(F);var oe=F[$.selectionIdx],ee=[oe.iconIdx];ee.properties=$.properties,ee.noNavigation=!0,e.changeIcons(ee,oe.setIdx,"edit")},e.max=Math.max,e.$on("$stateChangeStart",function(){URL&&URL.createObjectURL&&Blob&&URL.revokeObjectURL(e.localFont)}),e.getEmbedCode=function($){var oe=$.properties.code.toString(16),ee="",ce,xe=e.fontPref,be,ue,N=$.icon,W=$.properties.ligatures,T,Y=$.properties.name.trim().split(/\s*,+\s*/)[0],K="",t;if(ce=xe.selector==="i"?"i":"span",be=(xe.prefix||"")+Y+(xe.postfix||""),xe.selector==="class"&&(ee=xe.classSelector.slice(1)+" "),!N.isMulticolor)try{N.attrs[0].fill&&N.attrs[0].fill!=="none"&&(K="  color: "+c(N.attrs[0].fill).toString({hex:!0,forCSS:!0})+";\n")}catch(r){}if(e.embedCodes={html:"<"+ce+' class="'+ee+be+'">',css:"."+be+':before {\n  content: "\\'+oe+'";\n'+K+"}",htmlEntity:"&#x"+oe+";",character:String.fromCodePoint($.properties.code)},N.isMulticolor)for(e.embedCodes.css="",ue=0;ue<N.attrs.length;ue+=1)oe=$.properties.codes[ue].toString(16),t="\n  color: "+c(N.attrs[ue].fill).toString({hex:!0,forCSS:!0})+";",N.attrs[ue].opacity&&N.attrs[ue].opacity!==1&&(t+="\n  opacity: "+e.fixed(N.attrs[ue].opacity,4)+";"),ue>0&&(e.embedCodes.htmlEntity+="&#x"+oe+";",e.embedCodes.character+=String.fromCodePoint($.properties.codes[ue]),t+="\n  margin-left: "+$.marginLeft[ue]+";",e.embedCodes.css+="\n"),e.embedCodes.css+="."+be+" .path"+(ue+1)+':before {\n  content: "\\'+oe+'";'+t+"\n}",e.embedCodes.html+='<span class="path'+(ue+1)+'"></span>';e.embedCodes.cssLines=e.embedCodes.css.match(/\n/g).length+1,e.embedCodes.html+="</"+ce+">",e.pref.showLiga&&W&&(ce==="i"?T="":T=' class="'+(ee.trim()||xe.prefix||xe.postfix)+'"',e.embedCodes.htmlLiga="<"+ce+T+">"+W.split(/\s*,\s*/)[0]+"</"+ce+">"),e.visiblePanels.getcode=!0},e.showMulticolorWarning=function(){f.show({message:'<p class="mtn talign-left">Font glyphs cannot have more than one color by default. Using CSS, IcoMoon stacks multiple glyphs on top of each other to implement multicolor glyphs. As a result, these glyphs take more than one character code and cannot have ligatures.</p><p class="talign-left">To avoid multicolor glyphs, re-import your SVG after changing all its colors to a single color.</p>'})},x().get("demo.html.tmpl"),x().get("demo.css.tmpl"),x().get("demo.js.tmpl"),x().get("style.css.tmpl"),x().get("readme.txt"),x().get("uniCharts.html.tmpl")}]);angular.module("icomoonApp").controller("ImageCtrl",["$scope","$q","$timeout","fileSaver","template","svgPath","cloud","scriptLoader","color","csh",function(e,n,v,a,l,u,w,x,d,m){"use strict";var f,c,y,g,k,B,A;w.hasCloudAccess().then(function(){c=!0},function(){e.fontPref.embed=!1});function M(C){C.split?C=C.split(/\s*,\s*/):C.slice&&(C=C.slice(0));var D=e.imagePref.prefix;return C.forEach(function(U,V){var J=1;if((!D||D==="")&&(U=U.replace(/^[^a-z_]+/i,"")),U=U.replace(/\s+/g,"-").replace(/[^a-z0-9_-]/ig,""),!!C){if(g.indexOf(U)!==-1){for(;g.indexOf(U+J)!==-1;)J+=1;U=U+J}C[V]=U,g.push(U)}}),C.join(", ")}function E(C){var D=C.attrs,U,V,J,j,G,re,le=C.path,he,fe,de;for(V=new jsPDF({unit:"pt"}),V.deletePage(0),V.addPage([C.width,C.height]),C.bgColor&&(U=d(C.bgColor).toArray(),V.setFillColor(U[0],U[1],U[2]),V.rect(0,0,C.width,C.height,"F")),de=le.getPDFSegments(),j=0;j<de.length;j+=1)for(J=d(D&&D[j]&&D[j].fill||C.defaultColor||0).toArray(),he=d(D&&D[j]&&D[j].stroke||C.defaultColor||0).toArray(),G=0;G<de[j].length;G+=1)try{re=de[j][G],G+1===de[j].length&&(fe=null,(!D||!D[j]||D[j].fill!=="none")&&(V.setFillColor(J[0],J[1],J[2]),fe="F"),D&&D[j]&&D[j].strokeWidth>0&&(V.setDrawColor(he[0],he[1],he[2]),V.setLineWidth(D[j].strokeWidth*C.scale),V.setLineCap(D[j].strokeLinecap),V.setLineJoin(D[j].strokeLinejoin),fe===null?fe="S":fe="FD")),V.lines(re.slice(1),re[0][0],re[0][1],[1,1],G+1===de[j].length?fe:null,re.isClosed)}catch(Be){}return V.output("arraybuffer")}function F(C){var D=[],U,V,J,j,G,re,le,he,fe,de,Be=C.glyphSets||e.glyphSets,$=[],oe,ee,ce,xe,be,ue=e.imagePref,N,W,T=ue.margin,Y=ue.overrideSize?ue.height:0,K=!1,t=e.normSize,r,s,o,h,p,b,P,O,S={},I=1,X,z,H=[],Z,Q={width:0,height:0},R,L,q=[],_,ie,te=0,ye,Ce=0;for(e.glyphSets.forEach(function(pe){pe.forEach(function(ve){try{ve.icon.attrs.forEach(function(se,me){ie=ve.icon.attrs[me].fill,ie&&ie!=="none"&&D.indexOf(ie)===-1&&D.push(ie),ie=ve.icon.attrs[me].stroke,!isNaN(ve.icon.attrs[me].strokeWidth)&&ie&&D.indexOf(ie)===-1&&D.push(ie)})}catch(se){}})}),J=ue.color||0,J=d(J).toString({hex:!0,forCSS:!0}),j='fill="'+J+'"',j==='fill="#000"'&&(j=""),ue.addBgColor&&(U=d(ue.bgColor).toString({hex:!0,forCSS:!0})),V=ue.prefix||"icon-",G=ue.columns,ue.useClassSelector?X=ue.classSelector||".icon":(ue.postfix&&(X='[class$="'+ue.postfix+'"], [class*="'+ue.postfix+' "]'),(!X||ue.prefix)&&(X='[class^="'+V+'"], [class*=" '+V+'"]')),be=0;be<Be.length;be+=1)if(z=Be[be],!!z){for(z.glyphs=[],oe=Y||z[0].properties.prevSize||32,$.push({idx:be+1,size:oe}),te=0,N=0;N<z.length;N+=1){for(L=JSON.parse(JSON.stringify(z[N])),L.lines=!1,L.height=oe,L.width=Math.round(L.viewBox.width/L.viewBox.height*oe),U?L.bg={width:L.width,height:L.height,color:U}:L.bg=!1,L.addTitleTags=ue.addTitleTags?{glyphName:L.glyphName}:!1,L.fontSizeIdx=be+1,L.viewBox="0 0 "+(L.viewBox.width||t)+" "+(L.viewBox.height||t),L.prefix=ue.prefix,L.postfix=ue.postfix,L.selector=ue.useClassSelector?(ue.classSelector.slice(1)||"icon")+" ":"",L.svgPath=u(L.icon.paths),L.svgPath.viewBox={width:L.icon.width||t,height:L.icon.height||t},I=L.height/L.svgPath.viewBox.height,L.scaledPath=L.svgPath.scale(I),L.viewBox2="0 0 "+L.width+" "+L.height,L.scaledPathData=L.scaledPath.getPathData(!0),L.scale=I,O={props:{fill:!0,opacity:!0,stroke:!0,style:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0},scale:I,defaultColor:J},W=0;W<L.paths.length;W+=1){L.paths[W].idx=W+1,L.paths[W].fillColor="",L.icon.attrs&&L.icon.attrs[W]&&Object.keys(L.icon.attrs[W]).length>0&&(L.paths[W].strAttrs=e.stringifyAttrs(L.icon.attrs[W],O)),_=Object.create(O),_.xaml=!0;try{L.paths[W].strAttrs3=e.stringifyAttrs(L.icon.attrs[W],_)}catch(pe){L.paths[W].strAttrs3=""}L.paths[W].strAttrs=L.paths[W].strAttrs||j&&" "+j,_=Object.create(O),_.fillIdx=0,_.strokeIdx=0,!L.icon.attrs||!L.icon.attrs[W]||!L.icon.attrs[W].fill||L.icon.attrs[W].fill==="none"&&isNaN(L.icon.attrs[W].strokeWidth)||!isNaN(L.icon.attrs[W].strokeWidth)&&!L.icon.attrs[W].stroke&&(!L.icon.attrs[W].fill||L.icon.attrs[W].fill==="none")?(_.props=Object.create(O.props),_.props.fill=!1,_.props.stroke=!1,_.props.opacity=!1):(ie=L.icon.attrs[W].fill,_.fillIdx=D.indexOf(ie)+1,ie=L.icon.attrs[W].stroke,_.strokeIdx=D.indexOf(ie)+1),L.attrs=!1;try{L.paths[W].strAttrs2=e.stringifyAttrs(L.icon.attrs[W],_)}catch(pe){L.paths[W].strAttrs2=""}L.paths[W].d2=L.scaledPathData[W]}if(C.sprite){for(K&&(te=0,Ce+=L.height+T,K=!1),N===0&&(Q.width=(L.height+T)*G-T),_=te+L.width,te===0&&_>Q.width&&(Q.width=_),_>Q.width&&(te=0,Ce+=L.height+T),L.x=te,L.y=Ce,L.position=(te?"-"+te+"px":"0")+" "+(Ce?"-"+Ce+"px":"0"),_=L.x+L.width;te<_||te-_<T/2;)te+=L.height+T;te+L.width>Q.width&&(K=!0,_>Q.width&&(L.x=0,L.y=Ce+(L.height+T)))}q.push(L),z.glyphs.push(L)}C.sprite&&(Q.height=Ce+L.height,Ce=Q.height+T),H[be]={glyphs:z.glyphs,grid:z.grid}}return q=q.length>0?q:!1,H=H.length>0?H:!1,$=$.length>0?$:!1,(C.defs||C.html||C.html2)&&(fe=n.defer(),S.defs=fe.promise,l().get("defs.svg").then(function(pe){he=pe.fillup({symbols:q}),fe.resolve(he)})),C.polymer&&(h=n.defer(),n.all([l().get("icomoon-iconset-svg.html"),l().get("polymer-readme.txt")]).then(function(pe){h.resolve({html:pe[0].fillup({symbols:q,height:e.normSize}),txt:pe[1].fillup({glyphName:q&&q[0]?q[0].glyphName:"pen"})})}),S.polymer=h.promise),C.selection&&(b=n.defer(),S.selection=b.promise,p=JSON.parse(JSON.stringify(B)),p.forEach(function(pe){delete pe.properties.tempChar,delete pe.icon.id,delete pe.icon.matchesSearch}),p={IcoMoonType:"selection",icons:p,height:e.normSize,preferences:e.pref},C.selection==="compact"?b.resolve(JSON.stringify(p)):b.resolve(JSON.stringify(p,null,"  "))),C.html&&(ee=n.defer(),S.html=ee.promise,fe.promise.then(function(){l().get("demo-svg.html").then(function(pe){H&&(H[0].glyphs[0].url=""),ee.resolve(pe.fillup({defs:"\n"+he,sets:H,info:""}))})})),C.html2&&(ce=n.defer(),S.html2=ce.promise,fe.promise.then(function(){l().get("demo-svg2.html").then(function(pe){H&&(H[0].glyphs[0].url=""),ce.resolve(pe.fillup({sets:H,info:""}))})})),C.html3&&(xe=n.defer(),S.html3=xe.promise,l().get("demo-svg.html").then(function(pe){H&&(H[0].glyphs[0].url="symbol-defs.svg"),xe.resolve(pe.fillup({defs:"",sets:H,info:'<p><strong>Notice</strong>: This demo (along with "symbol-defs.svg" and "svgxuse.js" files) should be <b>hosted on a web server</b> to work properly.</p>',script:'<script defer src="'+(ue.minifyJs?"svgxuse.min.js":"svgxuse.js")+'"><\/script>'}))})),C.polyfill&&(o=n.defer(),S.polyfill=o.promise,l().get(ue.minifyJs?"svgxuse.min.js":"svgxuse.js").then(function(pe){o.resolve(pe.fillup().replace(/CLOUDLINK/,""))})),C.demoCss&&(de=n.defer(),S.demoCss=de.promise,l().get("demo-svg.css").then(function(pe){var ve=ue.prefix.length+g.map(function(me){return me.length}).reduce(function(me,Se){return Math.max(me,Se)},0),se=ve<=16&&$&&$.filter(function(me){return me.size<64}).length>0;de.resolve(pe.fillup({fontSizes:$,color:J,smallSize:!se,normalSize:se,glyphWidth:se?17:Math.round(ve/3)}))})),C.css&&(le=n.defer(),S.css=le.promise,l().get("style-svg.css").then(function(pe){var ve=[];H&&H.forEach(function(se){var me,Se=[],ne;for(ne=0;ne<se.glyphs.length;ne+=1)me=se.glyphs[ne],me.classSelector=!1,(me.attrs||me.w2hratio!==1)&&(me.w2hratio!==1&&(me.classSelector=[{w2h:me.w2hratio,prefix:me.prefix,postfix:me.postfix,glyphName:me.glyphName}]),Se.push(me));Se.length&&ve.push({glyphs:Se,grid:se.grid})}),le.resolve(pe.fillup({color:J,selector:X,sets:ve.length?ve:!1,bgColor:U?{value:U}:!1,prefix:ue.prefix,postfix:ue.postfix,colorTheme:!1}).replace(/\n+$/,"\n"))})),(C.svgs||C.sprite||C.png)&&(P=[],C.html&&P.push(ee.promise),C.defs&&P.push(fe.promise),C.polymer&&P.push(h.promise),C.svgs&&(R=n.defer(),S.svgs=R.promise),C.png&&(s=n.defer(),S.pngs=s.promise),C.pdf&&c&&(r=n.defer(),P.push(k),S.pdfs=r.promise),C.csh&&(re=n.defer(),S.csh=re.promise),C.xaml&&(ye=n.defer(),P.unshift(l().get("image.xaml.tmpl")),S.xamls=ye.promise),C.sprite&&(Z=n.defer(),S.sprite=Z.promise),n.all(P).then(function(pe){var ve=pe[0];l().get("image.svg").then(function(se){var me,Se,ne,ge,Ae,we,Ee=[],ae,Fe,Me,Pe,De={},ke=[],Ue,Ne=[];for(C.png&&(Me=[],me=document.createElement("canvas")),C.pdf&&c&&(Fe=[]),ne=0;ne<q.length;ne+=1)we=q[ne].svgPath,we.name=q[ne].glyphName,Ee.push(we);for(C.csh&&re.resolve(m(Ee).generateCSH()),ne=0;ne<q.length;ne+=1){for(we=Ee[ne],oe=q[ne].height,ae=q[ne].scaledPathData,ge=0;ge<ae.length;ge+=1)q[ne].paths[ge].d=ae[ge];if(ue.numPrefix){for(Pe=ne+1+"";Pe.length<String(q.length+1).length;)Pe="0"+Pe;Se=Pe+"-"+q[ne].glyphName}else Se=q[ne].glyphName;ue.addTitleTags?q[ne].title=[{glyphName:q[ne].glyphName}]:q[ne].title=!1,_=se.fillup(q[ne]),C.xaml&&(q[ne].xamlName=((q[ne].prefix||"")+(q[ne].glyphName||"")+(q[ne].postfix||"")).replace(/-/ig,"_").replace(/[^a-z_0-9]/ig,""),Ue=ve.fillup(q[ne])),C.png&&(me.width=q[ne].width,me.height=q[ne].height,canvg(me,_),Me.push({name:Se+".png",data:me.toDataURL().replace(/.*,/m,"")})),C.pdf&&c&&Fe.push({name:Se+".pdf",data:E({attrs:q[ne].icon.attrs,scale:q[ne].scale,bgColor:U,defaultColor:J,path:we,width:q[ne].width,height:q[ne].height})}),ke.push({name:Se+".svg",data:_}),C.xaml&&Ne.push({name:Se+".xaml",data:Ue})}C.svgs&&R.resolve(ke),C.png&&s.resolve(Me),C.xaml&&ye.resolve(Ne),C.pdf&&c&&r.resolve(Fe),C.sprite&&l().get("sprite.svg").then(function(Te){return _=Te.fillup({g:q,width:Q.width,height:Q.height}),C.png&&(me=document.createElement("canvas"),me.width=Q.width,me.height=Q.height,canvg(me,_),De.png=me.toDataURL().replace(/.*,/m,"")),De.svg=_,l().get("sprite.html")}).then(function(Te){return _=Te.fillup({sets:H,fontSizes:$}),De.html=_,l().get("sprite.css")}).then(function(Te){_=Te.fillup({selector:X,bgColor:U?{value:U}:!1,sets:H}),De.css=_,Z.resolve(De)})})})),S}e.$watch(function(){return e.imagePref},function(C){(!C.prefix||!C.prefix.trim())&&(C.useClassSelector?C.useClassSelector=!0:C.prefix="icon-");try{C.name=C.name.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z\-\_0-9]/g,""),C.name=C.name.slice(0,31)}catch(D){C.name="icomoon"}C.pdf&&!k&&(k=x.load("components/jspdf/jspdf.min.js")),C.useClassSelector&&(C.classSelector=C.classSelector||"",C.classSelector="."+(C.classSelector.replace(/[^a-zA-Z\-\_0-9]/g,"").replace(/^[^a-zA-Z_\-]/,"").replace(/^-([^a-zA-Z_])/,"")||"icon")),A=v(function(){e.imagePref.autoHost&&e.host({onlyDev:!0})},2e3)},!0),function(){var C=[];e.$watch(function(){return B=e.getSelectedIcons(),JSON.stringify(B)+e.history.idx},function(){var D=e.imagePref.color||0,U=NaN,V,J,j,G,re,le=e.normSize,he,fe,de,Be=B.length;for(g=[],e.glyphNames={empty:""},B=e.sortByGrid(B),y=[],e.glyphSets=[],V=0;V<Be;V+=1){for(de=B[V],J=de.icon,re=de.properties.name,re||(!re&&J.tags&&(re=J.tags[0].replace(/[^\w\d\-\_]/g,"").replace(/^\d+/,"")),re||(re="untitled")),re=M(re),de.properties.name=re,he=u(J.paths),he.viewBox={width:J.width||le,height:J.height||le},fe=he.getPathData(!0),j=0;j<fe.length;j+=1)fe[j]={d:fe[j]},J.attrs&&J.attrs[j]&&(fe[j].attrs=J.attrs[j]),/fill/.test(fe[j].attrs)||(fe[j].fill=' fill="#'+D+'"');y[V]={grid:J.grid,properties:de.properties,icon:J,selectionIdx:V,paths:fe,viewBox:he.viewBox,w2hratio:he.viewBox.width/he.viewBox.height,glyphName:re.replace(/\s+/g,"").split(/,/)[0],setId:de.setId,setIdx:de.setIdx,iconIdx:de.iconIdx}}for(e.glyphs=y,j=-1,V=0;V<Be;V+=1)y[V].grid!==U&&(U=y[V].grid,j+=1,C[j]=C[j]||[],C[j].grid=U,j!==-1&&C[j].splice(G),G=0),C[j][G]=y[V],C[j][G].properties.prevSize=C[j][0].properties.prevSize||U||32,G+=1;G&&j!==-1&&C[j].splice(G),C.splice(j+1),e.glyphSets=C,F({defs:!0}).defs.then(function($){var oe=$.length;oe<1e3?e.size="less than 1 KB":(oe=Math.round(oe/1e3),e.size=oe+" KB")}),v.cancel(A),A=v(function(){e.imagePref.autoHost&&e.host({onlyDev:!0})},2e3)})}(),e.removeGlyph=function(C){C.properties.order=0},e.editGlyph=function(C){B=e.sortByGrid(B);var D=B[C.selectionIdx],U=[D.iconIdx];U.properties=C.properties,U.noNavigation=!0,e.changeIcons(U,D.setIdx,"edit")},e.download=function(){var C=e.imagePref,D={},U,V,J=a();e.downloading=!0,U=F({html:!0,html3:!0,polyfill:!0,defs:!0,css:!0,demoCss:!0,svgs:!0,selection:!0,png:C.png,pdf:C.pdf,xaml:C.xaml,polymer:C.polymer,csh:C.csh,sprite:C.sprite}),D.htmlAdded=n.defer(),D.html3Added=n.defer(),D.polyfillAdded=n.defer(),D.readMeAdded=n.defer(),D.defsAdded=n.defer(),D.cssAdded=n.defer(),D.demoCssAdded=n.defer(),D.svgsAdded=n.defer(),D.spriteAdded=n.defer(),V=[D.htmlAdded.promise,D.html3Added.promise,D.polyfillAdded.promise,D.readMeAdded.promise,D.defsAdded.promise,D.cssAdded.promise,D.demoCssAdded.promise,D.svgsAdded.promise],l().get("readme-svg.txt").then(function(j){J.add("Read Me.txt",j.fillup({selector:C.useClassSelector?(C.classSelector||".icon").slice(1)+" ":"",prefix:C.prefix,postfix:C.postfix,glyphName:B[0]?B[0].properties.name:"home"})),D.readMeAdded.resolve()}),U.selection.then(function(j){J.add("selection.json",j)}),U.html.then(function(j){J.add("demo.html",j),D.htmlAdded.resolve()}),U.html3.then(function(j){J.add("demo-external-svg.html",j),D.html3Added.resolve()}),U.polyfill.then(function(j){J.add("svgxuse."+(C.minifyJs?"min.":"")+"js",j),D.polyfillAdded.resolve()}),U.defs.then(function(j){J.add("symbol-defs.svg",j),D.defsAdded.resolve()}),U.css.then(function(j){J.add("style.css",j),D.cssAdded.resolve()}),U.demoCss.then(function(j){J.add("demo-files/demo.css",j),D.demoCssAdded.resolve()}),U.svgs.then(function(j){j.forEach(function(G){J.add("SVG/"+G.name,G.data)}),D.svgsAdded.resolve()}),C.png&&(D.pngsAdded=n.defer(),V.push(D.pngsAdded.promise),U.pngs.then(function(j){j.forEach(function(G){J.add("PNG/"+G.name,G.data,{base64:!0})}),D.pngsAdded.resolve()})),C.xaml&&(D.xamlsAdded=n.defer(),V.push(D.xamlsAdded.promise),U.xamls.then(function(j){j.forEach(function(G){J.add("XAML/"+G.name,G.data)}),D.xamlsAdded.resolve()})),C.polymer&&U.polymer.then(function(j){D.polymerAdded=n.defer(),V.push(D.polymerAdded.promise),J.add("icomoon-polymer/icomoon-iconset-svg.html",j.html),J.add("icomoon-polymer/Read Me.txt",j.txt),D.polymerAdded.resolve()}),C.csh&&(D.cshAdded=n.defer(),V.push(D.cshAdded.promise),U.csh.then(function(j){D.cshAdded.resolve(),J.add("Custom Shapes.csh",j,{base64:!0})})),C.pdf&&c&&(D.pdfsAdded=n.defer(),V.push(D.pdfsAdded.promise),U.pdfs.then(function(j){j.forEach(function(G){J.add("PDF/"+G.name,G.data)}),D.pdfsAdded.resolve()})),C.sprite&&(D.spriteAdded=n.defer(),V.push(D.spriteAdded.promise),U.sprite.then(function(j){J.add("sprite/sprite.html",j.html),J.add("sprite/sprite.css",j.css),J.add("sprite/sprite.svg",j.svg),C.png&&J.add("sprite/sprite.png",j.png,{base64:!0}),D.spriteAdded.resolve()})),n.all(V).then(function(){J.save((C.name||"icomoon")+".zip").then(function(){e.downloading=!1})})},e.quickUsage={statusMessage:"Working\u2026",placeholder:'<link rel="stylesheet" href="...">\n<script src="..."><\/script>'},function(){var C=l('<link rel="stylesheet" href="{{href}}">'),D=e.pref.imageUrlHash||0,U=l('<script src="{{src}}"><\/script>'),V;e.pref.imageUrlS3&&(e.quickUsage.ref2=C.fillup({href:e.pref.imageUrlS3+"/style-svg.css?"+D})+"\n"+U.fillup({src:e.pref.imageUrlS3+"/svgxuse-s3.js?"+D}),e.quickUsage.url2=e.pref.imageUrlS3+"/svgxuse-s3.js?"+D),e.pref.imageCF?(V=new Date().getTime()-e.pref.imageCF.time,V<2&&(e.quickUsage.ref3=e.quickUsage.placeholder,e.quickUsage.url3="..."),v.cancel(f),f=v(function(){e.quickUsage.ref3=C.fillup({href:e.pref.imageCF.url+"/style-svg.css?"+D})+"\n"+U.fillup({src:e.pref.imageCF.url+"/svgxuse.js?"+D}),e.quickUsage.url3=e.pref.imageCF.url+"/svgxuse.js?"+D},2-V)):e.pref.imageUrlCF&&(e.quickUsage.ref3=C.fillup({href:e.pref.imageUrlCF+"/style-svg.css?"+D})+"\n"+U.fillup({src:e.pref.imageUrlCF+"/svgxuse.js?"+D}))}(),e.host=function(C){var D=C&&C.enable,U=e.imagePref,V,J=C&&C.onlyDev&&e.pref.imageUploadTime,j,G={},re,le=[],he;!U.autoHost&&!D||(j=F({html:!0,html2:!0,css:!0,defs:!0,demoCss:!0,selection:!0}),V=l().get(U.minifyJs?"svgxuse.min.js":"svgxuse.js"),le=[j.html,j.html2,j.css,j.defs,j.selection,V],j.html.then(function(fe){G.html=fe}),j.html2.then(function(fe){G.html2=fe}),j.css.then(function(fe){G.css=fe}),j.defs.then(function(fe){G.defs=fe}),j.demoCss.then(function(fe){G.demoCss=fe}),j.selection.then(function(fe){G.selection=fe}),V.then(function(fe){G.js=fe.fillup()}),he=a(),U.autoHost=!0,re=e.project.metadata.name.replace(/[^a-zA-Z\-\_0-9]/g,""),J=J&&e.pref.imageHostingName===re,(!e.pref.quickUsageToken||!e.pref.quickUsageToken[re])&&(e.pref.quickUsageToken={}),e.onlineEditor={disabled:!0},J?e.quickUsage.uploading="Update":e.quickUsage.uploading="Uploading\u2026",n.all(le).then(function(){var fe,de,Be;he.add("style-svg.css",G.css),he.add("svgxuse.js",G.js),he.add("symbol-defs.svg",G.defs),he.add("demo.css",G.demoCss),he.add("selection-svg.json",G.selection),Be=G.selection+e.project.metadata.name,fe=Be.hashCode(),de={hash:fe,zip:he.getArrayBuffer().toString(!0),name:re,token:e.pref.quickUsageToken[re],ssl:!0,type:"svg",onlyDev:J},fe=fe.toString(36),J&&(fe=e.pref.imageUrlHash||0),e.history.ignore=!0,e.quickUsage.icon="sync fgc-warning",e.quickUsage.statusMessage="Uploading\u2026",w.host(de).then(function($){var oe=l('<link rel="stylesheet" href="{{href}}">'),ee=l('<script defer src="{{src}}"><\/script>'),ce={},xe,be="";w.hasCloudAccess().then(null,function(){!$.path2&&!$.path3&&(be=" It will expire in 24 hours. ")}).finally(function(){e.quickUsage.url=$.path+"/style-svg.css",ce={html:"<!-- Add the following references to the <head> of your HTML.\nFor development purposes only. Do not use in Production."+be+" -->\n"},$.path&&(xe=ee.fillup({src:$.path+"/svgxuse.js"}),e.quickUsage.ref=oe.fillup({href:$.path+"/style-svg.css"})+"\n"+xe,ce.html+=xe,ce.css_external=$.path+"/demo.css"),$.path2&&(e.quickUsage.ref2=oe.fillup({href:$.path2+"/style-svg.css?"+fe})+"\n"+ee.fillup({src:$.path2+"/svgxuse-s3.js?"+fe}),e.quickUsage.url2=$.path2+"/svgxuse-s3.js?"+fe),ce.html+="\n"+G.html2,ce.css=G.css,e.onlineEditor.data=JSON.stringify(ce),e.onlineEditor.disabled=!1,e.pref.quickUsageToken[re]=$.token,e.history.ignore=!0,e.quickUsage.icon="check fgc-success",e.quickUsage.statusMessage="Ready",e.quickUsage.uploading=!1,!J&&$.path2&&(ce=new Date,e.pref.imageUploadTime=ce.toLocaleDateString()+", "+ce.toLocaleTimeString(),e.pref.imageUrlS3=$.path2,e.pref.imageCF={url:$.path3,time:new Date().getTime()},e.quickUsage.ref3=e.quickUsage.placeholder,e.quickUsage.url3="...",v.cancel(f),f=v(function(){e.quickUsage.ref3=oe.fillup({href:$.path3+"/style-svg.css?"+fe})+"\n"+ee.fillup({src:$.path3+"/svgxuse.js?"+fe}),e.quickUsage.url3=e.pref.imageCF.url+"/svgxuse.js?"+fe},2),e.pref.imageUrlHash=fe,e.pref.imageHostingName=re),$.path2||(e.pref.imageHostingName=void 0,e.imageUploadTime=void 0,e.pref.imageUrlS3=void 0,e.pref.imageCF=void 0,e.pref.imageUploadTime=void 0,e.quickUsage.ref2=void 0,e.quickUsage.url2=void 0,e.quickUsage.ref3=void 0,e.quickUsage.url3=void 0)})},function(){e.quickUsage.icon="warning fgc-error",e.quickUsage.statusMessage="Upload Failed",e.quickUsage.uploading=!1})}))},e.getEmbedCode=function(C){var D,U="",V=e.imagePref,J=!1,j,G,re;C?(G=C.properties.name,j=(V.prefix||"")+G+(V.postfix||""),V.useClassSelector&&(U=V.classSelector.slice(1)+" "),D=[[C]],y.every(function(le){return J===!1?(J=le.setId,!0):J===le.setId})||D.push(!1)):D=!1,re=F({defs:!0,css:!0,glyphSets:D}),re=[re.defs,re.css],n.all(re).then(function(le){var he=le[1],fe=le[0],de;C&&(fe=fe.slice(fe.indexOf("<symbol"),fe.indexOf("</symbol>")+9),de=he.indexOf(j),de===-1&&(de=he.indexOf("fill-color")),he=(he.slice(0,he.indexOf("/*")-1)+(de===-1?"":he.slice(de-1))).replace(/\n+$/,"")),e.embedCodes={html:'<svg class="'+U+j+'"><use xlink:href="#'+j+'"></use></svg>',def:fe,defLines:fe.match(/\n/g).length+1,css:he,cssLines:he?he.match(/\n/g).length+1:0},C||delete e.embedCodes.html,e.visiblePanels.getcode2=!0})},e.getHexColor=function(C){for(C=C.toString(16);C.length<6;)C="0"+C;return C},l().get("demo-svg.html"),l().get("readme-svg.txt"),l().get("demo-svg.css"),l().get("style-svg.css"),l().get("defs.svg"),l().get("image.svg"),l().get(e.imagePref.minifyJs?"svgxuse.min.js":"svgxuse.js")}]);angular.module("icomoonApp").controller("ProjectsCtrl",["$scope","$state","$q","session","cloud","message","fileSaver","storage",function(e,n,v,a,l,u,w,x){var d,m,f=v.defer(),c,y,g;function k(B){return JSON.parse(JSON.stringify(B))}e.newProjectDisabled=!1,function(){var B=a("icomoon");x.load("currentProject",function(A){m=A,B.load("icomoon-lib/presets.json").then(function(M){var E=[],F=[],C,D,U=M.projects,V=!1,J;for(C=0,D=U.length;C<D;C+=1)U[C].iconSets&&(V=!0,J=new Date().getTime()+C,U[C].metadata.created=J,a(J).quickSave(U[C])),E.push(k(U[C].metadata?U[C].metadata:U[C])),F.push(E[C].created);V?(M.projects=E,M.time+=1,B.quickSave(M).then(function(){f.resolve(M)})):f.resolve(M),F.indexOf(m)===-1&&(m=F[0]||0,x.save("currentProject",m))})})}(),e.authed=!1,f.promise.then(function(B){e.projectsReady=!0,function(){var F,C,D,U=[];for(y=B,D=y.projects.slice(0),e.order=y.order||"Date Created",y.order=e.order,e.projects=[],F=0,C=D.length;F<C;F+=1)U.indexOf(D[F].created)===-1&&(U.push(D[F].created),e.projects.push({idx:F,metadata:k(D[F])}),D[F].created===m&&(d=e.projects[F]));!d&&C>0&&(d=e.projects[0])}();var A=a("icomoon");e.isSyncing=A.isSyncing,l.auth().then(function(){e.signedIn=!0,e.authed=!0},function(){e.signedIn=!1,e.authed=!0}),l.hasCloudAccess().then(function(){e.cloudAccess=!0},function(){e.cloudAccess=!1}),e.$watch("order",function(F){var C;F==="Date Modified"?C=function(D,U){return U.metadata.lastOpened-D.metadata.lastOpened}:F==="Date Created"?C=function(D,U){return D.metadata.created-U.metadata.created}:C=function(D,U){return D.metadata.name.localeCompare(U.metadata.name)},e.projects.sort(C)}),e.loadProject=function(F,C){var D,U;d=!1,c=!0,C.loading=!0,e.projects.disabled=!0;var V,J;try{V=C.metadata.name,J=y.projects[F].name}catch(j){}if(C.disabled||V!==J){setTimeout(function(){e.loadProject(F,C)},200);return}y.projects[F]&&(y.projects[F].lastOpened=new Date().getTime(),D=y.projects[F].created||y.projects[F].metadata.created,U=a(D),U.downloadProgressHandler=function(j){var G=j.total||j.totalSize;j.loaded!==G&&e.$apply(function(){var re=j.loaded/G;re>1&&(re=1),C.progress=re})},U.load().then(function(j){j.metadata.name!==y.projects[F].name&&(j.metadata.name=y.projects[F].name,U.quickSave()),x.save("currentProject",D,function(){n.transitionTo("select").then(function(){A.save(y)})})},function(j){j==="no such project"&&(u.show("Project <strong>"+C.metadata.name+"</strong> could not be found."),y.projects.splice(F,1),A.quickSave(y),e.projects=e.projects.filter(function(G){return G.idx!==F}))}))};function M(F){var C=0,D=1;if(F&&F[0])C=F[0].idx||C;else return C;for(;D<F.length;)F[D]&&F[D].idx&&(C=Math.max(C,F[D].idx)),D+=1;return C+1}function E(F){var C=[],D;if(F=F||"Untitled Project",F=F.replace(/\d+$/,"").trim(),C=e.projects.map(function(U){return U.metadata.name}),C.indexOf(F)===-1)D="";else for(F+=" ",D=1;C.indexOf(F+D)!==-1;)D+=1;return F+D}e.newProject=function(F){var C,D,U;F=F||{},!e.cloudAccess&&e.projects.length>3?e.showPromo({r3f:"06"}):(C={name:E(),lastOpened:0,created:new Date().getTime()},D={metadata:C,iconSets:F.iconSets||[]},F.preferences&&(D.preferences=F.preferences),U={idx:M(e.projects),metadata:C,disabled:!0},e.projects.push(U),window.scrollTo(0,99999),c=!0,e.newProjectDisabled=!0,a(C.created).quickSave(D).then(function(V){return function(){y.projects.push(k(V.metadata)),c=!1,V.disabled=!1,A.quickSave(y).then(function(){e.newProjectDisabled=!1})}}(U)))},e.restore=function(){u.show({message:'<p class="mvn">Restore deleted projects?</p><p class="mtm">All <strong>non-empty</strong> projects that were deleted will&nbsp;be&nbsp;resotred.<br>Feel free to <a href="https://icomoon.io/contact">contact us</a> for further assitance.</p>',firstButton:{caption:"Restore"},secondButton:{caption:"Cancel",focused:!0}}).then(function(F){F==="Restore"&&l.restoreProjects().then(function(){location.reload()},function(){u.show('<p class="mvn">Failed to restore projects.</p><p class="mtm">You may try again later or <a href="https://icomoon.io/contact">contact us</a> for further assitance.</p>')})})},e.removeProject=function(F,C){var D=function(){var U=y.projects[F],V=U&&U.name;V&&(V=V.replace(/[^a-zA-Z\-\_0-9]/g,""),l.unpublish({name:V})),U=U.created?U.created:U.metadata.created,x.remove(U),y.projects.splice(F,1),e.projects.splice(C,1),e.projects.forEach(function(J){J.idx>F&&(J.idx-=1)}),A.quickSave(y)};u.show({message:"Are you sure you want to delete this project?<br><strong>"+y.projects[F].name+"</strong>",firstButton:{caption:"Delete"},secondButton:{caption:"Cancel",focused:!0}}).then(function(U){U==="Delete"&&D()})},e.downloadProject=function(F){a(y.projects[F].created).load().then(function(C){w().save(C.metadata.name+".json",JSON.stringify(C,null,"  "))})},e.import=function(F){var C,D,U,V,J,j,G,re,le;if(F){if(!e.cloudAccess&&e.projects.length>3){e.showPromo({r3f:"06"});return}for(J=F.length,J||u.show("Please select IcoMoon project files (JSON)."),C=0;C<J;C+=1){try{G=JSON.parse(F[C].file)}catch(fe){var he="<strong>Invalid JSON file</strong>";try{he+="<br>"+fe.message}catch(de){}u.show(he)}if(D=G.IcoMoonType==="icon-set",U=G.IcoMoonType==="selection",delete G.uid,delete G.premium,U&&G.icons){for(re=[],V=0,j=G.icons.length;V<j;V+=1)re[V]=G.icons[V].properties,G.icons[V]=G.icons[V].icon;G.selection=re}if((D||U)&&G.icons){if(delete G.IcoMoonType,G.metadata||(G.metadata={name:"Untitled Set"}),!G.prevSize)try{G.prevSize=G.selection[0].prevSize}catch(fe){}e.newProject({iconSets:[G],preferences:G.preferences||!1});return}G.iconSets&&G.metadata?(G.metadata.name=E(G.metadata.name),G.metadata.created=new Date().getTime(),G.metadata.lastOpened=0,le={metadata:G.metadata,idx:M(e.projects),disabled:!0},e.projects.push(le),window.scrollTo(0,99999),a(G.metadata.created).quickSave(G).then(function(fe,de){return function(){y.projects.push(k(fe.metadata)),de.disabled=!1,A.quickSave(y)}}(G,le))):u.show("The project file you selected is not valid.")}}},e.reset=function(){a.reset().then(function(){location.reload()})},e.$on("$stateChangeStart",function(){d&&(d.loading=!0,e.projects.disabled=!0,c=!0)}),e.showPromo=function(F){e.cloudAccess||(u.show({message:['<p class="talign-left mvn">You can manage <span class="fgc0">up to 4 projects</span>.<br />Become a premium member of IcoMoon to: </p>','<ul class="noListStyle talign-left">','<li><i class="icon-check fgc9 mrs"></i>Manage an unlimited number of projects</li>','<li><i class="icon-check fgc9 mrs"></i>Save changes in your account</li>','<li><i class="icon-check fgc9 mrs"></i>Encode and embed fonts in CSS</li>','<li><i class="icon-check fgc9 mrs"></i>Generate WOFF 2.0 fonts</li>','<li><i class="icon-check fgc9 mrs"></i>Access extra icon packs in the <a href="#/select/library">library tab</a></li>','<li><i class="icon-check fgc9 mrs"></i>Upload icons for sharing, development or production</li>',"</ul>"].join(""),firstButton:{caption:"Subscribe",focused:!0},secondButton:{caption:"Cancel"}}).then(function(C){C==="Subscribe"&&(window.location="https://icomoon.io/pricing")}),F&&F.hide&&(e.visiblePanels[F.hide]=!1))},e.$watch(function(){return e.order+JSON.stringify(e.projects)},function(){if(clearTimeout(g),c){A.quickSave(y);return}e.projects.forEach(function(F,C){var D;F.metadata.name=F.metadata.name.trim(),F.metadata.name||(F.metadata.name=E("Untitled Project")),y.projects[F.idx]&&y.projects[F.idx].name!==F.metadata.name&&(F.disabled=!0,y.projects[F.idx].name=F.metadata.name,D=a(F.metadata.created),D.load().then(function(U){U.metadata.name=F.metadata.name,D.quickSave().then(function(){F.disabled=!1})},function(U){U==="no such project"&&(y.projects.splice(F.idx,1),e.projects.splice(C,1))}))}),g=setTimeout(function(){y.order=e.order,c||A.quickSave(y)},1e3)})})}]);angular.module("icomoonApp").controller("LibCtrl",["$scope","$http","$state","iconSets","cloud",function(e,n,v,a,l){var u=!1,w=l.getPurchases().then(function(x){var d=[];return x.forEach(function(m){isNaN(m.product)||(d[m.product]=m.jsonlink)}),d});(function(){var x=[];a.forEach(function(d,m){d.ignore||(x.push(d),u===!1&&d.premium&&(u=x.length-1))}),a=x,e.collections=[],e.collections[0]=a.slice(0,u),e.collections[1]=a.slice(u),e.collections[1].premium=!0})(),e.$watch(function(){return e.project.iconSets.slice(0)},function(x){var d,m,f,c=[],y,g;for(d=function(k,B){var A=k[B.productId];A?(B.hasAccess=!0,B.json=A):B.hasAccess=!1},y=x.length,m=0;m<y;m+=1)g=x[m],x[m]=g.metadata.name,c[m]=e.getSetHash(g);for(m=0,y=a.length;m<y;m+=1)g=a[m],f=x.indexOf(g.name),g.button={},f===-1?(g.added=g.latest=!1,g.button.caption="Add",g.button.caption2="Adding",g.button.icon="plus"):(g.added={idx:f},g.latest=c.indexOf(g.iconsHash)!==-1,g.latest?(g.button.caption="Remove",g.button.caption2="Removing",g.button.icon="minus"):(g.button.caption="Restore / Update",g.button.caption2="Loading",g.button.icon="sync")),g.purchaseLink?(g.hasAccess="loading",function(k){w.then(function(B){d(B,k)})}(g)):g.hasAccess=!0},!0),e.addremove=function(x){var d={transformResponse:!1};x.added&&x.latest&&e.removeSet(x.added.idx),x.latest||(x.button.disabled=!0,x.productId&&(d.withCredentials=!0),n.get(x.json,d).then(function(m){x.added&&e.removeSet(x.added.idx,!0),e.import([{file:m.data}]).finally(function(){e.scrollPositions.select=0,v.transitionTo("select"),x.button.disabled=!1})}))},e.packSubmission={},e.submitPack=function(){e.packSubmission.url&&(e.packSubmission.sending=!0,l.contact({email:e.packSubmission.email,msg:"<b>Icon Pack Submission</b><br /><br />URL: "+e.packSubmission.url}).then(function(){e.packSubmission={submitted:!0}}).finally(function(){e.packSubmission={}}))}}]);})();
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * @link   http://www.phpied.com/rgb-color-parser-in-javascript/
 * @license Use it if you like it
 */
